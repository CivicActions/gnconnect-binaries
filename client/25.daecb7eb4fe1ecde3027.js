(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1048:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(282)),s=f(a(279)),l=f(a(283)),i=f(a(280)),r=f(a(281)),o=f(a(1)),u=f(a(3)),d=a(762),c=a(763),m=f(a(849));function f(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,s.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleChange=function(e){e.preventDefault();var t=e.target.value.trim().replace(/\s/g,"");t!==a.state.token&&a.setState({token:t})},a.handleSubmit=function(e){e.preventDefault();var t={serverError:"",saving:!0};a.setState(t),a.props.submit(a.props.loginId,a.props.password,a.state.token)},a.state={saving:!1,token:"",serverError:""},a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=void 0,t="";return this.state.serverError&&(e=u.default.createElement("label",{className:"control-label"},this.state.serverError),t=" has-error"),u.default.createElement("form",{onSubmit:this.handleSubmit},u.default.createElement("div",{className:"signup__email-container"},u.default.createElement("p",null,u.default.createElement(d.FormattedMessage,{id:"login_mfa.enterToken",defaultMessage:"To complete the sign in process, please enter a token from your smartphone's authenticator"})),u.default.createElement("div",{className:"form-group"+t},e),u.default.createElement("div",{className:"form-group"+t},u.default.createElement("input",{type:"text",className:"form-control",name:"token",placeholder:(0,c.localizeMessage)("login_mfa.token","MFA Token"),spellCheck:"false",autoComplete:"off",autoFocus:!0,onChange:this.handleChange})),u.default.createElement("div",{className:"form-group"},u.default.createElement(m.default,{saving:this.state.saving,disabled:this.state.saving,onClick:this.handleSubmit,defaultMessage:(0,c.localizeMessage)("login_mfa.submit","Submit"),savingMessage:(0,c.localizeMessage)("login_mfa.submitting","Submitting...")}))))}}]),t}(u.default.PureComponent);g.propTypes={loginId:o.default.string.isRequired,password:o.default.string.isRequired,submit:o.default.func.isRequired},t.default=g},2361:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(284),s=a(96),l=function(e){return e&&e.__esModule?e:{default:e}}(a(2362));t.default=(0,n.connect)(function(e){var t=(0,s.getConfig)(e);return{isLicensed:"true"===(0,s.getLicense)(e).IsLicensed,customBrandText:t.CustomBrandText,customDescriptionText:t.CustomDescriptionText,enableCustomBrand:"true"===t.EnableCustomBrand,enableLdap:"true"===t.EnableLdap,enableOpenServer:"true"===t.EnableOpenServer,enableSaml:"true"===t.EnableSaml,enableSignInWithEmail:"true"===t.EnableSignInWithEmail,enableSignInWithUsername:"true"===t.EnableSignInWithUsername,enableSignUpWithEmail:"true"===t.EnableSignUpWithEmail,enableSignUpWithGitLab:"true"===t.EnableSignUpWithGitLab,enableSignUpWithGoogle:"true"===t.EnableSignUpWithGoogle,enableSignUpWithOffice365:"true"===t.EnableSignUpWithOffice365,experimentalPrimaryTeam:t.ExperimentalPrimaryTeam,ldapLoginFieldName:t.LdapLoginFieldName,samlLoginButtonText:t.SamlLoginButtonText,siteName:t.SiteName}})(l.default)},2362:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a(282)),s=C(a(279)),l=C(a(280)),i=C(a(283)),r=C(a(281)),o=C(a(1)),u=C(a(3)),d=a(762),c=a(285),m=a(184),f=U(a(773)),g=a(831),p=a(777),h=C(a(817)),E=C(a(769)),b=C(a(779)),v=a(288),S=C(a(25)),_=C(a(1121)),M=U(a(818)),N=U(a(763)),w=C(a(809)),L=C(a(882)),y=C(a(874)),I=C(a(811)),k=C(a(1048));function U(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}var P=function(e){function t(e){(0,s.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));a.preSubmit=a.preSubmit.bind(a),a.submit=a.submit.bind(a),a.finishSignin=a.finishSignin.bind(a),a.handleLoginIdChange=a.handleLoginIdChange.bind(a),a.handlePasswordChange=a.handlePasswordChange.bind(a);var i="";return new URLSearchParams(a.props.location.search).get("extra")===S.default.SIGNIN_VERIFIED&&new URLSearchParams(a.props.location.search).get("email")&&(i=new URLSearchParams(a.props.location.search).get("email")),a.state={ldapEnabled:a.props.isLicensed&&a.props.enableLdap,usernameSigninEnabled:a.props.enableSignInWithUsername,emailSigninEnabled:a.props.enableSignInWithEmail,samlEnabled:a.props.isLicensed&&a.props.enableSaml,loginId:i,password:"",showMfa:!1,loading:!1},a}return(0,r.default)(t,e),(0,i.default)(t,null,[{key:"propTypes",get:function(){return{location:o.default.object.isRequired,isLicensed:o.default.bool.isRequired,customBrandText:o.default.string,customDescriptionText:o.default.string,enableCustomBrand:o.default.bool.isRequired,enableLdap:o.default.bool.isRequired,enableOpenServer:o.default.bool.isRequired,enableSaml:o.default.bool.isRequired,enableSignInWithEmail:o.default.bool.isRequired,enableSignInWithUsername:o.default.bool.isRequired,enableSignUpWithEmail:o.default.bool.isRequired,enableSignUpWithGitLab:o.default.bool.isRequired,enableSignUpWithGoogle:o.default.bool.isRequired,enableSignUpWithOffice365:o.default.bool.isRequired,experimentalPrimaryTeam:o.default.string,ldapLoginFieldName:o.default.string,samlLoginButtonText:o.default.string,siteName:o.default.string}}}]),(0,i.default)(t,[{key:"componentDidMount",value:function(){document.title=this.props.siteName,h.default.removeGlobalItem("team"),E.default.getCurrentUser()&&f.redirectUserToDefaultTeam(),new URLSearchParams(this.props.location.search).get("extra")===S.default.SIGNIN_VERIFIED&&new URLSearchParams(this.props.location.search).get("email")&&this.refs.password.focus()}},{key:"preSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.location,n=a.search.replace(/(extra=password_change)&?/i,"");n!==a.search&&v.browserHistory.replace(""+a.pathname+n+a.hash);var s=this.refs.loginId.value;s!==this.state.loginId&&this.setState({loginId:s});var l=this.refs.password.value;if(l!==this.state.password&&this.setState({password:l}),!(s=s.trim().toLowerCase())){var i="login.no";return this.state.emailSigninEnabled&&(i+="Email"),this.state.usernameSigninEnabled&&(i+="Username"),this.state.ldapEnabled&&(i+="LdapUsername"),void this.setState({serverError:u.default.createElement(d.FormattedMessage,{id:i,values:{ldapUsername:this.props.ldapLoginFieldName||N.localizeMessage("login.ldapUsernameLower","AD/LDAP username")}})})}l?(0,p.checkMfa)(s,function(e){e?t.setState({showMfa:!0}):t.submit(s,l,"")},function(e){t.setState({serverError:e.message})}):this.setState({serverError:u.default.createElement(d.FormattedMessage,{id:"login.noPassword",defaultMessage:"Please enter your password"})})}},{key:"submit",value:function(e,t,a){var n=this;this.setState({serverError:null,loading:!0}),(0,p.webLogin)(e,t,a,function(){var e=new URLSearchParams(n.props.location.search),t=e.get("t")||"",a=e.get("id")||"";a||t?(0,g.addUserToTeamFromInvite)(t,a,function(e){n.finishSignin(e)},function(){n.finishSignin()}):n.finishSignin()},function(t){"api.user.login.not_verified.app_error"===t.id?v.browserHistory.push("/should_verify_email?&email="+encodeURIComponent(e)):"store.sql_user.get_for_login.app_error"===t.id||"ent.ldap.do_login.user_not_registered.app_error"===t.id?n.setState({showMfa:!1,loading:!1,serverError:u.default.createElement(d.FormattedMessage,{id:"login.userNotFound",defaultMessage:"We couldn't find an account matching your login credentials."})}):"api.user.check_user_password.invalid.app_error"===t.id||"ent.ldap.do_login.invalid_password.app_error"===t.id?n.setState({showMfa:!1,loading:!1,serverError:u.default.createElement(d.FormattedMessage,{id:"login.invalidPassword",defaultMessage:"Your password is incorrect."})}):n.setState({showMfa:!1,serverError:t.message,loading:!1})})}},{key:"finishSignin",value:function(e){var t=this.props.experimentalPrimaryTeam,a=b.default.getByName(t),n=new URLSearchParams(this.props.location.search).get("redirect_to");f.loadCurrentLocale(),n&&n.match(/^\/([^/]|$)/)?v.browserHistory.push(n):e?v.browserHistory.push("/"+e.name):a?v.browserHistory.push("/"+a.name+"/channels/"+S.default.DEFAULT_CHANNEL):f.redirectUserToDefaultTeam()}},{key:"handleLoginIdChange",value:function(e){this.setState({loginId:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"createCustomLogin",value:function(){if(this.props.enableCustomBrand){var e=this.props.customBrandText||"",t=M.formatText(e);return u.default.createElement("div",null,u.default.createElement("img",{src:m.Client4.getBrandImageUrl(0)}),u.default.createElement("div",null,(0,_.default)(t,!1,{mentions:!1})))}return null}},{key:"createLoginPlaceholder",value:function(){var e=this.state.ldapEnabled,t=this.state.usernameSigninEnabled,a=[];return this.state.emailSigninEnabled&&a.push(N.localizeMessage("login.email","Email")),t&&a.push(N.localizeMessage("login.username","Username")),e&&(this.props.ldapLoginFieldName?a.push(this.props.ldapLoginFieldName):a.push(N.localizeMessage("login.ldapUsername","AD/LDAP Username"))),a.length>=2?a.slice(0,a.length-1).join(", ")+N.localizeMessage("login.placeholderOr"," or ")+a[a.length-1]:1===a.length?a[0]:""}},{key:"checkSignUpEnabled",value:function(){return this.props.enableSignUpWithEmail||this.props.enableSignUpWithGitLab||this.props.enableSignUpWithOffice365||this.props.enableSignUpWithGoogle||this.props.enableLdap||this.props.enableSaml}},{key:"createLoginOptions",value:function(){var e=new URLSearchParams(this.props.location.search).get("extra"),t="";e&&(e===S.default.SIGNIN_CHANGE?t=u.default.createElement("div",{className:"alert alert-success"},u.default.createElement("i",{className:"fa fa-check",title:N.localizeMessage("generic_icons.success","Success Icon")}),u.default.createElement(d.FormattedMessage,{id:"login.changed",defaultMessage:" Sign-in method changed successfully"})):e===S.default.SIGNIN_VERIFIED?t=u.default.createElement("div",{className:"alert alert-success"},u.default.createElement("i",{className:"fa fa-check",title:N.localizeMessage("generic_icons.success","Success Icon")}),u.default.createElement(d.FormattedMessage,{id:"login.verified",defaultMessage:" Email Verified"})):e===S.default.SESSION_EXPIRED?t=u.default.createElement("div",{className:"alert alert-warning"},u.default.createElement("i",{className:"fa fa-exclamation-triangle",title:N.localizeMessage("generic_icons.warning","Warning Icon")}),u.default.createElement(d.FormattedMessage,{id:"login.session_expired",defaultMessage:" Your session has expired. Please login again."})):e===S.default.PASSWORD_CHANGE&&(t=u.default.createElement("div",{className:"alert alert-success"},u.default.createElement("i",{className:"fa fa-check",title:N.localizeMessage("generic_icons.success","Success Icon")}),u.default.createElement(d.FormattedMessage,{id:"login.passwordChanged",defaultMessage:" Password updated successfully"}))));var a=[],n=this.state.ldapEnabled,s=this.props.enableSignUpWithGitLab,l=this.props.enableSignUpWithGoogle,i=this.props.enableSignUpWithOffice365,r=this.state.samlEnabled,o=this.state.usernameSigninEnabled,f=this.state.emailSigninEnabled;if(f||o||n){var g="";this.state.serverError&&(g=" has-error");var p=u.default.createElement(d.FormattedMessage,{id:"login.signIn",defaultMessage:"Sign in"});this.state.loading&&(p=u.default.createElement("span",null,u.default.createElement("span",{className:"fa fa-refresh icon--rotate",title:N.localizeMessage("generic_icons.loading","Loading Icon")}),u.default.createElement(d.FormattedMessage,{id:"login.signInLoading",defaultMessage:"Signing in..."}))),a.push(u.default.createElement("form",{key:"loginBoxes",onSubmit:this.preSubmit},u.default.createElement("div",{className:"signup__email-container"},u.default.createElement(I.default,{error:this.state.serverError,margin:!0}),u.default.createElement("div",{className:"form-group"+g},u.default.createElement("input",{id:"loginId",className:"form-control",ref:"loginId",name:"loginId",value:this.state.loginId,onChange:this.handleLoginIdChange,placeholder:this.createLoginPlaceholder(),spellCheck:"false",autoCapitalize:"off",autoFocus:"true"})),u.default.createElement("div",{className:"form-group"+g},u.default.createElement("input",{id:"loginPassword",type:"password",className:"form-control",ref:"password",name:"password",value:this.state.password,onChange:this.handlePasswordChange,placeholder:N.localizeMessage("login.password","Password"),spellCheck:"false"})),u.default.createElement("div",{className:"form-group"},u.default.createElement("button",{id:"loginButton",type:"submit",className:"btn btn-primary"},p)))))}return this.props.enableOpenServer&&this.checkSignUpEnabled()&&a.push(u.default.createElement("div",{className:"form-group",key:"signup"},u.default.createElement("span",null,u.default.createElement(d.FormattedMessage,{id:"login.noAccount",defaultMessage:"Don't have an account? "}),u.default.createElement(c.Link,{id:"signup",to:"/signup_user_complete"+this.props.location.search,className:"signup-team-login"},u.default.createElement(d.FormattedMessage,{id:"login.create",defaultMessage:"Create one now"}))))),(o||f)&&a.push(u.default.createElement("div",{key:"forgotPassword",className:"form-group"},u.default.createElement(c.Link,{to:"/reset_password"},u.default.createElement(d.FormattedMessage,{id:"login.forgot",defaultMessage:"I forgot my password"})))),(f||o||n)&&(s||l||r||i)&&(a.push(u.default.createElement("div",{key:"divider",className:"or__container"},u.default.createElement(d.FormattedMessage,{id:"login.or",defaultMessage:"or"}))),a.push(u.default.createElement("h5",{key:"oauthHeader"},u.default.createElement(d.FormattedMessage,{id:"login.signInWith",defaultMessage:"Sign in with:"})))),s&&a.push(u.default.createElement("a",{className:"btn btn-custom-login gitlab",key:"gitlab",href:m.Client4.getOAuthRoute()+"/gitlab/login"+this.props.location.search},u.default.createElement("span",null,u.default.createElement("span",{className:"icon"}),u.default.createElement("span",null,u.default.createElement(d.FormattedMessage,{id:"login.gitlab",defaultMessage:"GitLab"}))))),l&&a.push(u.default.createElement("a",{className:"btn btn-custom-login google",key:"google",href:m.Client4.getOAuthRoute()+"/google/login"+this.props.location.search},u.default.createElement("span",null,u.default.createElement("span",{className:"icon"}),u.default.createElement("span",null,u.default.createElement(d.FormattedMessage,{id:"login.google",defaultMessage:"Google Apps"}))))),i&&a.push(u.default.createElement("a",{className:"btn btn-custom-login office365",key:"office365",href:m.Client4.getOAuthRoute()+"/office365/login"+this.props.location.search},u.default.createElement("span",null,u.default.createElement("span",{className:"icon"}),u.default.createElement("span",null,u.default.createElement(d.FormattedMessage,{id:"login.office365",defaultMessage:"Office 365"}))))),r&&a.push(u.default.createElement("a",{className:"btn btn-custom-login saml",key:"saml",href:m.Client4.getUrl()+"/login/sso/saml"+this.props.location.search},u.default.createElement("span",null,u.default.createElement("span",{className:"icon fa fa-lock fa--margin-top",title:"Saml icon"}),u.default.createElement("span",null,this.props.samlLoginButtonText)))),0===a.length&&a.push(u.default.createElement(I.default,{error:u.default.createElement(d.FormattedMessage,{id:"login.noMethods",defaultMessage:"No sign-in methods are enabled. Please contact your System Administrator."}),margin:!0})),u.default.createElement("div",null,t,a)}},{key:"render",value:function(){var e=this.props,t=e.customDescriptionText,a=e.siteName,n=void 0,s=void 0,l=void 0;return this.state.showMfa?n=u.default.createElement(k.default,{loginId:this.state.loginId,password:this.state.password,submit:this.submit}):(n=this.createLoginOptions(),(s=this.createCustomLogin())&&(l="branded")),u.default.createElement("div",null,u.default.createElement(y.default,null),u.default.createElement("div",{className:"col-sm-12"},u.default.createElement("div",{className:"signup-team__container "+l},u.default.createElement("div",{className:"signup__markdown"},s),u.default.createElement("img",{className:"signup-team-logo",src:w.default}),u.default.createElement("div",{className:"signup__content"},u.default.createElement(L.default,{customDescriptionText:t,siteName:a}),n))))}}]),t}(u.default.Component);t.default=P},809:function(e,t,a){e.exports=a.p+"files/5d6be4015bde2a4e0358c8bc110deadc.png"},882:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(282)),s=c(a(279)),l=c(a(283)),i=c(a(280)),r=c(a(281)),o=c(a(1)),u=c(a(3)),d=a(762);function c(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,s.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,r.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.customDescriptionText,a=e.siteName,n=null;return n=t||u.default.createElement(d.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),u.default.createElement(u.default.Fragment,null,u.default.createElement("h1",null,a),u.default.createElement("h4",{className:"color--light"},n))}}]),t}(u.default.PureComponent);m.propTypes={customDescriptionText:o.default.string,siteName:o.default.string},m.defaultProps={siteName:"Mattermost"},t.default=m}}]);
//# sourceMappingURL=25.daecb7eb4fe1ecde3027.js.map