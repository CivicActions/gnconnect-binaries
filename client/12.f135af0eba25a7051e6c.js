(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1101:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(126)),r=m(a(784)),l=m(a(772)),s=m(a(186)),i=m(a(301)),o=m(a(829)),u=m(a(1031)),d=m(a(128)),c=m(a(292));t.rolesFromMapping=function(e,t){var a=JSON.parse((0,c.default)(t));return function(e){var t=function(){var e=[];return(0,r.default)(v).forEach(function(t){(0,r.default)(t).forEach(function(t){var a=t.map(function(e){return e.roleName});e=e.concat(a)})}),[].concat((0,s.default)(new i.default(e.map(function(e){return e}))))}();(0,d.default)(e).forEach(function(a){t.includes(a)||delete e[a]})}(a),(0,d.default)(v).forEach(function(t){var n=e[t];n&&function(e,t,a){var n=v[e][t];if(void 0===n)throw new Error("Value '"+t+"' not present in MAPPING for key '"+e+"'.");n.forEach(function(e){var t=a[e.roleName];e.shouldHave?function(e,t){t.permissions.includes(e)||t.permissions.push(e)}(e.permission,t):function(e,t){var a=t.permissions.indexOf(e);-1!==a&&t.permissions.splice(a,1)}(e.permission,t)})}(t,n,a)}),(0,u.default)(a).forEach(function(e){var n=(0,o.default)(e,2),r=n[0],l=n[1],u=new i.default(t[r].permissions),d=new i.default(l.permissions),c=[].concat((0,s.default)(d)).filter(function(e){return!u.has(e)});u.size===d.size&&0===c.length&&delete a[r]}),a},t.mappingValueFromRoles=function(e,t){var a=!0,n=!1,r=void 0;try{for(var s,i=(0,l.default)(_(v[e],t));!(a=(s=i.next()).done);a=!0){var o=s.value;if(o.allConditionsAreMet)return o.value}}catch(e){n=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw r}}throw new Error("No matching mapping value found for key '"+e+"' with the given roles.")};var f=a(22);function m(e){return e&&e.__esModule?e:{default:e}}var p=n.default.mark(_),v={enableTeamCreation:{true:[{roleName:"system_user",permission:f.Permissions.CREATE_TEAM,shouldHave:!0}],false:[{roleName:"system_user",permission:f.Permissions.CREATE_TEAM,shouldHave:!1}]},enableOnlyAdminIntegrations:{true:[{roleName:"team_user",permission:f.Permissions.MANAGE_WEBHOOKS,shouldHave:!1},{roleName:"team_user",permission:f.Permissions.MANAGE_SLASH_COMMANDS,shouldHave:!1},{roleName:"system_user",permission:f.Permissions.MANAGE_OAUTH,shouldHave:!1}],false:[{roleName:"team_user",permission:f.Permissions.MANAGE_WEBHOOKS,shouldHave:!0},{roleName:"team_user",permission:f.Permissions.MANAGE_SLASH_COMMANDS,shouldHave:!0},{roleName:"system_user",permission:f.Permissions.MANAGE_OAUTH,shouldHave:!0}]}};function _(e,t){var a,r,l;return n.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:s.t0=n.default.keys(e);case 1:if((s.t1=s.t0()).done){s.next=10;break}if(a=s.t1.value,!e.hasOwnProperty(a)){s.next=8;break}return r=e[a],l=r.some(function(e){var a=t[e.roleName];return e.shouldHave&&!a.permissions.includes(e.permission)||!e.shouldHave&&a.permissions.includes(e.permission)}),s.next=8,{value:a,allConditionsAreMet:!l};case 8:s.next=1;break;case 10:case"end":return s.stop()}},p,this)}},2560:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(784)),r=a(284),l=a(2),s=a(285),i=a(795),o=a(835),u=a(96),d=a(291),c=a(286),f=a(771),m=p(a(2561));function p(e){return e&&e.__esModule?e:{default:e}}t.default=(0,s.withRouter)((0,r.connect)(function(e){var t=(0,u.getConfig)(e),a=(0,f.getCurrentUser)(e),r=(0,n.default)((0,c.getTeamMemberships)(e));return{currentUserRoles:a.roles||"",customDescriptionText:t.CustomDescriptionText,roles:(0,d.getRoles)(e),enableTeamCreation:"true"===t.EnableTeamCreation,isMemberOfTeam:r&&r.length>0,joinableTeams:(0,c.getSortedJoinableTeams)(e,a.locale),siteName:t.SiteName}},function(e){return{actions:(0,l.bindActionCreators)({getTeams:i.getTeams,loadRolesIfNeeded:o.loadRolesIfNeeded},e)}})(m.default))},2561:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=k(a(282)),r=k(a(279)),l=k(a(283)),s=k(a(280)),i=k(a(281)),o=k(a(1)),u=k(a(3)),d=a(762),c=a(285),f=a(22),m=a(773),p=a(831),v=a(1101),_=b(a(290)),h=b(a(763)),g=k(a(809)),E=k(a(874)),M=k(a(805)),y=k(a(781)),N=k(a(855)),T=k(a(882)),C=k(a(2562));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}var A=function(e){function t(e){(0,r.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.loadPoliciesIntoState=function(e){var t="true"===(0,v.mappingValueFromRoles)("enableTeamCreation",e);a.setState({enableTeamCreation:t,loaded:!0})},a.handleTeamClick=function(e){a.setState({loadingTeamId:e.id}),(0,p.addUserToTeamFromInvite)("",e.invite_id,function(){a.props.history.push("/"+e.name+"/channels/town-square")},function(e){a.setState({error:e,loadingTeamId:""})})},a.handleLogoutClick=function(e){e.preventDefault(),(0,m.emitUserLoggedOutEvent)("/login")},a.clearError=function(e){e.preventDefault(),a.setState({error:null})},a.state={loadingTeamId:"",error:null},a}return(0,i.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.actions.getTeams(0,200)}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.actions,a=e.roles;t.loadRolesIfNeeded([f.General.SYSTEM_ADMIN_ROLE,f.General.SYSTEM_USER_ROLE]),a.system_admin&&a.system_user&&this.loadPoliciesIntoState(a)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.state.loaded&&e.roles.system_admin&&e.roles.system_user&&this.loadPoliciesIntoState(e.roles)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUserRoles,n=t.customDescriptionText,r=t.isMemberOfTeam,l=t.joinableTeams,s=t.siteName,i=this.state.enableTeamCreation,o=h.isSystemAdmin(a),m=void 0;if(this.state.loadingTeamId)m=u.default.createElement(y.default,null);else if(this.state.error)m=u.default.createElement("div",{className:"signup__content"},u.default.createElement("div",{className:"form-group has-error"},u.default.createElement("label",{className:"control-label"},this.state.error.message)));else{var p=[];l.forEach(function(t){p.push(u.default.createElement(C.default,{key:"team_"+t.name,team:t,onTeamClick:e.handleTeamClick,loading:e.state.loadingTeamId===t.id}))}),0===p.length&&(i||o)?p=u.default.createElement("div",{className:"signup-team-dir-err"},u.default.createElement("div",null,u.default.createElement(d.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))):0===p.length&&(p=u.default.createElement("div",{className:"signup-team-dir-err"},u.default.createElement("div",null,u.default.createElement(N.default,{permissions:[f.Permissions.CREATE_TEAM]},u.default.createElement(d.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."})),u.default.createElement(N.default,{permissions:[f.Permissions.CREATE_TEAM],invert:!0},u.default.createElement(d.FormattedMessage,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}))))),m=u.default.createElement("div",{className:"signup__content"},u.default.createElement("h4",null,u.default.createElement(d.FormattedMessage,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),u.default.createElement("div",{className:"signup-team-all"},p))}var v=null;o&&!i&&(v=u.default.createElement("div",null,u.default.createElement(d.FormattedMessage,{id:"login.createTeamAdminOnly",defaultMessage:"This option is only available for System Administrators, and does not show up for other users."})));var b=u.default.createElement(N.default,{permissions:[f.Permissions.CREATE_TEAM]},u.default.createElement("div",{className:"margin--extra"},u.default.createElement(c.Link,{to:"/create_team",className:"signup-team-login"},u.default.createElement(d.FormattedMessage,{id:"login.createTeam",defaultMessage:"Create a new team"}))),v),k=void 0;_.isMobileApp()||(k=u.default.createElement(N.default,{permissions:[f.Permissions.MANAGE_SYSTEM]},u.default.createElement("div",{className:"margin--extra hidden-xs"},u.default.createElement(c.Link,{to:"/admin_console",className:"signup-team-login"},u.default.createElement(d.FormattedMessage,{id:"signup_team_system_console",defaultMessage:"Go to System Console"})))));var A=void 0;return A=this.state.error?u.default.createElement(M.default,{onClick:this.clearError}):r?u.default.createElement(M.default,null):u.default.createElement("div",{className:"signup-header"},u.default.createElement("a",{href:"#",onClick:this.handleLogoutClick},u.default.createElement("span",{className:"fa fa-chevron-left",title:h.localizeMessage("generic_icons.logout","Logout Icon")}),u.default.createElement(d.FormattedMessage,{id:"web.header.logout"}))),u.default.createElement("div",null,u.default.createElement(E.default,null),A,u.default.createElement("div",{className:"col-sm-12"},u.default.createElement("div",{className:"signup-team__container"},u.default.createElement("img",{className:"signup-team-logo",src:g.default}),u.default.createElement(T.default,{customDescriptionText:n,siteName:s}),m,b,k)))}}]),t}(u.default.Component);A.propTypes={currentUserRoles:o.default.string,customDescriptionText:o.default.string,isMemberOfTeam:o.default.bool.isRequired,joinableTeams:o.default.array,roles:o.default.object.isRequired,siteName:o.default.string,actions:o.default.shape({getTeams:o.default.func.isRequired,loadRolesIfNeeded:o.default.func.isRequired}).isRequired},t.default=A},2562:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(282)),r=m(a(279)),l=m(a(283)),s=m(a(280)),i=m(a(281)),o=m(a(1)),u=m(a(3)),d=a(767),c=m(a(2563)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763));function m(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){var e,a,l,i;(0,r.default)(this,t);for(var o=arguments.length,u=Array(o),d=0;d<o;d++)u[d]=arguments[d];return a=l=(0,s.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(u))),l.handleTeamClick=function(e){e.preventDefault(),l.props.onTeamClick(l.props.team)},i=a,(0,s.default)(l,i)}return(0,i.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=void 0;e=this.props.loading?u.default.createElement("span",{className:"fa fa-refresh fa-spin right signup-team__icon",title:f.localizeMessage("generic_icons.loading","Loading Icon")}):u.default.createElement("span",{className:"fa fa-angle-right right signup-team__icon",title:f.localizeMessage("select_team.join.icon","Join Team Icon")});var t="",a="";return this.props.team.description&&(t=u.default.createElement(d.Tooltip,{id:"team-description__tooltip"},this.props.team.description),a=u.default.createElement(d.OverlayTrigger,{trigger:["hover","focus","click"],delayShow:1e3,placement:"top",overlay:t,ref:"descriptionOverlay",rootClose:!0,container:this},u.default.createElement(c.default,{className:"icon icon--info"}))),u.default.createElement("div",{className:"signup-team-dir"},a,u.default.createElement("a",{href:"#",id:f.createSafeId(this.props.team.display_name),onClick:this.handleTeamClick},u.default.createElement("span",{className:"signup-team-dir__name"},this.props.team.display_name),e))}}]),t}(u.default.PureComponent);p.propTypes={team:o.default.object.isRequired,onTeamClick:o.default.func.isRequired,loading:o.default.bool.isRequired},t.default=p},2563:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(282)),r=d(a(279)),l=d(a(283)),s=d(a(280)),i=d(a(281)),o=d(a(3)),u=a(763);function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return o.default.createElement("span",this.props,o.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:f,role:"icon","aria-label":(0,u.localizeMessage)("generic_icons.info","Info Icon")},o.default.createElement("g",{transform:"matrix(1.17647,0,0,1.17647,-1.55431e-15,-1.00573e-14)"},o.default.createElement("path",{d:"M8.5,0C3.797,0 0,3.797 0,8.5C0,13.203 3.797,17 8.5,17C13.203,17 17,13.203 17,8.5C17,3.797 13.203,0 8.5,0ZM10,8.5C10,7.672 9.328,7 8.5,7C7.672,7 7,7.672 7,8.5L7,12.45C7,13.278 7.672,13.95 8.5,13.95C9.328,13.95 10,13.278 10,12.45L10,8.5ZM8.5,3C9.328,3 10,3.672 10,4.5C10,5.328 9.328,6 8.5,6C7.672,6 7,5.328 7,4.5C7,3.672 7.672,3 8.5,3Z"}))))}}]),t}(o.default.PureComponent);t.default=c;var f={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421}},805:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(282)),r=m(a(279)),l=m(a(283)),s=m(a(280)),i=m(a(281)),o=m(a(1)),u=m(a(3)),d=a(762),c=a(285),f=a(763);function m(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"signup-header"},u.default.createElement(c.Link,{onClick:this.props.onClick,to:this.props.url},u.default.createElement("span",{className:"fa fa-chevron-left",title:(0,f.localizeMessage)("generic_icons.back","Back Icon")}),u.default.createElement(d.FormattedMessage,{id:"web.header.back",defaultMessage:"Back"})))}}]),t}(u.default.PureComponent);p.propTypes={url:o.default.string,onClick:o.default.func},p.defaultProps={url:"/"},t.default=p},809:function(e,t,a){e.exports=a.p+"files/5d6be4015bde2a4e0358c8bc110deadc.png"},882:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(282)),r=c(a(279)),l=c(a(283)),s=c(a(280)),i=c(a(281)),o=c(a(1)),u=c(a(3)),d=a(762);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.customDescriptionText,a=e.siteName,n=null;return n=t||u.default.createElement(d.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),u.default.createElement(u.default.Fragment,null,u.default.createElement("h1",null,a),u.default.createElement("h4",{className:"color--light"},n))}}]),t}(u.default.PureComponent);f.propTypes={customDescriptionText:o.default.string,siteName:o.default.string},f.defaultProps={siteName:"Mattermost"},t.default=f}}]);
//# sourceMappingURL=12.f135af0eba25a7051e6c.js.map