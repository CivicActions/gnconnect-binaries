(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1035:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedTimezones=function(){return(0,s.getSupportedTimezones)(n.default.getState())},t.getBrowserTimezone=function(){return i.default.tz.guess()};var s=a(96),i=l(a(1271)),n=l(a(289));function l(e){return e&&e.__esModule?e:{default:e}}},1140:function(e,t,a){var s={"./af":894,"./af.js":894,"./ar":895,"./ar-dz":896,"./ar-dz.js":896,"./ar-kw":897,"./ar-kw.js":897,"./ar-ly":898,"./ar-ly.js":898,"./ar-ma":899,"./ar-ma.js":899,"./ar-sa":900,"./ar-sa.js":900,"./ar-tn":901,"./ar-tn.js":901,"./ar.js":895,"./az":902,"./az.js":902,"./be":903,"./be.js":903,"./bg":904,"./bg.js":904,"./bm":905,"./bm.js":905,"./bn":906,"./bn.js":906,"./bo":907,"./bo.js":907,"./br":908,"./br.js":908,"./bs":909,"./bs.js":909,"./ca":910,"./ca.js":910,"./cs":911,"./cs.js":911,"./cv":912,"./cv.js":912,"./cy":913,"./cy.js":913,"./da":914,"./da.js":914,"./de":915,"./de-at":916,"./de-at.js":916,"./de-ch":917,"./de-ch.js":917,"./de.js":915,"./dv":918,"./dv.js":918,"./el":919,"./el.js":919,"./en-au":920,"./en-au.js":920,"./en-ca":921,"./en-ca.js":921,"./en-gb":922,"./en-gb.js":922,"./en-ie":923,"./en-ie.js":923,"./en-il":924,"./en-il.js":924,"./en-nz":925,"./en-nz.js":925,"./eo":926,"./eo.js":926,"./es":927,"./es-do":928,"./es-do.js":928,"./es-us":929,"./es-us.js":929,"./es.js":927,"./et":930,"./et.js":930,"./eu":931,"./eu.js":931,"./fa":932,"./fa.js":932,"./fi":933,"./fi.js":933,"./fo":934,"./fo.js":934,"./fr":935,"./fr-ca":936,"./fr-ca.js":936,"./fr-ch":937,"./fr-ch.js":937,"./fr.js":935,"./fy":938,"./fy.js":938,"./gd":939,"./gd.js":939,"./gl":940,"./gl.js":940,"./gom-latn":941,"./gom-latn.js":941,"./gu":942,"./gu.js":942,"./he":943,"./he.js":943,"./hi":944,"./hi.js":944,"./hr":945,"./hr.js":945,"./hu":946,"./hu.js":946,"./hy-am":947,"./hy-am.js":947,"./id":948,"./id.js":948,"./is":949,"./is.js":949,"./it":950,"./it.js":950,"./ja":951,"./ja.js":951,"./jv":952,"./jv.js":952,"./ka":953,"./ka.js":953,"./kk":954,"./kk.js":954,"./km":955,"./km.js":955,"./kn":956,"./kn.js":956,"./ko":957,"./ko.js":957,"./ky":958,"./ky.js":958,"./lb":959,"./lb.js":959,"./lo":960,"./lo.js":960,"./lt":961,"./lt.js":961,"./lv":962,"./lv.js":962,"./me":963,"./me.js":963,"./mi":964,"./mi.js":964,"./mk":965,"./mk.js":965,"./ml":966,"./ml.js":966,"./mn":967,"./mn.js":967,"./mr":968,"./mr.js":968,"./ms":969,"./ms-my":970,"./ms-my.js":970,"./ms.js":969,"./mt":971,"./mt.js":971,"./my":972,"./my.js":972,"./nb":973,"./nb.js":973,"./ne":974,"./ne.js":974,"./nl":975,"./nl-be":976,"./nl-be.js":976,"./nl.js":975,"./nn":977,"./nn.js":977,"./pa-in":978,"./pa-in.js":978,"./pl":979,"./pl.js":979,"./pt":980,"./pt-br":981,"./pt-br.js":981,"./pt.js":980,"./ro":982,"./ro.js":982,"./ru":983,"./ru.js":983,"./sd":984,"./sd.js":984,"./se":985,"./se.js":985,"./si":986,"./si.js":986,"./sk":987,"./sk.js":987,"./sl":988,"./sl.js":988,"./sq":989,"./sq.js":989,"./sr":990,"./sr-cyrl":991,"./sr-cyrl.js":991,"./sr.js":990,"./ss":992,"./ss.js":992,"./sv":993,"./sv.js":993,"./sw":994,"./sw.js":994,"./ta":995,"./ta.js":995,"./te":996,"./te.js":996,"./tet":997,"./tet.js":997,"./tg":998,"./tg.js":998,"./th":999,"./th.js":999,"./tl-ph":1e3,"./tl-ph.js":1e3,"./tlh":1001,"./tlh.js":1001,"./tr":1002,"./tr.js":1002,"./tzl":1003,"./tzl.js":1003,"./tzm":1004,"./tzm-latn":1005,"./tzm-latn.js":1005,"./tzm.js":1004,"./ug-cn":1006,"./ug-cn.js":1006,"./uk":1007,"./uk.js":1007,"./ur":1008,"./ur.js":1008,"./uz":1009,"./uz-latn":1010,"./uz-latn.js":1010,"./uz.js":1009,"./vi":1011,"./vi.js":1011,"./x-pseudo":1012,"./x-pseudo.js":1012,"./yo":1013,"./yo.js":1013,"./zh-cn":1014,"./zh-cn.js":1014,"./zh-hk":1015,"./zh-hk.js":1015,"./zh-tw":1016,"./zh-tw.js":1016};function i(e){var t=n(e);return a(t)}function n(e){var t=s[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id=1140},1175:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatAuditInfo=f;var s=d(a(1)),i=d(a(3)),n=a(762),l=d(a(782)),r=d(a(769)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763));function d(e){return e&&e.__esModule?e:{default:e}}var u=(0,n.defineMessages)({sessionRevoked:{id:"audit_table.sessionRevoked",defaultMessage:"The session with id {sessionId} was revoked"},channelCreated:{id:"audit_table.channelCreated",defaultMessage:"Created the {channelName} channel"},establishedDM:{id:"audit_table.establishedDM",defaultMessage:"Established a direct message channel with {username}"},nameUpdated:{id:"audit_table.nameUpdated",defaultMessage:"Updated the {channelName} channel name"},headerUpdated:{id:"audit_table.headerUpdated",defaultMessage:"Updated the {channelName} channel header"},channelDeleted:{id:"audit_table.channelDeleted",defaultMessage:"Archived the channel with the URL {url}"},userAdded:{id:"audit_table.userAdded",defaultMessage:"Added {username} to the {channelName} channel"},userRemoved:{id:"audit_table.userRemoved",defaultMessage:"Removed {username} to the {channelName} channel"},attemptedRegisterApp:{id:"audit_table.attemptedRegisterApp",defaultMessage:"Attempted to register a new OAuth Application with ID {id}"},attemptedAllowOAuthAccess:{id:"audit_table.attemptedAllowOAuthAccess",defaultMessage:"Attempted to allow a new OAuth service access"},successfullOAuthAccess:{id:"audit_table.successfullOAuthAccess",defaultMessage:"Successfully gave a new OAuth service access"},failedOAuthAccess:{id:"audit_table.failedOAuthAccess",defaultMessage:"Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback"},attemptedOAuthToken:{id:"audit_table.attemptedOAuthToken",defaultMessage:"Attempted to get an OAuth access token"},successfullOAuthToken:{id:"audit_table.successfullOAuthToken",defaultMessage:"Successfully added a new OAuth service"},oauthTokenFailed:{id:"audit_table.oauthTokenFailed",defaultMessage:"Failed to get an OAuth access token - {token}"},attemptedLogin:{id:"audit_table.attemptedLogin",defaultMessage:"Attempted to login"},authenticated:{id:"audit_table.authenticated",defauleMessage:"Successfully authenticated"},successfullLogin:{id:"audit_table.successfullLogin",defaultMessage:"Successfully logged in"},failedLogin:{id:"audit_table.failedLogin",defaultMessage:"FAILED login attempt"},updatePicture:{id:"audit_table.updatePicture",defaultMessage:"Updated your profile picture"},updateGeneral:{id:"audit_table.updateGeneral",defaultMessage:"Updated the general settings of your account"},attemptedPassword:{id:"audit_table.attemptedPassword",defaultMessage:"Attempted to change password"},successfullPassword:{id:"audit_table.successfullPassword",defaultMessage:"Successfully changed password"},failedPassword:{id:"audit_table.failedPassword",defaultMessage:"Failed to change password - tried to update user password who was logged in through OAuth"},updatedRol:{id:"audit_table.updatedRol",defaultMessage:"Updated user role(s) to "},member:{id:"audit_table.member",defaultMessage:"member"},accountActive:{id:"audit_table.accountActive",defaultMessage:"Account activated"},accountInactive:{id:"audit_table.accountInactive",defaultMessage:"Account deactivated"},by:{id:"audit_table.by",defaultMessage:" by {username}"},byAdmin:{id:"audit_table.byAdmin",defaultMessage:" by an admin"},sentEmail:{id:"audit_table.sentEmail",defaultMessage:"Sent an email to {email} to reset your password"},attemptedReset:{id:"audit_table.attemptedReset",defaultMessage:"Attempted to reset password"},successfullReset:{id:"audit_table.successfullReset",defaultMessage:"Successfully reset password"},updateGlobalNotifications:{id:"audit_table.updateGlobalNotifications",defaultMessage:"Updated your global notification settings"},attemptedWebhookCreate:{id:"audit_table.attemptedWebhookCreate",defaultMessage:"Attempted to create a webhook"},succcessfullWebhookCreate:{id:"audit_table.successfullWebhookCreate",defaultMessage:"Successfully created a webhook"},failedWebhookCreate:{id:"audit_table.failedWebhookCreate",defaultMessage:"Failed to create a webhook - bad channel permissions"},attemptedWebhookDelete:{id:"audit_table.attemptedWebhookDelete",defaultMessage:"Attempted to delete a webhook"},successfullWebhookDelete:{id:"audit_table.successfullWebhookDelete",defaultMessage:"Successfully deleted a webhook"},failedWebhookDelete:{id:"audit_table.failedWebhookDelete",defaultMessage:"Failed to delete a webhook - inappropriate conditions"},logout:{id:"audit_table.logout",defaultMessage:"Logged out of your account"},verified:{id:"audit_table.verified",defaultMessage:"Successfully verified your email address"},revokedAll:{id:"audit_table.revokedAll",defaultMessage:"Revoked all current sessions for the team"},loginAttempt:{id:"audit_table.loginAttempt",defaultMessage:" (Login attempt)"},loginFailure:{id:"audit_table.loginFailure",defaultMessage:" (Login failure)"},attemptedLicenseAdd:{id:"audit_table.attemptedLicenseAdd",defaultMessage:"Attempted to add new license"},successfullLicenseAdd:{id:"audit_table.successfullLicenseAdd",defaultMessage:"Successfully added new license"},failedExpiredLicenseAdd:{id:"audit_table.failedExpiredLicenseAdd",defaultMessage:"Failed to add a new license as it has either expired or not yet been started"},failedInvalidLicenseAdd:{id:"audit_table.failedInvalidLicenseAdd",defaultMessage:"Failed to add an invalid license"},licenseRemoved:{id:"audit_table.licenseRemoved",defaultMessage:"Successfully removed a license"}});function c(e){for(var t=[],a=e.intl.formatMessage,s=0;s<e.audits.length;s++){var l=e.audits[s],o=f(l,a),d=void 0;if(e.showUserId){var u=r.default.getProfile(o.userId);d=u?i.default.createElement("td",{className:"word-break--all"},u.email):i.default.createElement("td",{className:"word-break--all"},o.userId)}var c=void 0;e.showIp&&(c=i.default.createElement("td",{className:"whitespace--nowrap word-break--all"},o.ip));var m=void 0;e.showSession&&(m=i.default.createElement("td",{className:"whitespace--nowrap word-break--all"},o.sessionId));var p="";-1!==o.desc.toLowerCase().indexOf("fail")&&(p=" color--error"),t[s]=i.default.createElement("tr",{key:l.id},i.default.createElement("td",{className:"whitespace--nowrap word-break--all"},o.timestamp),d,i.default.createElement("td",{className:"word-break--all"+p},o.desc),c,m)}var g=void 0;e.showUserId&&(g=i.default.createElement("th",null,i.default.createElement(n.FormattedMessage,{id:"audit_table.userId",defaultMessage:"User ID"})));var h=void 0;e.showIp&&(h=i.default.createElement("th",null,i.default.createElement(n.FormattedMessage,{id:"audit_table.ip",defaultMessage:"IP Address"})));var v=void 0;return e.showSession&&(v=i.default.createElement("th",null,i.default.createElement(n.FormattedMessage,{id:"audit_table.session",defaultMessage:"Session ID"}))),i.default.createElement("table",{className:"table"},i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("th",null,i.default.createElement(n.FormattedMessage,{id:"audit_table.timestamp",defaultMessage:"Timestamp"})),g,i.default.createElement("th",null,i.default.createElement(n.FormattedMessage,{id:"audit_table.action",defaultMessage:"Action"})),h,v)),i.default.createElement("tbody",null,t))}function f(e,t){var a=e.action.replace(/\/api\/v[1-9]/,""),s="";if(0===a.indexOf("/channels")){var d=e.extra_info.split(" "),c=d[0].split("="),f="",m=void 0,p="";switch(c.indexOf("name")>=0&&(f=c[c.indexOf("name")+1],p=(m=l.default.getByName(f))?m.display_name:f),a){case"/channels/create":s=t(u.channelCreated,{channelName:p});break;case"/channels/create_direct":s=t(u.establishedDM,{username:o.getDirectTeammate(m.id).username});break;case"/channels/update":s=t(u.nameUpdated,{channelName:p});break;case"/channels/update_desc":case"/channels/update_header":s=t(u.headerUpdated,{channelName:p});break;default:var g=[],h="",v="";if(d[1]&&(g=d[1].split("=")).indexOf("user_id")>=0){h=g[g.indexOf("user_id")+1];var E=r.default.getProfile(h);E&&(v=E.username)}/\/channels\/[A-Za-z0-9]+\/delete/.test(a)?s=t(u.channelDeleted,{url:f}):/\/channels\/[A-Za-z0-9]+\/add/.test(a)?s=t(u.userAdded,{username:v,channelName:p}):/\/channels\/[A-Za-z0-9]+\/remove/.test(a)&&(s=t(u.userRemoved,{username:v,channelName:p}))}}else if(0===a.indexOf("/oauth")){var b=e.extra_info.split(" ");switch(a){case"/oauth/register":var S=b[0].split("=");"client_id"===S[0]&&(s=t(u.attemptedRegisterApp,{id:S[1]}));break;case"/oauth/allow":"attempt"===b[0]?s=t(u.attemptedAllowOAuthAccess):"success"===b[0]?s=t(u.successfullOAuthAccess):"fail - redirect_uri did not match registered callback"===b[0]&&(s=t(u.failedOAuthAccess));break;case"/oauth/access_token":if("attempt"===b[0])s=t(u.attemptedOAuthToken);else if("success"===b[0])s=t(u.successfullOAuthToken);else{var M=b[0].split("-");"fail"===M[0].trim()&&M[1]&&(s=t(M,{token:M[1].trim()}))}}}else if(0===a.indexOf("/users")){var y=e.extra_info.split(" ");switch(a){case"/users/login":"attempt"===y[0]?s=t(u.attemptedLogin):"success"===y[0]?s=t(u.successfullLogin):"authenticated"===y[0]?s=t(u.authenticated):y[0]&&(s=t(u.failedLogin));break;case"/users/revoke_session":s=t(u.sessionRevoked,{sessionId:y[0].split("=")[1]});break;case"/users/newimage":s=t(u.updatePicture);break;case"/users/update":s=t(u.updateGeneral);break;case"/users/newpassword":"attempted"===y[0]?s=t(u.attemptedPassword):"completed"===y[0]?s=t(u.successfullPassword):"failed - tried to update user password who was logged in through oauth"===y[0]&&(s=t(u.failedPassword));break;case"/users/update_roles":var _=y[0].split("=")[1];s=t(u.updatedRol),_.trim()?s+=_:s+=t(u.member);break;case"/users/update_active":var k=y[0].split("=")[0],N=y[0].split("=")[1];if("active"===k){"true"===N?s=t(u.accountActive):"false"===N&&(s=t(u.accountInactive));var C=y[1].split("=");if("session_user"===C[0]){var A=r.default.getProfile(C[1]),T=r.default.getCurrentUser();T&&A&&o.isSystemAdmin(T.roles)?s+=t(u.by,{username:A.username}):T&&A&&(s+=t(u.byAdmin))}}else"session_id"===k&&(s=t(u.sessionRevoked,{sessionId:N}));break;case"/users/send_password_reset":s=t(u.sentEmail,{email:y[0].split("=")[1]});break;case"/users/reset_password":"attempt"===y[0]?s=t(u.attemptedReset):"success"===y[0]&&(s=t(u.successfullReset));break;case"/users/update_notify":s=t(u.updateGlobalNotifications)}}else if(0===a.indexOf("/hooks")){var w=e.extra_info;switch(a){case"/hooks/incoming/create":"attempt"===w?s=t(u.attemptedWebhookCreate):"success"===w?s=t(u.succcessfullWebhookCreate):"fail - bad channel permissions"===w&&(s=t(u.failedWebhookCreate));break;case"/hooks/incoming/delete":"attempt"===w?s=t(u.attemptedWebhookDelete):"success"===w?s=t(u.successfullWebhookDelete):"fail - inappropriate conditions"===w&&(s=t(u.failedWebhookDelete))}}else if(0===a.indexOf("/license")){var F=e.extra_info;switch(a){case"/license/add":"attempt"===F?s=t(u.attemptedLicenseAdd):"success"===F?s=t(u.successfullLicenseAdd):"failed - expired or non-started license"===F?s=t(u.failedExpiredLicenseAdd):"failed - invalid license"===F&&(s=t(u.failedInvalidLicenseAdd));break;case"/license/remove":s=t(u.licenseRemoved)}}else if(0===a.indexOf("/admin/download_compliance_report"))s=o.toTitleCase(e.extra_info);else switch(a){case"/logout":s=t(u.logout);break;case"/verify_email":s=t(u.verified)}if(!s)if(e.extra_info.indexOf("revoked_all=")>=0)s=t(u.revokedAll);else{var I="";a&&-1!==a.lastIndexOf("/")&&(I=a.substring(a.lastIndexOf("/")+1).replace("_"," "),I=o.toTitleCase(I));var L="";e.extra_info&&-1!==(L=e.extra_info).indexOf("=")&&(L=L.substring(L.indexOf("=")+1)),s=I+" "+L}var O=new Date(e.create_at),R={};return R.timestamp=i.default.createElement("div",null,i.default.createElement("div",null,i.default.createElement(n.FormattedDate,{value:O,day:"2-digit",month:"short",year:"numeric"})),i.default.createElement("div",null,i.default.createElement(n.FormattedTime,{value:O,hour:"2-digit",minute:"2-digit"}))),R.userId=e.user_id,R.desc=s,R.ip=e.ip_address,R.sessionId=e.session_id,R}c.propTypes={intl:n.intlShape.isRequired,audits:s.default.array.isRequired,showUserId:s.default.bool,showIp:s.default.bool,showSession:s.default.bool},t.default=(0,n.injectIntl)(c)},1967:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=E(a(282)),i=E(a(279)),n=E(a(283)),l=E(a(280)),r=E(a(281)),o=E(a(1)),d=E(a(3)),u=E(a(769)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763)),f=E(a(1968)),m=E(a(1970)),p=E(a(2131)),g=E(a(2133)),h=E(a(2138)),v=E(a(2147));function E(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.onListenerChange=function(){var e=u.default.getCurrentUser();c.areObjectsEqual(a.state.user,e)||a.setState({user:e})},a.state={user:u.default.getCurrentUser()},a}return(0,r.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){u.default.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){u.default.removeChangeListener(this.onListenerChange)}},{key:"render",value:function(){return"general"===this.props.activeTab?d.default.createElement("div",null,d.default.createElement(p.default,{user:this.state.user,activeSection:this.props.activeSection,prevActiveSection:this.props.prevActiveSection,updateSection:this.props.updateSection,updateTab:this.props.updateTab,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"security"===this.props.activeTab?d.default.createElement("div",null,d.default.createElement(h.default,{user:this.state.user,activeSection:this.props.activeSection,prevActiveSection:this.props.prevActiveSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal,setRequireConfirm:this.props.setRequireConfirm})):"notifications"===this.props.activeTab?d.default.createElement("div",null,d.default.createElement(g.default,{user:this.state.user,activeSection:this.props.activeSection,prevActiveSection:this.props.prevActiveSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"display"===this.props.activeTab?d.default.createElement("div",null,d.default.createElement(m.default,{user:this.state.user,activeSection:this.props.activeSection,prevActiveSection:this.props.prevActiveSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal,setEnforceFocus:this.props.setEnforceFocus,setRequireConfirm:this.props.setRequireConfirm})):"sidebar"===this.props.activeTab?d.default.createElement("div",null,d.default.createElement(v.default,{activeSection:this.props.activeSection,prevActiveSection:this.props.prevActiveSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"advanced"===this.props.activeTab?d.default.createElement("div",null,d.default.createElement(f.default,{activeSection:this.props.activeSection,prevActiveSection:this.props.prevActiveSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):d.default.createElement("div",null)}}]),t}(d.default.Component);t.default=b,b.propTypes={activeTab:o.default.string,activeSection:o.default.string,prevActiveSection:o.default.string,updateSection:o.default.func,updateTab:o.default.func,closeModal:o.default.func.isRequired,collapseModal:o.default.func.isRequired,setEnforceFocus:o.default.func.isRequired,setRequireConfirm:o.default.func.isRequired}},1968:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(284),i=a(96),n=function(e){return e&&e.__esModule?e:{default:e}}(a(1969));t.default=(0,s.connect)(function(e){var t=(0,i.getConfig)(e),a=(0,i.getLicense)(e);return{enablePreviewFeatures:"true"===t.EnablePreviewFeatures,buildEnterpriseReady:"true"===t.BuildEnterpriseReady,isLicensed:a&&"true"===a.IsLicensed}})(n.default)},1969:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=M(a(829)),i=M(a(772)),n=M(a(128)),l=M(a(282)),r=M(a(279)),o=M(a(283)),d=M(a(280)),u=M(a(281)),c=M(a(1)),f=M(a(3)),m=a(762),p=a(777),g=M(a(807)),h=M(a(769)),v=M(a(25)),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763)),b=M(a(812)),S=M(a(825));function M(e){return e&&e.__esModule?e:{default:e}}var y=v.default.PRE_RELEASE_FEATURES,_=function(e){function t(e){(0,r.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.getStateFromStores=function(){var e=g.default.getCategory(v.default.Preferences.CATEGORY_ADVANCED_SETTINGS),t={send_on_ctrl_enter:g.default.get(v.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter","false"),formatting:g.default.get(v.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"formatting","true"),join_leave:g.default.get(v.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"join_leave","true")},l=(0,n.default)(y),r=0,o=!0,d=!1,u=void 0;try{for(var c,f=(0,i.default)(e);!(o=(c=f.next()).done);o=!0){var m=(0,s.default)(c.value,2),p=m[0],h=m[1],E=!0,b=!1,S=void 0;try{for(var M,_=(0,i.default)(l);!(E=(M=_.next()).done);E=!0){var k=M.value,N=y[k];p===v.default.FeatureTogglePrefix+N.label&&(t[p]=h,"true"===h&&(r+=1))}}catch(e){b=!0,S=e}finally{try{!E&&_.return&&_.return()}finally{if(b)throw S}}}}catch(e){d=!0,u=e}finally{try{!o&&f.return&&f.return()}finally{if(d)throw u}}var C=a.props.enablePreviewFeatures;return{preReleaseFeatures:y,settings:t,preReleaseFeaturesKeys:l,enabledFeatures:r,isSaving:!1,previewFeaturesEnabled:C}},a.updateSetting=function(e,t){var s=a.state.settings;s[e]=t,a.setState(s)},a.toggleFeature=function(e,t){var s=a.state.settings;s[v.default.FeatureTogglePrefix+e]=String(t);var i=0;(0,n.default)(a.state.settings).forEach(function(e){0===e.lastIndexOf(v.default.FeatureTogglePrefix)&&"true"===a.state.settings[e]&&i++}),a.setState({settings:s,enabledFeatures:i})},a.saveEnabledFeatures=function(){var e=[];(0,n.default)(a.state.settings).forEach(function(t){0===t.lastIndexOf(v.default.FeatureTogglePrefix)&&e.push(t)}),a.handleSubmit(e)},a.handleSubmit=function(e){var t=[],s=h.default.getCurrentId();(Array.isArray(e)?e:[e]).forEach(function(e){t.push({user_id:s,category:v.default.Preferences.CATEGORY_ADVANCED_SETTINGS,name:e,value:a.state.settings[e]})}),a.setState({isSaving:!0}),(0,p.savePreferences)(t,function(){a.handleUpdateSection("")})},a.handleUpdateSection=function(e){e||a.setState(a.getStateFromStores()),a.setState({isSaving:!1}),a.props.updateSection(e)},a.renderFormattingSection=function(){return"formatting"===a.props.activeSection?f.default.createElement(b.default,{title:f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.formattingTitle",defaultMessage:"Enable Post Formatting"}),inputs:[f.default.createElement("div",{key:"formattingSetting"},f.default.createElement("div",{className:"radio"},f.default.createElement("label",null,f.default.createElement("input",{id:"postFormattingOn",type:"radio",name:"formatting",checked:"false"!==a.state.settings.formatting,onChange:a.updateSetting.bind(a,"formatting","true")}),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.on",defaultMessage:"On"})),f.default.createElement("br",null)),f.default.createElement("div",{className:"radio"},f.default.createElement("label",null,f.default.createElement("input",{id:"postFormattingOff",type:"radio",name:"formatting",checked:"false"===a.state.settings.formatting,onChange:a.updateSetting.bind(a,"formatting","false")}),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.off",defaultMessage:"Off"})),f.default.createElement("br",null)),f.default.createElement("div",null,f.default.createElement("br",null),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.formattingDesc",defaultMessage:"If enabled, posts will be formatted to create links, show emoji, style the text, and add line breaks. By default, this setting is enabled. Changing this setting requires the page to be refreshed."})))],setting:"formatting",submit:a.handleSubmit,saving:a.state.isSaving,server_error:a.state.serverError,updateSection:a.handleUpdateSection}):f.default.createElement(S.default,{title:f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.formattingTitle",defaultMessage:"Enable Post Formatting"}),describe:a.renderOnOffLabel(a.state.settings.formatting),focused:a.props.prevActiveSection===a.prevSections.formatting,section:"formatting",updateSection:a.handleUpdateSection})},a.renderJoinLeaveSection=function(){return a.props.buildEnterpriseReady&&a.props.isLicensed?"join_leave"===a.props.activeSection?f.default.createElement(b.default,{title:f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.joinLeaveTitle",defaultMessage:"Enable Join/Leave Messages"}),inputs:[f.default.createElement("div",{key:"joinLeaveSetting"},f.default.createElement("div",{className:"radio"},f.default.createElement("label",null,f.default.createElement("input",{id:"joinLeaveOn",type:"radio",name:"join_leave",checked:"false"!==a.state.settings.join_leave,onChange:a.updateSetting.bind(a,"join_leave","true")}),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.on",defaultMessage:"On"})),f.default.createElement("br",null)),f.default.createElement("div",{className:"radio"},f.default.createElement("label",null,f.default.createElement("input",{id:"joinLeaveOff",type:"radio",name:"join_leave",checked:"false"===a.state.settings.join_leave,onChange:a.updateSetting.bind(a,"join_leave","false")}),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.off",defaultMessage:"Off"})),f.default.createElement("br",null)),f.default.createElement("div",null,f.default.createElement("br",null),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.joinLeaveDesc",defaultMessage:'When "On", System Messages saying a user has joined or left a channel will be visible. When "Off", the System Messages about joining or leaving a channel will be hidden. A message will still show up when you are added to a channel, so you can receive a notification.'})))],setting:"join_leave",submit:a.handleSubmit,saving:a.state.isSaving,server_error:a.state.serverError,updateSection:a.handleUpdateSection}):f.default.createElement(S.default,{title:f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.joinLeaveTitle",defaultMessage:"Enable Join/Leave Messages"}),describe:a.renderOnOffLabel(a.state.settings.join_leave),focused:a.props.prevActiveSection===a.prevSections.join_leave,section:"join_leave",updateSection:a.handleUpdateSection}):null},a.state=a.getStateFromStores(),a.prevSections={advancedCtrlSend:"dummySectionName",formatting:"advancedCtrlSend",join_leave:"formatting",advancedPreviewFeatures:"join_leave"},a}return(0,u.default)(t,e),(0,o.default)(t,[{key:"renderOnOffLabel",value:function(e){return"false"===e?f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.off",defaultMessage:"Off"}):f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.on",defaultMessage:"On"})}},{key:"renderFeatureLabel",value:function(e){switch(e){case"MARKDOWN_PREVIEW":return f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.markdown_preview",defaultMessage:"Show markdown preview option in message input box"});default:return null}}},{key:"render",value:function(){var e=this,t=this.state.serverError||null,a=void 0;if("advancedCtrlSend"===this.props.activeSection){var s=["true"===this.state.settings.send_on_ctrl_enter,"false"===this.state.settings.send_on_ctrl_enter],i=[f.default.createElement("div",{key:"ctrlSendSetting"},f.default.createElement("div",{className:"radio"},f.default.createElement("label",null,f.default.createElement("input",{id:"ctrlSendOn",type:"radio",name:"sendOnCtrlEnter",checked:s[0],onChange:this.updateSetting.bind(this,"send_on_ctrl_enter","true")}),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.on",defaultMessage:"On"})),f.default.createElement("br",null)),f.default.createElement("div",{className:"radio"},f.default.createElement("label",null,f.default.createElement("input",{id:"ctrlSendOff",type:"radio",name:"sendOnCtrlEnter",checked:s[1],onChange:this.updateSetting.bind(this,"send_on_ctrl_enter","false")}),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.off",defaultMessage:"Off"})),f.default.createElement("br",null)),f.default.createElement("div",null,f.default.createElement("br",null),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.sendDesc",defaultMessage:"If enabled ENTER inserts a new line and CTRL+ENTER submits the message."})))];a=f.default.createElement(b.default,{title:f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.sendTitle",defaultMessage:"Send messages on CTRL+ENTER"}),inputs:i,setting:"send_on_ctrl_enter",submit:this.handleSubmit,saving:this.state.isSaving,server_error:t,updateSection:this.handleUpdateSection})}else a=f.default.createElement(S.default,{title:f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.sendTitle",defaultMessage:"Send messages on CTRL+ENTER"}),describe:this.renderOnOffLabel(this.state.settings.send_on_ctrl_enter),focused:this.props.prevActiveSection===this.prevSections.advancedCtrlSend,section:"advancedCtrlSend",updateSection:this.handleUpdateSection});var n=this.renderFormattingSection(),l=null;n&&(l=f.default.createElement("div",{className:"divider-light"}));var r=this.renderJoinLeaveSection(),o=null;r?(o=f.default.createElement("div",{className:"divider-light"}),this.prevSections.advancedPreviewFeatures="join_leave"):this.prevSections.advancedPreviewFeatures=this.prevSections.join_leave;var d=void 0,u=void 0;if(this.state.previewFeaturesEnabled&&this.state.preReleaseFeaturesKeys.length>0)if(u=f.default.createElement("div",{className:"divider-light"}),"advancedPreviewFeatures"===this.props.activeSection){var c=[];this.state.preReleaseFeaturesKeys.forEach(function(t){var a=e.state.preReleaseFeatures[t];c.push(f.default.createElement("div",{key:"advancedPreviewFeatures_"+a.label},f.default.createElement("div",{className:"checkbox"},f.default.createElement("label",null,f.default.createElement("input",{id:"advancedPreviewFeatures"+a.label,type:"checkbox",checked:"true"===e.state.settings[v.default.FeatureTogglePrefix+a.label],onChange:function(t){e.toggleFeature(a.label,t.target.checked)}}),e.renderFeatureLabel(t)))))}),c.push(f.default.createElement("div",{key:"advancedPreviewFeatures_helptext"},f.default.createElement("br",null),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.preReleaseDesc",defaultMessage:"Check any pre-released features you'd like to preview.  You may also need to refresh the page before the setting will take effect."}))),d=f.default.createElement(b.default,{title:f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.preReleaseTitle",defaultMessage:"Preview pre-release features"}),inputs:c,submit:this.saveEnabledFeatures,saving:this.state.isSaving,server_error:t,updateSection:this.handleUpdateSection})}else d=f.default.createElement(S.default,{title:E.localizeMessage("user.settings.advance.preReleaseTitle","Preview pre-release features"),describe:f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.enabledFeatures",defaultMessage:"{count, number} {count, plural, one {Feature} other {Features}} Enabled",values:{count:this.state.enabledFeatures}}),focused:this.props.prevActiveSection===this.prevSections.advancedPreviewFeatures,section:"advancedPreviewFeatures",updateSection:this.handleUpdateSection});return f.default.createElement("div",null,f.default.createElement("div",{className:"modal-header"},f.default.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},f.default.createElement("span",{"aria-hidden":"true"},"×")),f.default.createElement("h4",{className:"modal-title",ref:"title"},f.default.createElement("div",{className:"modal-back"},f.default.createElement("i",{className:"fa fa-angle-left",title:E.localizeMessage("generic_icons.back","Back Icon"),onClick:this.props.collapseModal})),f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.title",defaultMessage:"Advanced Settings"}))),f.default.createElement("div",{className:"user-settings"},f.default.createElement("h3",{className:"tab-header"},f.default.createElement(m.FormattedMessage,{id:"user.settings.advance.title",defaultMessage:"Advanced Settings"})),f.default.createElement("div",{className:"divider-dark first"}),a,l,n,o,r,u,d,f.default.createElement("div",{className:"divider-dark"})))}}]),t}(f.default.Component);t.default=_,_.propTypes={updateSection:c.default.func,activeSection:c.default.string,prevActiveSection:c.default.string,closeModal:c.default.func.isRequired,collapseModal:c.default.func.isRequired,enablePreviewFeatures:c.default.bool,buildEnterpriseReady:c.default.bool,isLicensed:c.default.bool}},1970:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(284),i=a(2),n=a(1027),l=a(1269),r=a(96),o=a(771),d=a(1134),u=a(1033),c=function(e){return e&&e.__esModule?e:{default:e}}(a(1971));t.default=(0,s.connect)(function(e){var t=(0,r.getConfig)(e),a=(0,r.getSupportedTimezones)(e),s=(0,o.getCurrentUserId)(e),i=(0,d.getUserTimezone)(e,s),n=i&&i.useAutomaticTimezone&&!i.automaticTimezone,l=!i||n,c="true"===t.AllowCustomThemes,f="true"===t.EnableLinkPreviews,m=t.DefaultClientLocale,p="true"===t.EnableThemeSelection,g="true"===t.ExperimentalTimezone;return{allowCustomThemes:c,configTeammateNameDisplay:t.TeammateNameDisplay,enableLinkPreviews:f,defaultClientLocale:m,enableThemeSelection:p,enableTimezone:g,timezones:a,userTimezone:i,shouldAutoUpdateTimezone:l,currentUserTimezone:(0,u.getUserCurrentTimezone)(i)}},function(e){return{actions:(0,i.bindActionCreators)({getSupportedTimezones:n.getSupportedTimezones,autoUpdateTimezone:l.autoUpdateTimezone},e)}})(c.default)},1971:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=A(a(128)),i=A(a(42)),n=A(a(282)),l=A(a(279)),r=A(a(283)),o=A(a(280)),d=A(a(281)),u=A(a(1)),c=A(a(3)),f=a(1033),m=a(762),p=a(777),g=A(a(807)),h=A(a(769)),v=A(a(25)),E=C(a(763)),b=a(1035),S=C(a(1034)),M=A(a(812)),y=A(a(825)),_=A(a(1972)),k=A(a(1974)),N=A(a(1975));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}var T=v.default.Preferences;function w(e){return{militaryTime:g.default.get(T.CATEGORY_DISPLAY_SETTINGS,T.USE_MILITARY_TIME,T.USE_MILITARY_TIME_DEFAULT),teammateNameDisplay:g.default.get(T.CATEGORY_DISPLAY_SETTINGS,T.NAME_NAME_FORMAT,e.configTeammateNameDisplay),channelDisplayMode:g.default.get(T.CATEGORY_DISPLAY_SETTINGS,T.CHANNEL_DISPLAY_MODE,T.CHANNEL_DISPLAY_MODE_DEFAULT),messageDisplay:g.default.get(T.CATEGORY_DISPLAY_SETTINGS,T.MESSAGE_DISPLAY,T.MESSAGE_DISPLAY_DEFAULT),collapseDisplay:g.default.get(T.CATEGORY_DISPLAY_SETTINGS,T.COLLAPSE_DISPLAY,T.COLLAPSE_DISPLAY_DEFAULT),linkPreviewDisplay:g.default.get(T.CATEGORY_DISPLAY_SETTINGS,T.LINK_PREVIEW_DISPLAY,T.LINK_PREVIEW_DISPLAY_DEFAULT)}}var F=function(e){function t(e){(0,l.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleSubmit=function(){var e=h.default.getCurrentId(),t={user_id:e,category:T.CATEGORY_DISPLAY_SETTINGS,name:T.USE_MILITARY_TIME,value:a.state.militaryTime},s={user_id:e,category:T.CATEGORY_DISPLAY_SETTINGS,name:T.NAME_NAME_FORMAT,value:a.state.teammateNameDisplay},i={user_id:e,category:T.CATEGORY_DISPLAY_SETTINGS,name:T.CHANNEL_DISPLAY_MODE,value:a.state.channelDisplayMode},n={user_id:e,category:T.CATEGORY_DISPLAY_SETTINGS,name:T.MESSAGE_DISPLAY,value:a.state.messageDisplay},l={user_id:e,category:T.CATEGORY_DISPLAY_SETTINGS,name:T.COLLAPSE_DISPLAY,value:a.state.collapseDisplay},r={user_id:e,category:T.CATEGORY_DISPLAY_SETTINGS,name:T.LINK_PREVIEW_DISPLAY,value:a.state.linkPreviewDisplay};a.setState({isSaving:!0});var o=[t,i,n,l,r];a.state.teammateNameDisplay===a.props.configTeammateNameDisplay?(0,p.deletePreferences)([s]):o.push(s),(0,p.savePreferences)(o,function(){a.updateSection("")})},a.handleClockRadio=function(e){a.setState({militaryTime:e})},a.handleTeammateNameDisplayRadio=function(e){a.setState({teammateNameDisplay:e})},a.updateSection=function(e){a.updateState(),a.props.updateSection(e)},a.updateState=function(){var e=w(a.props);E.areObjectsEqual(e,a.state)||a.setState(e),a.setState({isSaving:!1})},a.state=(0,i.default)({},w(e),{isSaving:!1}),0===e.timezones.length&&e.actions.getSupportedTimezones(),a.prevSections={theme:"dummySectionName",clock:"theme",linkpreview:"clock",message_display:"linkpreview",channel_display_mode:"message_display",languages:"channel_display_mode"},a}return(0,d.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.actions,a=e.enableTimezone,s=e.shouldAutoUpdateTimezone;a&&s&&t.autoUpdateTimezone((0,b.getBrowserTimezone)())}},{key:"handleChannelDisplayModeRadio",value:function(e){this.setState({channelDisplayMode:e})}},{key:"handlemessageDisplayRadio",value:function(e){this.setState({messageDisplay:e})}},{key:"handleCollapseRadio",value:function(e){this.setState({collapseDisplay:e})}},{key:"handleLinkPreviewRadio",value:function(e){this.setState({linkPreviewDisplay:e})}},{key:"handleOnChange",value:function(e){this.setState((0,i.default)({},e))}},{key:"createSection",value:function(e){var t=this,a=e.section,s=e.display,i=e.value,n=e.title,l=e.firstOption,r=e.secondOption,o=e.thirdOption,d=e.description,u=c.default.createElement(m.FormattedMessage,{id:l.radionButtonText.id,defaultMessage:l.radionButtonText.message}),f=void 0,p=void 0;l.radionButtonText.moreId&&(f=": ",p=c.default.createElement("span",{className:"font-weight--normal"},c.default.createElement(m.FormattedMessage,{id:l.radionButtonText.moreId,defaultMessage:l.radionButtonText.moreMessage})));var g=c.default.createElement(m.FormattedMessage,{id:r.radionButtonText.id,defaultMessage:r.radionButtonText.message}),h=void 0;r.radionButtonText.moreId&&(h=c.default.createElement("span",{className:"font-weight--normal"},c.default.createElement(m.FormattedMessage,{id:r.radionButtonText.moreId,defaultMessage:r.radionButtonText.moreMessage})));var v=void 0;o&&(v=c.default.createElement(m.FormattedMessage,{id:o.radionButtonText.id,defaultMessage:o.radionButtonText.message}));var E=c.default.createElement(m.FormattedMessage,{id:n.id,defaultMessage:n.message}),b=c.default.createElement(m.FormattedMessage,{id:d.id,defaultMessage:d.message});if(this.props.activeSection===a){var S=[!1,!1,!1];i===l.value?S[0]=!0:i===r.value?S[1]=!0:S[2]=!0;var _=a+"Format",k=a+"UserDisplay",N={};N[s]=l.value;var C={};C[s]=r.value;var A={};o&&(A[s]=o.value);var T=void 0;v&&(T=c.default.createElement("div",{className:"radio"},c.default.createElement("label",null,c.default.createElement("input",{id:_+"C",type:"radio",name:_,checked:S[2],onChange:function(){return t.handleOnChange(A)}}),v),c.default.createElement("br",null)));var w=[c.default.createElement("div",{key:k},c.default.createElement("div",{className:"radio"},c.default.createElement("label",null,c.default.createElement("input",{id:_+"A",type:"radio",name:_,checked:S[0],onChange:function(){return t.handleOnChange(N)}}),u,f,p),c.default.createElement("br",null)),c.default.createElement("div",{className:"radio"},c.default.createElement("label",null,c.default.createElement("input",{id:_+"B",type:"radio",name:_,checked:S[1],onChange:function(){return t.handleOnChange(C)}}),g,f,h),c.default.createElement("br",null)),T,c.default.createElement("div",null,c.default.createElement("br",null),b))];return c.default.createElement("div",null,c.default.createElement(M.default,{title:E,inputs:w,submit:this.handleSubmit,saving:this.state.isSaving,server_error:this.state.serverError,updateSection:this.updateSection}),c.default.createElement("div",{className:"divider-dark"}))}var F=void 0;return F=i===l.value?u:i===r.value?g:v,c.default.createElement("div",null,c.default.createElement(y.default,{title:E,describe:F,focused:this.props.prevActiveSection===this.prevSections[a],section:a,updateSection:this.updateSection}),c.default.createElement("div",{className:"divider-dark"}))}},{key:"render",value:function(){var e=this.createSection({section:"collapse",display:"collapseDisplay",value:this.state.collapseDisplay,defaultDisplay:"false",title:{id:"user.settings.display.collapseDisplay",message:"Default appearance of image previews"},firstOption:{value:"false",radionButtonText:{id:"user.settings.display.collapseOn",message:"On"}},secondOption:{value:"true",radionButtonText:{id:"user.settings.display.collapseOff",message:"Off"}},description:{id:"user.settings.display.collapseDesc",message:"Set whether previews of image links and image attachment thumbnails show as expanded or collapsed by default. This setting can also be controlled using the slash commands /expand and /collapse."}}),t=null;this.props.enableLinkPreviews?(t=this.createSection({section:"linkpreview",display:"linkPreviewDisplay",value:this.state.linkPreviewDisplay,defaultDisplay:"true",title:{id:"user.settings.display.linkPreviewDisplay",message:"Website Link Previews"},firstOption:{value:"true",radionButtonText:{id:"user.settings.display.linkPreviewOn",message:"On"}},secondOption:{value:"false",radionButtonText:{id:"user.settings.display.linkPreviewOff",message:"Off"}},description:{id:"user.settings.display.linkPreviewDesc",message:"When available, the first web link in a message will show a preview of the website content below the message."}}),this.prevSections.message_display="linkpreview"):this.prevSections.message_display=this.prevSections.linkpreview;var a=this.createSection({section:"clock",display:"militaryTime",value:this.state.militaryTime,defaultDisplay:"false",title:{id:"user.settings.display.clockDisplay",message:"Clock Display"},firstOption:{value:"false",radionButtonText:{id:"user.settings.display.normalClock",message:"12-hour clock (example: 4:00 PM)"}},secondOption:{value:"true",radionButtonText:{id:"user.settings.display.militaryClock",message:"24-hour clock (example: 16:00)"}},description:{id:"user.settings.display.preferTime",message:"Select how you prefer time displayed."}}),i=this.createSection({section:T.NAME_NAME_FORMAT,display:"teammateNameDisplay",value:this.state.teammateNameDisplay,defaultDisplay:this.props.configTeammateNameDisplay,title:{id:"user.settings.display.teammateNameDisplayTitle",message:"Teammate Name Display"},firstOption:{value:v.default.TEAMMATE_NAME_DISPLAY.SHOW_USERNAME,radionButtonText:{id:"user.settings.display.teammateNameDisplayUsername",message:"Show username"}},secondOption:{value:v.default.TEAMMATE_NAME_DISPLAY.SHOW_NICKNAME_FULLNAME,radionButtonText:{id:"user.settings.display.teammateNameDisplayNicknameFullname",message:"Show nickname if one exists, otherwise show first and last name"}},thirdOption:{value:v.default.TEAMMATE_NAME_DISPLAY.SHOW_FULLNAME,radionButtonText:{id:"user.settings.display.teammateNameDisplayFullname",message:"Show first and last name"}},description:{id:"user.settings.display.teammateNameDisplayDescription",message:"Set how to display other user's names in posts and the Direct Messages list."}}),n=void 0;if(this.props.enableTimezone&&!this.props.shouldAutoUpdateTimezone){var l=this.props.userTimezone;n="timezone"===this.props.activeSection?c.default.createElement("div",null,c.default.createElement(_.default,{user:this.props.user,timezones:this.props.timezones,useAutomaticTimezone:l.useAutomaticTimezone,automaticTimezone:l.automaticTimezone,manualTimezone:l.manualTimezone,updateSection:this.updateSection}),c.default.createElement("div",{className:"divider-dark"})):c.default.createElement("div",null,c.default.createElement(y.default,{title:c.default.createElement(m.FormattedMessage,{id:"user.settings.display.timezone",defaultMessage:"Timezone"}),width:"medium",describe:(0,f.getTimezoneRegion)(this.props.currentUserTimezone),section:"timezone",updateSection:this.updateSection}),c.default.createElement("div",{className:"divider-dark"}))}var r=this.createSection({section:T.MESSAGE_DISPLAY,display:"messageDisplay",value:this.state.messageDisplay,defaultDisplay:T.MESSAGE_DISPLAY_CLEAN,title:{id:"user.settings.display.messageDisplayTitle",message:"Message Display"},firstOption:{value:T.MESSAGE_DISPLAY_CLEAN,radionButtonText:{id:"user.settings.display.messageDisplayClean",message:"Standard",moreId:"user.settings.display.messageDisplayCleanDes",moreMessage:"Easy to scan and read."}},secondOption:{value:T.MESSAGE_DISPLAY_COMPACT,radionButtonText:{id:"user.settings.display.messageDisplayCompact",message:"Compact",moreId:"user.settings.display.messageDisplayCompactDes",moreMessage:"Fit as many messages on the screen as we can."}},description:{id:"user.settings.display.messageDisplayDescription",message:"Select how messages in a channel should be displayed."}}),o=this.createSection({section:T.CHANNEL_DISPLAY_MODE,display:"channelDisplayMode",value:this.state.channelDisplayMode,defaultDisplay:T.CHANNEL_DISPLAY_MODE_FULL_SCREEN,title:{id:"user.settings.display.channelDisplayTitle",message:"Channel Display Mode"},firstOption:{value:T.CHANNEL_DISPLAY_MODE_FULL_SCREEN,radionButtonText:{id:"user.settings.display.fullScreen",message:"Full width"}},secondOption:{value:T.CHANNEL_DISPLAY_MODE_CENTERED,radionButtonText:{id:"user.settings.display.fixedWidthCentered",message:"Fixed width, centered"}},description:{id:"user.settings.display.channeldisplaymode",message:"Select the width of the center channel."}}),d=void 0,u=this.props.user.locale;if("languages"===this.props.activeSection)S.isLanguageAvailable(u)||(u=this.props.defaultClientLocale),d=c.default.createElement("div",null,c.default.createElement(k.default,{user:this.props.user,locale:u,updateSection:this.updateSection}),c.default.createElement("div",{className:"divider-dark"}));else{var p=void 0;p=S.isLanguageAvailable(u)?S.getLanguageInfo(u).name:S.getLanguageInfo(this.props.defaultClientLocale).name,d=c.default.createElement("div",null,c.default.createElement(y.default,{title:c.default.createElement(m.FormattedMessage,{id:"user.settings.display.language",defaultMessage:"Language"}),width:"medium",describe:p,focused:this.props.prevActiveSection===this.prevSections.languages,section:"languages",updateSection:this.updateSection}),c.default.createElement("div",{className:"divider-dark"}))}1===(0,s.default)(S.getLanguages()).length&&(d=null);var g=void 0;return this.props.enableThemeSelection&&(g=c.default.createElement("div",null,c.default.createElement(N.default,{selected:"theme"===this.props.activeSection,updateSection:this.updateSection,setRequireConfirm:this.props.setRequireConfirm,setEnforceFocus:this.props.setEnforceFocus,allowCustomThemes:this.props.allowCustomThemes}),c.default.createElement("div",{className:"divider-dark"}))),c.default.createElement("div",{id:"displaySettings"},c.default.createElement("div",{className:"modal-header"},c.default.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},c.default.createElement("span",{"aria-hidden":"true"},"×")),c.default.createElement("h4",{className:"modal-title",ref:"title"},c.default.createElement("div",{className:"modal-back"},c.default.createElement("i",{className:"fa fa-angle-left",title:E.localizeMessage("generic_icons.back","Back Icon"),onClick:this.props.collapseModal})),c.default.createElement(m.FormattedMessage,{id:"user.settings.display.title",defaultMessage:"Display Settings"}))),c.default.createElement("div",{className:"user-settings"},c.default.createElement("h3",{id:"displaySettingsTitle",className:"tab-header"},c.default.createElement(m.FormattedMessage,{id:"user.settings.display.title",defaultMessage:"Display Settings"})),c.default.createElement("div",{className:"divider-dark first"}),g,a,i,n,t,e,r,o,d))}}]),t}(c.default.Component);t.default=F,F.propTypes={user:u.default.object,updateSection:u.default.func,activeSection:u.default.string,prevActiveSection:u.default.string,closeModal:u.default.func.isRequired,collapseModal:u.default.func.isRequired,setRequireConfirm:u.default.func.isRequired,setEnforceFocus:u.default.func.isRequired,timezones:u.default.array.isRequired,userTimezone:u.default.object.isRequired,allowCustomThemes:u.default.bool,enableLinkPreviews:u.default.bool,defaultClientLocale:u.default.string,enableThemeSelection:u.default.bool,configTeammateNameDisplay:u.default.string,currentUserTimezone:u.default.string,enableTimezone:u.default.bool,shouldAutoUpdateTimezone:u.default.bool,actions:u.default.shape({getSupportedTimezones:u.default.func.isRequired,autoUpdateTimezone:u.default.func.isRequired}).isRequired}},1972:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=b(a(42)),i=b(a(282)),n=b(a(279)),l=b(a(283)),r=b(a(280)),o=b(a(281)),d=b(a(1)),u=b(a(3)),c=a(1033),f=a(762),m=a(777),p=b(a(812)),g=a(1035),h=b(a(1037)),v=b(a(1038)),E=b(a(1973));function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(e){(0,n.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.onChange=function(e){a.setState({manualTimezoneInput:e.target.value})},a.handleTimezoneSelected=function(e){e&&a.setState({manualTimezone:e,manualTimezoneInput:e})},a.timezoneNotChanged=function(){var e=a.state,t=e.useAutomaticTimezone,s=e.automaticTimezone,i=e.manualTimezone,n=a.props,l=n.useAutomaticTimezone,r=n.automaticTimezone,o=n.manualTimezone;return t===l&&s===r&&i===o},a.changeTimezone=function(){a.timezoneNotChanged()?a.props.updateSection(""):a.submitUser()},a.submitUser=function(){var e=a.props.user,t=a.state,i=t.useAutomaticTimezone,n=t.automaticTimezone,l=t.manualTimezone,r={useAutomaticTimezone:i.toString(),automaticTimezone:n,manualTimezone:l},o=(0,s.default)({},e,{timezone:r});(0,m.updateUser)(o,function(){return a.props.updateSection("")},function(e){var t=void 0;t=e.message?e.message:e,a.setState({serverError:t,isSaving:!1})})},a.handleAutomaticTimezone=function(e){var t=e.target.checked,s="";t&&(s=(0,g.getBrowserTimezone)()),a.setState({useAutomaticTimezone:t,automaticTimezone:s})},a.handleManualTimezone=function(e){a.setState({manualTimezone:e.target.value})},a.state={useAutomaticTimezone:e.useAutomaticTimezone,automaticTimezone:e.automaticTimezone,manualTimezone:e.manualTimezone,manualTimezoneInput:e.manualTimezone,isSaving:!1},a}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.timezones,t=this.state,a=t.useAutomaticTimezone,s=t.automaticTimezone,i=void 0;this.state.serverError&&(i=u.default.createElement("label",{className:"has-error"},this.state.serverError));var n=[],l=u.default.createElement("div",{className:"section-describe padding-top"},a&&(0,c.getTimezoneRegion)(s)),r=0===e.length,o=u.default.createElement("div",{className:"checkbox"},u.default.createElement("label",null,u.default.createElement("input",{id:"automaticTimezoneInput",type:"checkbox",checked:a,onChange:this.handleAutomaticTimezone,disabled:r}),u.default.createElement(f.FormattedMessage,{id:"user.settings.timezones.automatic",defaultMessage:"Set automatically"}),l)),d=[new E.default],m=u.default.createElement("div",{key:"changeTimezone"},u.default.createElement("label",{className:"control-label"},u.default.createElement(f.FormattedMessage,{id:"user.settings.timezones.change",defaultMessage:"Change timezone"})),u.default.createElement("div",{className:"padding-top"},u.default.createElement(h.default,{ref:this.setSwitchBoxRef,className:"form-control focused",type:"search",onChange:this.onChange,value:this.state.manualTimezoneInput,onItemSelected:this.handleTimezoneSelected,listComponent:v.default,maxLength:"64",requiredCharacters:0,providers:d,listStyle:"bottom",completeOnTab:!1,renderDividers:!1,openOnFocus:!0,disabled:r}),i));return n.push(o),a||n.push(m),n.push(u.default.createElement("div",null,u.default.createElement("br",null),u.default.createElement(f.FormattedHTMLMessage,{id:"user.settings.timezones.promote",defaultMessage:"Select the time zone used for timestamps in the user interface and email notifications."}))),u.default.createElement(p.default,{title:u.default.createElement(f.FormattedMessage,{id:"user.settings.display.timezone",defaultMessage:"Timezone"}),containerStyle:"timezone-container",width:"medium",submit:this.changeTimezone,saving:this.state.isSaving,inputs:n,updateSection:this.props.updateSection})}}]),t}(u.default.PureComponent);t.default=S,S.propTypes={user:d.default.object.isRequired,updateSection:d.default.func.isRequired,useAutomaticTimezone:d.default.bool.isRequired,automaticTimezone:d.default.string.isRequired,manualTimezone:d.default.string.isRequired,timezones:d.default.array.isRequired}},1973:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=h(a(126)),i=h(a(127)),n=h(a(282)),l=h(a(279)),r=h(a(283)),o=h(a(280)),d=h(a(281)),u=h(a(3)),c=a(1033),f=h(a(783)),m=a(25),p=a(1035),g=h(a(858));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){return(0,l.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a="mentions__name";return e.isSelection&&(a+=" suggestion--selected"),u.default.createElement("div",{onClick:this.handleClick,className:a},t)}}]),t}(h(a(839)).default),E=function(e){function t(){return(0,l.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,r.default)(t,[{key:"handlePretextChanged",value:function(e,t){return 0===t.length?(this.displayAllTimezones(e,t),!0):!!t&&(this.filterTimezones(e,t),!0)}},{key:"displayAllTimezones",value:function(){var e=(0,i.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(function(){f.default.handleServerAction({type:m.ActionTypes.SUGGESTION_RECEIVED_SUGGESTIONS,id:t,matchedPretext:"",terms:(0,p.getSupportedTimezones)(),items:(0,p.getSupportedTimezones)(),component:v})},0);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"filterTimezones",value:function(){var e=(0,i.default)(s.default.mark(function e(t,a){var i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=(0,p.getSupportedTimezones)().filter(function(e){return(0,c.getTimezoneRegion)(e).toLowerCase().indexOf(a)>=0||e.toLowerCase().indexOf(a)>=0}),setTimeout(function(){f.default.handleServerAction({type:m.ActionTypes.SUGGESTION_RECEIVED_SUGGESTIONS,id:t,matchedPretext:a,terms:i,items:i,component:v})},0);case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}]),t}(g.default);t.default=E},1974:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=E(a(128)),i=E(a(42)),n=E(a(282)),l=E(a(279)),r=E(a(283)),o=E(a(280)),d=E(a(281)),u=E(a(1)),c=E(a(3)),f=a(762),m=v(a(773)),p=a(777),g=v(a(1034)),h=E(a(812));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){(0,l.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.setLanguage=function(e){a.setState({locale:e.target.value})},a.changeLanguage=function(){a.props.user.locale===a.state.locale?a.props.updateSection(""):a.submitUser((0,i.default)({},a.props.user,{locale:a.state.locale}))},a.submitUser=function(e){a.setState({isSaving:!0}),(0,p.updateUser)(e,function(){m.newLocalizationSelected(e.locale)},function(e){var t=void 0;t=e.message?e.message:e,a.setState({serverError:t,isSaving:!1})})},a.state={locale:e.locale,isSaving:!1},a}return(0,d.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=void 0;this.state.serverError&&(e=c.default.createElement("label",{className:"has-error"},this.state.serverError));var t=[],a=g.getLanguages();(0,s.default)(a).map(function(e){return{value:a[e].value,name:a[e].name,order:a[e].order}}).sort(function(e,t){return e.order-t.order}).forEach(function(e){t.push(c.default.createElement("option",{key:e.value,value:e.value},e.name))});var i=c.default.createElement("div",{key:"changeLanguage"},c.default.createElement("br",null),c.default.createElement("label",{className:"control-label"},c.default.createElement(f.FormattedMessage,{id:"user.settings.languages.change",defaultMessage:"Change interface language"})),c.default.createElement("div",{className:"padding-top"},c.default.createElement("select",{id:"displayLanguage",ref:"language",className:"form-control",value:this.state.locale,onChange:this.setLanguage},t),e),c.default.createElement("div",null,c.default.createElement("br",null),c.default.createElement(f.FormattedHTMLMessage,{id:"user.settings.languages.promote",defaultMessage:'Select which language Mattermost displays in the user interface.<br /><br />Would like to help with translations? Join the <a href="http://translate.mattermost.com/" target="_blank">Mattermost Translation Server</a> to contribute.'})));return c.default.createElement(h.default,{title:c.default.createElement(f.FormattedMessage,{id:"user.settings.display.language",defaultMessage:"Language"}),width:"medium",submit:this.changeLanguage,saving:this.state.isSaving,inputs:[i],updateSection:this.props.updateSection})}}]),t}(c.default.Component);t.default=b,b.propTypes={user:u.default.object.isRequired,locale:u.default.string.isRequired,updateSection:u.default.func.isRequired}},1975:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=T(a(128)),i=T(a(42)),n=T(a(185)),l=T(a(282)),r=T(a(279)),o=T(a(283)),d=T(a(280)),u=T(a(281)),c=T(a(768)),f=T(a(1)),m=T(a(3)),p=T(a(287)),g=a(762),h=A(a(777)),v=T(a(807)),E=T(a(779)),b=T(a(769)),S=a(25),M=A(a(763)),y=T(a(783)),_=T(a(812)),k=T(a(825)),N=T(a(1976)),C=T(a(2129));function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(e){(0,r.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.onChange=function(){var e=a.getStateFromStores();M.areObjectsEqual(a.state,e)||a.setState(e),a.props.setEnforceFocus(!0)},a.submitTheme=function(){var e=a.state.applyToAllTeams?"":a.state.teamId;a.setState({isSaving:!0}),h.saveTheme(e,a.state.theme,function(){a.props.setRequireConfirm(!1),a.originalTheme=(0,n.default)({},a.state.theme),a.scrollToTop(),a.props.updateSection(""),a.setState({isSaving:!1})})},a.updateTheme=function(e){var t=a.state.theme.length===e.length;if(!t)for(var s in e)if(e.hasOwnProperty(s)&&a.state.theme[s]!==e[s]){t=!0;break}a.props.setRequireConfirm(t),a.setState({theme:e}),M.applyTheme(e)},a.resetFields=function(){var e=a.getStateFromStores();e.serverError=null,a.setState(e),a.scrollToTop(),M.applyTheme(e.theme),a.props.setRequireConfirm(!1)},a.handleImportModal=function(){y.default.handleViewAction({type:S.ActionTypes.TOGGLE_IMPORT_THEME_MODAL,value:!0,callback:a.updateTheme}),a.props.setEnforceFocus(!1)},a.handleUpdateSection=function(e){a.props.updateSection(e)},a.state=(0,i.default)({},a.getStateFromStores(),{isSaving:!1}),a.originalTheme=(0,n.default)({},a.state.theme),a}return(0,u.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){b.default.addChangeListener(this.onChange),this.props.selected&&(0,c.default)(p.default.findDOMNode(this.refs[this.state.theme])).addClass("active-border")}},{key:"componentDidUpdate",value:function(){this.props.selected&&((0,c.default)(".color-btn").removeClass("active-border"),(0,c.default)(p.default.findDOMNode(this.refs[this.state.theme])).addClass("active-border"))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.selected&&!e.selected&&this.resetFields()}},{key:"componentWillUnmount",value:function(){if(b.default.removeChangeListener(this.onChange),this.props.selected){var e=this.getStateFromStores();M.applyTheme(e.theme)}}},{key:"getStateFromStores",value:function(){var e=v.default.getTheme();e.codeTheme||(e.codeTheme=S.Constants.DEFAULT_CODE_THEME);var t=(0,s.default)(E.default.getAll()).length>1,a=v.default.getCategory(S.Preferences.CATEGORY_THEME).size<=1;return{teamId:E.default.getCurrentId(),theme:e,type:e.type||"premade",showAllTeamsCheckbox:t,applyToAllTeams:a}}},{key:"scrollToTop",value:function(){(0,c.default)(".ps-container.modal-body").scrollTop(0)}},{key:"updateType",value:function(e){this.setState({type:e})}},{key:"render",value:function(){var e=this,t=void 0;this.state.serverError&&(t=this.state.serverError);var a="custom"===this.state.type,s=void 0,i=void 0;a&&this.props.allowCustomThemes?s=m.default.createElement("div",{key:"customThemeChooser"},m.default.createElement(N.default,{theme:this.state.theme,updateTheme:this.updateTheme})):i=m.default.createElement("div",{key:"premadeThemeChooser"},m.default.createElement("br",null),m.default.createElement(C.default,{theme:this.state.theme,updateTheme:this.updateTheme}));var n=void 0;if(this.props.selected){var l=[];this.props.allowCustomThemes&&l.push(m.default.createElement("div",{className:"radio",key:"premadeThemeColorLabel"},m.default.createElement("label",null,m.default.createElement("input",{id:"standardThemes",type:"radio",name:"theme",checked:!a,onChange:this.updateType.bind(this,"premade")}),m.default.createElement(g.FormattedMessage,{id:"user.settings.display.theme.themeColors",defaultMessage:"Theme Colors"})),m.default.createElement("br",null))),l.push(i),this.props.allowCustomThemes&&(l.push(m.default.createElement("div",{className:"radio",key:"customThemeColorLabel"},m.default.createElement("label",null,m.default.createElement("input",{id:"customThemes",type:"radio",name:"theme",checked:a,onChange:this.updateType.bind(this,"custom")}),m.default.createElement(g.FormattedMessage,{id:"user.settings.display.theme.customTheme",defaultMessage:"Custom Theme"})))),l.push(s),l.push(m.default.createElement("div",{key:"otherThemes"},m.default.createElement("br",null),m.default.createElement("a",{id:"otherThemes",href:"http://docs.mattermost.com/help/settings/theme-colors.html#custom-theme-examples",target:"_blank",rel:"noopener noreferrer"},m.default.createElement(g.FormattedMessage,{id:"user.settings.display.theme.otherThemes",defaultMessage:"See other themes"})))),l.push(m.default.createElement("div",{key:"importSlackThemeButton",className:"padding-top"},m.default.createElement("a",{id:"slackImportTheme",className:"theme",onClick:this.handleImportModal},m.default.createElement(g.FormattedMessage,{id:"user.settings.display.theme.import",defaultMessage:"Import theme colors from Slack"})))));var r=null;this.state.showAllTeamsCheckbox&&(r=m.default.createElement("div",{className:"checkbox user-settings__submit-checkbox"},m.default.createElement("label",null,m.default.createElement("input",{id:"applyThemeToAllTeams",type:"checkbox",checked:this.state.applyToAllTeams,onChange:function(t){return e.setState({applyToAllTeams:t.target.checked})}}),m.default.createElement(g.FormattedMessage,{id:"user.settings.display.theme.applyToAllTeams",defaultMessage:"Apply new theme to all my teams"})))),n=m.default.createElement(_.default,{inputs:l,submitExtra:r,submit:this.submitTheme,saving:this.state.isSaving,server_error:t,width:"full",updateSection:this.handleUpdateSection})}else n=m.default.createElement(k.default,{title:m.default.createElement(g.FormattedMessage,{id:"user.settings.display.theme.title",defaultMessage:"Theme"}),describe:m.default.createElement(g.FormattedMessage,{id:"user.settings.display.theme.describe",defaultMessage:"Open to manage your theme"}),section:"theme",updateSection:this.handleUpdateSection});return n}}]),t}(m.default.Component);w.propTypes={selected:f.default.bool.isRequired,updateSection:f.default.func.isRequired,setRequireConfirm:f.default.func.isRequired,setEnforceFocus:f.default.func.isRequired,allowCustomThemes:f.default.bool},t.default=w},1976:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=M(a(130)),i=M(a(42)),n=M(a(292)),l=M(a(185)),r=M(a(282)),o=M(a(279)),d=M(a(283)),u=M(a(280)),c=M(a(281)),f=M(a(768)),m=M(a(1)),p=M(a(3)),g=a(767),h=a(762),v=a(763);a(1977);var E=M(a(25)),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(290)),S=M(a(1978));function M(e){return e&&e.__esModule?e:{default:e}}var y=(0,h.defineMessages)({sidebarBg:{id:"user.settings.custom_theme.sidebarBg",defaultMessage:"Sidebar BG"},sidebarText:{id:"user.settings.custom_theme.sidebarText",defaultMessage:"Sidebar Text"},sidebarHeaderBg:{id:"user.settings.custom_theme.sidebarHeaderBg",defaultMessage:"Sidebar Header BG"},sidebarHeaderTextColor:{id:"user.settings.custom_theme.sidebarHeaderTextColor",defaultMessage:"Sidebar Header Text"},sidebarUnreadText:{id:"user.settings.custom_theme.sidebarUnreadText",defaultMessage:"Sidebar Unread Text"},sidebarTextHoverBg:{id:"user.settings.custom_theme.sidebarTextHoverBg",defaultMessage:"Sidebar Text Hover BG"},sidebarTextActiveBorder:{id:"user.settings.custom_theme.sidebarTextActiveBorder",defaultMessage:"Sidebar Text Active Border"},sidebarTextActiveColor:{id:"user.settings.custom_theme.sidebarTextActiveColor",defaultMessage:"Sidebar Text Active Color"},onlineIndicator:{id:"user.settings.custom_theme.onlineIndicator",defaultMessage:"Online Indicator"},awayIndicator:{id:"user.settings.custom_theme.awayIndicator",defaultMessage:"Away Indicator"},dndIndicator:{id:"user.settings.custom_theme.dndIndicator",defaultMessage:"Do Not Disturb Indicator"},mentionBg:{id:"user.settings.custom_theme.mentionBj",defaultMessage:"Mention Jewel BG"},mentionColor:{id:"user.settings.custom_theme.mentionColor",defaultMessage:"Mention Jewel Text"},centerChannelBg:{id:"user.settings.custom_theme.centerChannelBg",defaultMessage:"Center Channel BG"},centerChannelColor:{id:"user.settings.custom_theme.centerChannelColor",defaultMessage:"Center Channel Text"},newMessageSeparator:{id:"user.settings.custom_theme.newMessageSeparator",defaultMessage:"New Message Separator"},linkColor:{id:"user.settings.custom_theme.linkColor",defaultMessage:"Link Color"},buttonBg:{id:"user.settings.custom_theme.buttonBg",defaultMessage:"Button BG"},buttonColor:{id:"user.settings.custom_theme.buttonColor",defaultMessage:"Button Text"},errorTextColor:{id:"user.settings.custom_theme.errorTextColor",defaultMessage:"Error Text Color"},mentionHighlightBg:{id:"user.settings.custom_theme.mentionHighlightBg",defaultMessage:"Mention Highlight BG"},mentionHighlightLink:{id:"user.settings.custom_theme.mentionHighlightLink",defaultMessage:"Mention Highlight Link"},codeTheme:{id:"user.settings.custom_theme.codeTheme",defaultMessage:"Code Theme"}}),_=function(e){function t(e){(0,o.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));k.call(a);var s=a.setCopyTheme(a.props.theme);return a.state={copyTheme:s},a}return(0,c.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){(0,f.default)(".group--code").on("change",this.onCodeThemeChange)}},{key:"componentWillUnmount",value:function(){(0,f.default)(".group--code").off("change",this.onCodeThemeChange)}},{key:"setCopyTheme",value:function(e){var t=(0,l.default)({},e);return delete t.type,delete t.image,(0,n.default)(t)}},{key:"toggleSection",value:function(e){b.isIos()?(0,f.default)(e).toggleClass("open"):(0,f.default)(e).slideToggle()}},{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage,a=this.props.theme,s=[],i=[],n=[];E.default.THEME_ELEMENTS.forEach(function(l,r){if("codeTheme"===l.id){var o=[],d="";l.themes.forEach(function(e,t){e.id===a[l.id]&&(d=e.iconURL),o.push(p.default.createElement("option",{key:"code-theme-key"+t,value:e.id},e.uiName))});var u=p.default.createElement(g.Popover,{bsStyle:"info",id:"code-popover",className:"code-popover"},p.default.createElement("img",{width:"200",src:d}));i.push(p.default.createElement("div",{className:"col-sm-6 form-group",key:"custom-theme-key"+r},p.default.createElement("label",{className:"custom-label"},t(y[l.id])),p.default.createElement("div",{className:"input-group theme-group group--code dropdown",id:l.id},p.default.createElement("select",{className:"form-control",type:"text",defaultValue:a[l.id]},o),p.default.createElement(g.OverlayTrigger,{trigger:["hover","focus"],placement:"top",overlay:u,ref:"headerOverlay"},p.default.createElement("span",{className:"input-group-addon"},p.default.createElement("img",{src:d}))))))}else if("centerChannelElements"===l.group)i.push(p.default.createElement("div",{className:"col-sm-6 form-group element",key:"custom-theme-key"+r},p.default.createElement(S.default,{id:l.id,label:t(y[l.id]),color:a[l.id],onChange:e.handleColorChange})));else if("sidebarElements"===l.group){var c=a[l.id];c||"mentionBg"!==l.id||(c=a.mentionBj),s.push(p.default.createElement("div",{className:"col-sm-6 form-group element",key:"custom-theme-key"+r},p.default.createElement(S.default,{id:l.id,label:t(y[l.id]),color:c,onChange:e.handleColorChange})))}else n.push(p.default.createElement("div",{className:"col-sm-6 form-group element",key:"custom-theme-key"+r},p.default.createElement(S.default,{id:l.id,label:t(y[l.id]),color:a[l.id],onChange:e.handleColorChange})))});var l=p.default.createElement("div",{className:"col-sm-12"},p.default.createElement("label",{className:"custom-label"},p.default.createElement(h.FormattedMessage,{id:"user.settings.custom_theme.copyPaste",defaultMessage:"Copy and paste to share theme colors:"})),p.default.createElement("textarea",{ref:"textarea",className:"form-control",value:this.state.copyTheme,onPaste:this.pasteBoxChange,onChange:this.onChangeHandle,onClick:this.selectTheme}));return p.default.createElement("div",{className:"appearance-section padding-top"},p.default.createElement("div",{className:"theme-elements row"},p.default.createElement("div",{ref:"sidebarStylesHeader",className:"theme-elements__header",onClick:this.toggleSidebarStyles},p.default.createElement(h.FormattedMessage,{id:"user.settings.custom_theme.sidebarTitle",defaultMessage:"Sidebar Styles"}),p.default.createElement("div",{className:"header__icon"},p.default.createElement("i",{className:"fa fa-plus",title:(0,v.localizeMessage)("generic_icons.expand","Expand Icon")}),p.default.createElement("i",{className:"fa fa-minus",title:(0,v.localizeMessage)("generic_icons.collapse","Collapse Icon")}))),p.default.createElement("div",{ref:"sidebarStyles",className:"theme-elements__body"},s)),p.default.createElement("div",{className:"theme-elements row"},p.default.createElement("div",{ref:"centerChannelStylesHeader",className:"theme-elements__header",onClick:this.toggleCenterChannelStyles},p.default.createElement(h.FormattedMessage,{id:"user.settings.custom_theme.centerChannelTitle",defaultMessage:"Center Channel Styles"}),p.default.createElement("div",{className:"header__icon"},p.default.createElement("i",{className:"fa fa-plus",title:(0,v.localizeMessage)("generic_icons.expand","Expand Icon")}),p.default.createElement("i",{className:"fa fa-minus",title:(0,v.localizeMessage)("generic_icons.collapse","Collapse Icon")}))),p.default.createElement("div",{ref:"centerChannelStyles",className:"theme-elements__body"},i)),p.default.createElement("div",{className:"theme-elements row form-group"},p.default.createElement("div",{ref:"linkAndButtonStylesHeader",className:"theme-elements__header",onClick:this.toggleLinkAndButtonStyles},p.default.createElement(h.FormattedMessage,{id:"user.settings.custom_theme.linkButtonTitle",defaultMessage:"Link and Button Styles"}),p.default.createElement("div",{className:"header__icon"},p.default.createElement("i",{className:"fa fa-plus",title:(0,v.localizeMessage)("generic_icons.expand","Expand Icon")}),p.default.createElement("i",{className:"fa fa-minus",title:(0,v.localizeMessage)("generic_icons.collapse","Collapse Icon")}))),p.default.createElement("div",{ref:"linkAndButtonStyles",className:"theme-elements__body"},n)),p.default.createElement("div",{className:"row"},l))}}]),t}(p.default.Component),k=function(){var e=this;this.handleColorChange=function(t,a){var n=e.props,l=n.updateTheme,r=n.theme;if(r[t]!==a){var o=(0,i.default)({},r,(0,s.default)({type:"custom"},t,a));"mentionBg"===t&&(o.mentionBj=a),l(o);var d=e.setCopyTheme(o);e.setState({copyTheme:d})}},this.pasteBoxChange=function(t){var a="";if(0!==(a=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):t.clipboardData.getData("Text")).length){var s=void 0;try{s=JSON.parse(a)}catch(e){return}e.setState({copyTheme:(0,n.default)(s)}),s.type="custom",e.props.updateTheme(s)}},this.onChangeHandle=function(e){e.stopPropagation()},this.selectTheme=function(){var t=e.refs.textarea;t.focus(),t.setSelectionRange(0,e.state.copyTheme.length)},this.toggleSidebarStyles=function(t){t.preventDefault(),(0,f.default)(e.refs.sidebarStylesHeader).toggleClass("open"),e.toggleSection(e.refs.sidebarStyles)},this.toggleCenterChannelStyles=function(t){t.preventDefault(),(0,f.default)(e.refs.centerChannelStylesHeader).toggleClass("open"),e.toggleSection(e.refs.centerChannelStyles)},this.toggleLinkAndButtonStyles=function(t){t.preventDefault(),(0,f.default)(e.refs.linkAndButtonStylesHeader).toggleClass("open"),e.toggleSection(e.refs.linkAndButtonStyles)},this.onCodeThemeChange=function(t){var a=e.props.theme;a.codeTheme=t.target.value,e.props.updateTheme(a)}};_.propTypes={intl:h.intlShape.isRequired,theme:m.default.object.isRequired,updateTheme:m.default.func.isRequired},t.default=(0,h.injectIntl)(_)},1978:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=c(a(282)),i=c(a(279)),n=c(a(283)),l=c(a(280)),r=c(a(281)),o=c(a(3)),d=c(a(1)),u=c(a(1979));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e,a,n,r;(0,i.default)(this,t);for(var o=arguments.length,d=Array(o),u=0;u<o;u++)d[u]=arguments[u];return a=n=(0,l.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(d))),n.handleChange=function(e){var t=n.props,a=t.id,s=t.onChange;s&&s(a,e)},r=a,(0,l.default)(n,r)}return(0,r.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.color;return o.default.createElement("div",null,o.default.createElement("label",{className:"custom-label"},t),o.default.createElement(u.default,{color:a,onChange:this.handleChange}))}}]),t}(o.default.Component);f.propTypes={id:d.default.string.isRequired,label:d.default.string.isRequired,color:d.default.string.isRequired,onChange:d.default.func},t.default=f},1979:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=f(a(282)),i=f(a(279)),n=f(a(283)),l=f(a(280)),r=f(a(281)),o=f(a(3)),d=f(a(287)),u=f(a(1)),c=a(1312);function f(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.checkClick=function(e){var t=d.default.findDOMNode(a.colorPicker);t&&t.contains(e.target)||a.setState({isOpened:!1})},a.togglePicker=function(){a.setState({isOpened:!a.state.isOpened})},a.handleChange=function(e){var t=e.hex,s=a.props.onChange;s&&s(t)},a.getColorPicker=function(e){a.colorPicker=e},a.state={idOpened:!1},a}return(0,r.default)(t,e),(0,n.default)(t,[{key:"componentDidUpdate",value:function(e,t){var a=t.isOpened,s=this.state.isOpened;s!==a&&(s?document.addEventListener("click",this.checkClick):document.removeEventListener("click",this.checkClick))}},{key:"render",value:function(){var e=this.props.color,t=this.state.isOpened;return o.default.createElement("div",{className:"color-input input-group"},o.default.createElement("input",{className:"form-control",type:"text",value:e,readOnly:!0}),o.default.createElement("span",{className:"input-group-addon",onClick:this.togglePicker},o.default.createElement("i",{className:"color-icon",style:{backgroundColor:e}})),t&&o.default.createElement("div",{ref:this.getColorPicker,className:"color-popover"},o.default.createElement(c.ChromePicker,{color:e,onChange:this.handleChange})))}}]),t}(o.default.Component);m.propTypes={color:u.default.string.isRequired,onChange:u.default.func},t.default=m},2129:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(284),i=a(96),n=function(e){return e&&e.__esModule?e:{default:e}}(a(2130));t.default=(0,s.connect)(function(e){var t=(0,i.getConfig)(e);return{allowedThemes:t.AllowedThemes&&t.AllowedThemes.split(",")||[]}})(n.default)},2130:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=m(a(282)),i=m(a(279)),n=m(a(283)),l=m(a(280)),r=m(a(281)),o=m(a(768)),d=m(a(1)),u=m(a(3)),c=m(a(25)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763));function m(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,r.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this,t=this.props.theme,a=[],s=this.props.allowedThemes,i=s.length>1||s[0]&&s[0].trim().length>0;for(var n in c.default.THEMES){if(c.default.THEMES.hasOwnProperty(n))if("continue"===function(){if(i&&s.indexOf(n)<0)return"continue";var l=o.default.extend(!0,{},c.default.THEMES[n]),r="";l.type===t.type&&(r="active"),a.push(u.default.createElement("div",{className:"col-xs-6 col-sm-3 premade-themes",key:"premade-theme-key"+n},u.default.createElement("div",{className:r,onClick:function(){return e.props.updateTheme(l)}},u.default.createElement("label",null,u.default.createElement("img",{className:"img-responsive",src:l.image}),u.default.createElement("div",{className:"theme-label"},f.toTitleCase(l.type))))))}())continue}return u.default.createElement("div",{className:"row appearance-section"},u.default.createElement("div",{className:"clearfix"},a))}}]),t}(u.default.Component);t.default=p,p.propTypes={theme:d.default.object.isRequired,updateTheme:d.default.func.isRequired,allowedThemes:d.default.arrayOf(d.default.string)},p.defaultProps={allowedThemes:[]}},2131:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(284),i=a(2),n=a(778),l=a(96),r=function(e){return e&&e.__esModule?e:{default:e}}(a(2132));t.default=(0,s.connect)(function(e){var t=(0,l.getConfig)(e);return{sendEmailNotifications:"true"===t.SendEmailNotifications,requireEmailVerification:"true"===t.RequireEmailVerification,maxFileSize:parseInt(t.MaxFileSize,10),ldapFirstNameAttributeSet:"true"===t.LdapFirstNameAttributeSet,ldapLastNameAttributeSet:"true"===t.LdapLastNameAttributeSet,samlFirstNameAttributeSet:"true"===t.SamlFirstNameAttributeSet,samlLastNameAttributeSet:"true"===t.SamlLastNameAttributeSet,ldapNicknameAttributeSet:"true"===t.LdapNicknameAttributeSet,samlNicknameAttributeSet:"true"===t.SamlNicknameAttributeSet,positionAttributeSet:"true"===t.PositionAttributeSet}},function(e){return{actions:(0,i.bindActionCreators)({getMe:n.getMe},e)}})(r.default)},2132:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=M(a(185)),i=M(a(282)),n=M(a(279)),l=M(a(283)),r=M(a(280)),o=M(a(281)),d=M(a(1)),u=M(a(3)),c=a(762),f=a(791),m=a(777),p=M(a(837)),g=M(a(769)),h=M(a(25)),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763)),E=M(a(812)),b=M(a(825)),S=M(a(1310));function M(e){return e&&e.__esModule?e:{default:e}}var y=(0,c.defineMessages)({usernameReserved:{id:"user.settings.general.usernameReserved",defaultMessage:"This username is reserved, please choose a new one."},usernameRestrictions:{id:"user.settings.general.usernameRestrictions",defaultMessage:"Username must begin with a letter, and contain between {min} to {max} lowercase characters made up of numbers, letters, and the symbols '.', '-', and '_'."},validEmail:{id:"user.settings.general.validEmail",defaultMessage:"Please enter a valid email address."},emailMatch:{id:"user.settings.general.emailMatch",defaultMessage:"The new emails you entered do not match."},checkEmail:{id:"user.settings.general.checkEmail",defaultMessage:"Check your email at {email} to verify the address."},validImage:{id:"user.settings.general.validImage",defaultMessage:"Only BMP, JPG or PNG images may be used for profile pictures"},imageTooLarge:{id:"user.settings.general.imageTooLarge",defaultMessage:"Unable to upload profile image. File is too large."},uploadImage:{id:"user.settings.general.uploadImage",defaultMessage:"Click 'Edit' to upload an image."},uploadImageMobile:{id:"user.settings.general.mobile.uploadImage",defaultMessage:"Click to upload an image."},fullName:{id:"user.settings.general.fullName",defaultMessage:"Full Name"},nickname:{id:"user.settings.general.nickname",defaultMessage:"Nickname"},username:{id:"user.settings.general.username",defaultMessage:"Username"},profilePicture:{id:"user.settings.general.profilePicture",defaultMessage:"Profile Picture"},close:{id:"user.settings.general.close",defaultMessage:"Close"},position:{id:"user.settings.general.position",defaultMessage:"Position"}}),_="dummySectionName",k="name",N="username",C="nickname",A="position",T="email",w=["image/jpeg","image/png","image/bmp"],F=function(e){function t(e){(0,n.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.submitUsername=function(){var e=(0,s.default)({},a.props.user),t=a.state.username.trim().toLowerCase(),i=a.props.intl.formatMessage,n=v.isValidUsername(t);"Cannot use a reserved word as a username."!==n?n?a.setState({clientError:i(y.usernameRestrictions,{min:h.default.MIN_USERNAME_LENGTH,max:h.default.MAX_USERNAME_LENGTH}),serverError:""}):e.username!==t?(e.username=t,(0,f.trackEvent)("settings","user_settings_update",{field:"username"}),a.submitUser(e,!1)):a.updateSection(""):a.setState({clientError:i(y.usernameReserved),serverError:""})},a.submitNickname=function(){var e=(0,s.default)({},a.props.user),t=a.state.nickname.trim();e.nickname!==t?(e.nickname=t,(0,f.trackEvent)("settings","user_settings_update",{field:"nickname"}),a.submitUser(e,!1)):a.updateSection("")},a.submitName=function(){var e=(0,s.default)({},a.props.user),t=a.state.firstName.trim(),i=a.state.lastName.trim();e.first_name!==t||e.last_name!==i?(e.first_name=t,e.last_name=i,(0,f.trackEvent)("settings","user_settings_update",{field:"fullname"}),a.submitUser(e,!1)):a.updateSection("")},a.submitEmail=function(){var e=(0,s.default)({},a.props.user),t=a.state.email.trim().toLowerCase(),i=a.state.confirmEmail.trim().toLowerCase(),n=a.props.intl.formatMessage;t!==e.email||""!==i&&i!==e.email?""!==t&&v.isEmail(t)?t===i?(e.email=t,(0,f.trackEvent)("settings","user_settings_update",{field:"email"}),a.submitUser(e,!0)):a.setState({emailError:n(y.emailMatch),clientError:"",serverError:""}):a.setState({emailError:n(y.validEmail),clientError:"",serverError:""}):a.updateSection("")},a.submitUser=function(e,t){a.setState({sectionIsSaving:!0}),(0,m.updateUser)(e,function(){a.updateSection(""),a.props.actions.getMe(),a.props.sendEmailNotifications&&a.props.requireEmailVerification&&t&&(p.default.storeLastError({message:a.props.intl.formatMessage(y.checkEmail,{email:e.email})}),p.default.emitChange(),a.setState({emailChangeInProgress:!0}))},function(e){var t=void 0;t=e.message?e.message:e,a.setState({serverError:t,emailError:"",clientError:"",sectionIsSaving:!1})})},a.submitPicture=function(e){if(e.preventDefault(),a.state.pictureFile&&a.submitActive){(0,f.trackEvent)("settings","user_settings_update",{field:"picture"});var t=a.props.intl.formatMessage,s=a.state.pictureFile;w.includes(s.type)?s.size>a.props.maxFileSize?a.setState({clientError:t(y.imageTooLarge),serverError:""}):(a.setState({loadingPicture:!0}),(0,m.uploadProfileImage)(s,function(){a.updateSection(""),a.submitActive=!1},function(e){var t=a.setupInitialState(a.props);t.serverError=e.message,a.setState(t)})):a.setState({clientError:t(y.validImage),serverError:""})}},a.submitPosition=function(){var e=(0,s.default)({},a.props.user),t=a.state.position.trim();e.position!==t?(e.position=t,(0,f.trackEvent)("settings","user_settings_update",{field:"position"}),a.submitUser(e,!1)):a.updateSection("")},a.updateUsername=function(e){a.setState({username:e.target.value})},a.updateFirstName=function(e){a.setState({firstName:e.target.value})},a.updateLastName=function(e){a.setState({lastName:e.target.value})},a.updateNickname=function(e){a.setState({nickname:e.target.value})},a.updatePosition=function(e){a.setState({position:e.target.value})},a.updateEmail=function(e){a.setState({email:e.target.value})},a.updateConfirmEmail=function(e){a.setState({confirmEmail:e.target.value})},a.updatePicture=function(e){e.target.files&&e.target.files[0]?(a.setState({pictureFile:e.target.files[0]}),a.submitActive=!0,a.setState({clientError:null})):a.setState({pictureFile:null})},a.updateSection=function(e){var t=a.state.emailChangeInProgress;a.setState((0,s.default)({},a.setupInitialState(a.props),{emailChangeInProgress:t,clientError:"",serverError:"",emailError:"",sectionIsSaving:!1})),a.submitActive=!1,a.props.updateSection(e)},a.submitActive=!1,a.state=a.setupInitialState(e),a}return(0,o.default)(t,e),(0,l.default)(t,[{key:"setupInitialState",value:function(e){var t=e.user;return{username:t.username,firstName:t.first_name,lastName:t.last_name,nickname:t.nickname,position:t.position,originalEmail:t.email,email:"",confirmEmail:"",pictureFile:null,loadingPicture:!1,emailChangeInProgress:!1,sectionIsSaving:!1}}},{key:"createEmailSection",value:function(){var e=void 0;if("email"===this.props.activeSection){var t=this.props.sendEmailNotifications,a=this.props.requireEmailVerification,s=[],i=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emailHelp1",defaultMessage:"Email is used for sign-in, notifications, and password reset. Email requires verification if changed."});if(t)if(a){if(this.state.emailChangeInProgress){var n=g.default.getCurrentUser().email;n&&(i=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emailHelp4",defaultMessage:"A verification email was sent to {email}.",values:{email:n}}))}}else i=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emailHelp3",defaultMessage:"Email is used for sign-in, notifications, and password reset."});else i=u.default.createElement("div",{className:"setting-list__hint col-sm-12 text-danger"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emailHelp2",defaultMessage:"Email has been disabled by your System Administrator. No notification emails will be sent until it is enabled."}));var l=null;""===this.props.user.auth_service?(s.push(u.default.createElement("div",{key:"currentEmailSetting"},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.currentEmail",defaultMessage:"Current Email"})),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("label",{className:"control-label"},this.state.originalEmail))))),s.push(u.default.createElement("div",{key:"emailSetting"},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.newEmail",defaultMessage:"New Email"})),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{autoFocus:!0,id:"primaryEmail",className:"form-control",type:"email",onChange:this.updateEmail,value:this.state.email}))))),s.push(u.default.createElement("div",{key:"confirmEmailSetting"},u.default.createElement("div",{className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.confirmEmail",defaultMessage:"Confirm Email"})),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{id:"confirmEmail",className:"form-control",type:"email",onChange:this.updateConfirmEmail,value:this.state.confirmEmail}))),i)),l=this.submitEmail):this.props.user.auth_service===h.default.GITLAB_SERVICE?s.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"form-group"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emailGitlabCantUpdate",defaultMessage:"Login occurs through GitLab. Email cannot be updated. Email address used for notifications is {email}.",values:{email:this.state.originalEmail}})),i)):this.props.user.auth_service===h.default.GOOGLE_SERVICE?s.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"form-group"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emailGoogleCantUpdate",defaultMessage:"Login occurs through Google Apps. Email cannot be updated. Email address used for notifications is {email}.",values:{email:this.state.originalEmail}})),i)):this.props.user.auth_service===h.default.OFFICE365_SERVICE?s.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"form-group"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emailOffice365CantUpdate",defaultMessage:"Login occurs through Office 365. Email cannot be updated. Email address used for notifications is {email}.",values:{email:this.state.originalEmail}})),i)):this.props.user.auth_service===h.default.LDAP_SERVICE?s.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"padding-bottom"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emailLdapCantUpdate",defaultMessage:"Login occurs through AD/LDAP. Email cannot be updated. Email address used for notifications is {email}.",values:{email:this.state.originalEmail}})))):this.props.user.auth_service===h.default.SAML_SERVICE&&s.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"padding-bottom"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emailSamlCantUpdate",defaultMessage:"Login occurs through SAML. Email cannot be updated. Email address used for notifications is {email}.",values:{email:this.state.originalEmail}})),i)),e=u.default.createElement(E.default,{title:u.default.createElement(c.FormattedMessage,{id:"user.settings.general.email",defaultMessage:"Email"}),inputs:s,submit:l,saving:this.state.sectionIsSaving,serverError:this.state.serverError,clientError:this.state.emailError,updateSection:this.updateSection})}else{var r="";if(""===this.props.user.auth_service)if(this.state.emailChangeInProgress){var o=g.default.getCurrentUser().email;r=o?u.default.createElement(c.FormattedHTMLMessage,{id:"user.settings.general.newAddress",defaultMessage:"New Address: {email}<br />Check your email to verify the above address.",values:{email:o}}):u.default.createElement(c.FormattedMessage,{id:"user.settings.general.checkEmailNoAddress",defaultMessage:"Check your email to verify your new address"})}else r=g.default.getCurrentUser().email;else this.props.user.auth_service===h.default.GITLAB_SERVICE?r=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.loginGitlab",defaultMessage:"Login done through GitLab ({email})",values:{email:this.state.originalEmail}}):this.props.user.auth_service===h.default.GOOGLE_SERVICE?r=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.loginGoogle",defaultMessage:"Login done through Google Apps ({email})",values:{email:this.state.originalEmail}}):this.props.user.auth_service===h.default.OFFICE365_SERVICE?r=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.loginOffice365",defaultMessage:"Login done through Office 365 ({email})",values:{email:this.state.originalEmail}}):this.props.user.auth_service===h.default.LDAP_SERVICE?r=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.loginLdap",defaultMessage:"Login done through AD/LDAP ({email})",values:{email:this.state.originalEmail}}):this.props.user.auth_service===h.default.SAML_SERVICE&&(r=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.loginSaml",defaultMessage:"Login done through SAML ({email})",values:{email:this.state.originalEmail}}));e=u.default.createElement(b.default,{title:u.default.createElement(c.FormattedMessage,{id:"user.settings.general.email",defaultMessage:"Email"}),describe:r,focused:this.props.prevActiveSection===A,section:"email",updateSection:this.updateSection})}return e}},{key:"render",value:function(){var e=this,t=this.props.user,a=this.props.intl.formatMessage,s=null;this.state.clientError&&(s=this.state.clientError);var i=null;this.state.serverError&&(i=this.state.serverError);var n=void 0,l=[];if("name"===this.props.activeSection){var r=void 0,o=null;if("ldap"===this.props.user.auth_service&&(this.props.ldapFirstNameAttributeSet||this.props.ldapLastNameAttributeSet)||this.props.user.auth_service===h.default.SAML_SERVICE&&(this.props.samlFirstNameAttributeSet||this.props.samlLastNameAttributeSet))r=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.general.field_handled_externally",defaultMessage:"This field is handled through your login provider. If you want to change it, you need to do so through your login provider."}));else{l.push(u.default.createElement("div",{key:"firstNameSetting",className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.firstName",defaultMessage:"First Name"})),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{id:"firstName",autoFocus:!0,className:"form-control",type:"text",onChange:this.updateFirstName,value:this.state.firstName,onFocus:v.moveCursorToEnd})))),l.push(u.default.createElement("div",{key:"lastNameSetting",className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.lastName",defaultMessage:"Last Name"})),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{id:"lastName",className:"form-control",type:"text",onChange:this.updateLastName,value:this.state.lastName}))));var d=u.default.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),this.updateSection(""),this.props.updateTab("notifications")}.bind(this)},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.notificationsLink",defaultMessage:"Notifications"}));r=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.general.notificationsExtra",defaultMessage:"By default, you will receive mention notifications when someone types your first name. Go to {notify} settings to change this default.",values:{notify:d}})),o=this.submitName}n=u.default.createElement(E.default,{title:a(y.fullName),inputs:l,submit:o,saving:this.state.sectionIsSaving,serverError:i,clientError:s,updateSection:this.updateSection,extraInfo:r})}else{var f="";t.first_name&&t.last_name?f=t.first_name+" "+t.last_name:t.first_name?f=t.first_name:t.last_name?f=t.last_name:(f=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emptyName",defaultMessage:"Click 'Edit' to add your full name"}),v.isMobile()&&(f=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.mobile.emptyName",defaultMessage:"Click to add your full name"}))),n=u.default.createElement(b.default,{title:a(y.fullName),describe:f,focused:this.props.prevActiveSection===_,section:"name",updateSection:this.updateSection})}var m=void 0;if("nickname"===this.props.activeSection){var p=void 0,M=null;if("ldap"===this.props.user.auth_service&&this.props.ldapNicknameAttributeSet||this.props.user.auth_service===h.default.SAML_SERVICE&&this.props.samlNicknameAttributeSet)p=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.general.field_handled_externally",defaultMessage:"This field is handled through your login provider. If you want to change it, you need to do so though your login provider."}));else{var A=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.nickname",defaultMessage:"Nickname"});v.isMobile()&&(A=""),l.push(u.default.createElement("div",{key:"nicknameSetting",className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},A),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{id:"nickname",autoFocus:!0,className:"form-control",type:"text",onChange:this.updateNickname,value:this.state.nickname,maxLength:h.default.MAX_NICKNAME_LENGTH,autoCapitalize:"off"})))),p=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.general.nicknameExtra",defaultMessage:"Use Nickname for a name you might be called that is different from your first name and username. This is most often used when two or more people have similar sounding names and usernames."})),M=this.submitNickname}m=u.default.createElement(E.default,{title:a(y.nickname),inputs:l,submit:M,saving:this.state.sectionIsSaving,serverError:i,clientError:s,updateSection:this.updateSection,extraInfo:p})}else{var w="";t.nickname?w=t.nickname:(w=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emptyNickname",defaultMessage:"Click 'Edit' to add a nickname"}),v.isMobile()&&(w=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.mobile.emptyNickname",defaultMessage:"Click to add a nickname"}))),m=u.default.createElement(b.default,{title:a(y.nickname),describe:w,focused:this.props.prevActiveSection===N,section:"nickname",updateSection:this.updateSection})}var F=void 0;if("username"===this.props.activeSection){var I=void 0,L=null;if(""===this.props.user.auth_service){var O=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.username",defaultMessage:"Username"});v.isMobile()&&(O=""),l.push(u.default.createElement("div",{key:"usernameSetting",className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},O),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{id:"username",autoFocus:!0,maxLength:h.default.MAX_USERNAME_LENGTH,className:"form-control",type:"text",onChange:this.updateUsername,value:this.state.username,autoCapitalize:"off",onFocus:v.moveCursorToEnd})))),I=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.general.usernameInfo",defaultMessage:"Pick something easy for teammates to recognize and recall."})),L=this.submitUsername}else I=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.general.field_handled_externally",defaultMessage:"This field is handled through your login provider. If you want to change it, you need to do so though your login provider."}));F=u.default.createElement(E.default,{title:a(y.username),inputs:l,submit:L,saving:this.state.sectionIsSaving,serverError:i,clientError:s,updateSection:this.updateSection,extraInfo:I})}else F=u.default.createElement(b.default,{title:a(y.username),describe:g.default.getCurrentUser().username,focused:this.props.prevActiveSection===k,section:"username",updateSection:this.updateSection});var R=void 0;if("position"===this.props.activeSection){var P=void 0,D=null;if("ldap"!==this.props.user.auth_service&&this.props.user.auth_service!==h.default.SAML_SERVICE||!this.props.positionAttributeSet){var U=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.position",defaultMessage:"Position"});v.isMobile()&&(U=""),l.push(u.default.createElement("div",{key:"positionSetting",className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},U),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{id:"position",autoFocus:!0,className:"form-control",type:"text",onChange:this.updatePosition,value:this.state.position,maxLength:h.default.MAX_POSITION_LENGTH,autoCapitalize:"off",onFocus:v.moveCursorToEnd})))),P=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.general.positionExtra",defaultMessage:"Use Position for your role or job title. This will be shown in your profile popover."})),D=this.submitPosition}else P=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.general.field_handled_externally",defaultMessage:"This field is handled through your login provider. If you want to change it, you need to do so though your login provider."}));R=u.default.createElement(E.default,{title:a(y.position),inputs:l,submit:D,saving:this.state.sectionIsSaving,serverError:i,clientError:s,updateSection:this.updateSection,extraInfo:P})}else{var x="";t.position?x=t.position:(x=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.emptyPosition",defaultMessage:"Click 'Edit' to add your job title / position"}),v.isMobile()&&(x=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.mobile.emptyPosition",defaultMessage:"Click to add your job title / position"}))),R=u.default.createElement(b.default,{title:a(y.position),describe:x,focused:this.props.prevActiveSection===C,section:"position",updateSection:this.updateSection})}var j=this.createEmailSection(),z=void 0;if("picture"===this.props.activeSection)z=u.default.createElement(S.default,{title:a(y.profilePicture),onSubmit:this.submitPicture,src:v.imageURLForUser(t),serverError:i,clientError:s,updateSection:function(t){e.updateSection(""),t.preventDefault()},file:this.state.pictureFile,onFileChange:this.updatePicture,submitActive:this.submitActive,loadingPicture:this.state.loadingPicture});else{var G=a(y.uploadImage);v.isMobile()&&(G=a(y.uploadImageMobile)),t.last_picture_update&&(G=u.default.createElement(c.FormattedMessage,{id:"user.settings.general.imageUpdated",defaultMessage:"Image last updated {date}",values:{date:u.default.createElement(c.FormattedDate,{value:new Date(t.last_picture_update),day:"2-digit",month:"short",year:"numeric"})}})),z=u.default.createElement(b.default,{title:a(y.profilePicture),describe:G,focused:this.props.prevActiveSection===T,section:"picture",updateSection:this.updateSection})}return u.default.createElement("div",{id:"generalSettings"},u.default.createElement("div",{className:"modal-header"},u.default.createElement("button",{id:"closeUserSettings",type:"button",className:"close","data-dismiss":"modal","aria-label":a(y.close),onClick:this.props.closeModal},u.default.createElement("span",{"aria-hidden":"true"},"×")),u.default.createElement("h4",{className:"modal-title",ref:"title"},u.default.createElement("div",{className:"modal-back"},u.default.createElement("i",{className:"fa fa-angle-left",title:v.localizeMessage("generic_icons.collapse","Collapse Icon"),onClick:this.props.collapseModal})),u.default.createElement(c.FormattedMessage,{id:"user.settings.general.title",defaultMessage:"General Settings"}))),u.default.createElement("div",{className:"user-settings"},u.default.createElement("h3",{id:"generalSettingsTitle",className:"tab-header"},u.default.createElement(c.FormattedMessage,{id:"user.settings.general.title",defaultMessage:"General Settings"})),u.default.createElement("div",{className:"divider-dark first"}),n,u.default.createElement("div",{className:"divider-light"}),F,u.default.createElement("div",{className:"divider-light"}),m,u.default.createElement("div",{className:"divider-light"}),R,u.default.createElement("div",{className:"divider-light"}),j,u.default.createElement("div",{className:"divider-light"}),z,u.default.createElement("div",{className:"divider-dark"})))}}]),t}(u.default.Component);F.propTypes={intl:c.intlShape.isRequired,user:d.default.object.isRequired,updateSection:d.default.func.isRequired,updateTab:d.default.func.isRequired,activeSection:d.default.string.isRequired,prevActiveSection:d.default.string.isRequired,closeModal:d.default.func.isRequired,collapseModal:d.default.func.isRequired,actions:d.default.shape({getMe:d.default.func.isRequired}).isRequired,sendEmailNotifications:d.default.bool,requireEmailVerification:d.default.bool,maxFileSize:d.default.number,ldapFirstNameAttributeSet:d.default.bool,ldapLastNameAttributeSet:d.default.bool,samlFirstNameAttributeSet:d.default.bool,samlLastNameAttributeSet:d.default.bool,ldapNicknameAttributeSet:d.default.bool,samlNicknameAttributeSet:d.default.bool,positionAttributeSet:d.default.bool},t.default=(0,c.injectIntl)(F)},2133:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(284),i=a(96),n=function(e){return e&&e.__esModule?e:{default:e}}(a(2134));t.default=(0,s.connect)(function(e){var t=(0,i.getConfig)(e);return{sendEmailNotifications:"true"===t.SendEmailNotifications,enableEmailBatching:"true"===t.EnableEmailBatching,siteName:t.SiteName,sendPushNotifications:"true"===t.SendPushNotifications,enableAutoResponder:"true"===t.ExperimentalEnableAutomaticReplies}})(n.default)},2134:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=M(a(282)),i=M(a(279)),n=M(a(283)),l=M(a(280)),r=M(a(281)),o=M(a(1)),d=M(a(3)),u=a(762),c=a(777),f=M(a(769)),m=a(25),p=M(m),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763)),h=M(a(812)),v=M(a(825)),E=M(a(2135)),b=M(a(2136)),S=M(a(2137));function M(e){return e&&e.__esModule?e:{default:e}}function y(){var e=f.default.getCurrentUser(),t=m.NotificationLevels.MENTION,a="true",s="never",i="true",n=m.NotificationLevels.MENTION,l=p.default.UserStatuses.AWAY,r=!1,o=g.localizeMessage("user.settings.notifications.autoResponderDefault","Hello, I am out of office and unable to respond to messages.");e.notify_props&&(e.notify_props.desktop&&(t=e.notify_props.desktop),e.notify_props.desktop_sound&&(a=e.notify_props.desktop_sound),e.notify_props.comments&&(s=e.notify_props.comments),e.notify_props.email&&(i=e.notify_props.email),e.notify_props.push&&(n=e.notify_props.push),e.notify_props.push_status&&(l=e.notify_props.push_status),e.notify_props.auto_responder_active&&(r="true"===e.notify_props.auto_responder_active),e.notify_props.auto_responder_message&&(o=e.notify_props.auto_responder_message));var d=!1,u="",c=!1,h=!1;if(e.notify_props){if(e.notify_props.mention_keys){var v=e.notify_props.mention_keys.split(",");-1===v.indexOf(e.username)?d=!1:(d=!0,v.splice(v.indexOf(e.username),1),-1!==v.indexOf("@"+e.username)&&v.splice(v.indexOf("@"+e.username),1)),u=v.join(",")}e.notify_props.first_name&&(c="true"===e.notify_props.first_name),e.notify_props.channel&&(h="true"===e.notify_props.channel)}return{desktopActivity:t,enableEmail:i,pushActivity:n,pushStatus:l,desktopSound:a,usernameKey:d,customKeys:u,customKeysChecked:u.length>0,firstNameKey:c,channelKey:h,autoResponderActive:r,autoResponderMessage:o,notifyCommentsLevel:s,isSaving:!1}}var _={desktop:"dummySectionName",email:"desktop",push:"email",keys:"push",comments:"keys"},k=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleSubmit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.enableEmail,t={};t.user_id=a.props.user.id,t.email=e,t.desktop_sound=a.state.desktopSound,t.desktop=a.state.desktopActivity,t.push=a.state.pushActivity,t.push_status=a.state.pushStatus,t.comments=a.state.notifyCommentsLevel,t.auto_responder_active=a.state.autoResponderActive.toString(),t.auto_responder_message=a.state.autoResponderMessage,t.auto_responder_message&&""!==t.auto_responder_message||(t.auto_responder_message=g.localizeMessage("user.settings.notifications.autoResponderDefault","Hello, I am out of office and unable to respond to messages."));var s=[];a.state.usernameKey&&s.push(a.props.user.username);var i=s.join(",");a.state.customKeys.length>0&&a.state.customKeysChecked&&(i+=","+a.state.customKeys),t.mention_keys=i,t.first_name=a.state.firstNameKey.toString(),t.channel=a.state.channelKey.toString(),a.setState({isSaving:!0}),(0,c.updateUserNotifyProps)(t,function(){a.props.updateSection("")},function(e){a.setState({serverError:e.message,isSaving:!1})})},a.handleCancel=function(e){e&&e.preventDefault(),a.updateState()},a.handleUpdateSection=function(e){e?a.props.updateSection(e):(a.props.updateSection(""),a.handleCancel())},a.setStateValue=function(e,t){var s={};s[e]=t,a.setState(s)},a.updateSection=function(e){a.updateState(),a.props.updateSection(e)},a.updateState=function(){var e=y();g.areObjectsEqual(e,a.state)||a.setState(e),a.setState({isSaving:!1})},a.onListenerChange=function(){a.updateState()},a.handleEmailRadio=function(e){a.setState({enableEmail:e}),a.refs.wrapper.focus()},a.updateUsernameKey=function(e){a.setState({usernameKey:e})},a.updateFirstNameKey=function(e){a.setState({firstNameKey:e})},a.updateChannelKey=function(e){a.setState({channelKey:e})},a.updateCustomMentionKeys=function(){if(a.refs.customcheck.checked){var e=a.refs.custommentions.value;a.setState({customKeys:e.replace(/ /g,""),customKeysChecked:!0})}else a.setState({customKeys:"",customKeysChecked:!1})},a.onCustomChange=function(){a.refs.customcheck.checked=!0,a.updateCustomMentionKeys()},a.createPushNotificationSection=function(){if("push"===a.props.activeSection){var e=[],t=null,s=null;if(a.props.sendPushNotifications){var i=[!1,!1,!1];a.state.pushActivity===m.NotificationLevels.ALL?i[0]=!0:a.state.pushActivity===m.NotificationLevels.NONE?i[2]=!0:i[1]=!0;var n=[!1,!1,!1];a.state.pushStatus===p.default.UserStatuses.ONLINE?n[0]=!0:a.state.pushStatus===p.default.UserStatuses.AWAY?n[1]=!0:n[2]=!0;var l=void 0;a.state.pushActivity!==m.NotificationLevels.NONE&&(l=d.default.createElement("div",null,d.default.createElement("hr",null),d.default.createElement("label",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.push_notification.status",defaultMessage:"Trigger push notifications when"})),d.default.createElement("br",null),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"pushNotificationOnline",type:"radio",name:"pushNotificationStatus",checked:n[0],onChange:a.handlePushStatusRadio.bind(a,p.default.UserStatuses.ONLINE)}),d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.online",defaultMessage:"Online, away or offline"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"pushNotificationAway",type:"radio",name:"pushNotificationStatus",checked:n[1],onChange:a.handlePushStatusRadio.bind(a,p.default.UserStatuses.AWAY)}),d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.away",defaultMessage:"Away or offline"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"pushNotificationOffline",type:"radio",name:"pushNotificationStatus",checked:n[2],onChange:a.handlePushStatusRadio.bind(a,p.default.UserStatuses.OFFLINE)}),d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.offline",defaultMessage:"Offline"})))),t=d.default.createElement("span",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.status_info",defaultMessage:"Notification alerts are only pushed to your mobile device when your online status matches the selection above."}))),e.push(d.default.createElement("div",{key:"userNotificationLevelOption"},d.default.createElement("label",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.send",defaultMessage:"Send mobile push notifications"})),d.default.createElement("br",null),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"pushNotificationAllActivity",type:"radio",name:"pushNotificationLevel",checked:i[0],onChange:a.handlePushRadio.bind(a,m.NotificationLevels.ALL)}),d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.allActivity",defaultMessage:"For all activity"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"pushNotificationMentions",type:"radio",name:"pushNotificationLevel",checked:i[1],onChange:a.handlePushRadio.bind(a,m.NotificationLevels.MENTION)}),d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.onlyMentions",defaultMessage:"For mentions and direct messages"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"pushNotificationNever",type:"radio",name:"pushNotificationLevel",checked:i[2],onChange:a.handlePushRadio.bind(a,m.NotificationLevels.NONE)}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.never",defaultMessage:"Never"}))),d.default.createElement("br",null),d.default.createElement("span",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.info",defaultMessage:"Notification alerts are pushed to your mobile device when there is activity in Mattermost."})),l)),s=a.handleSubmit}else e.push(d.default.createElement("div",{key:"oauthEmailInfo",className:"padding-top"},d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.disabled_long",defaultMessage:"Push notifications have not been enabled by your System Administrator."})));return d.default.createElement(h.default,{title:g.localizeMessage("user.settings.notifications.push","Mobile push notifications"),extraInfo:t,inputs:e,submit:s,server_error:a.state.serverError,updateSection:a.handleUpdateSection})}var r="";return r=a.state.pushActivity===m.NotificationLevels.ALL?a.state.pushStatus===p.default.UserStatuses.AWAY?d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.allActivityAway",defaultMessage:"For all activity when away or offline"}):a.state.pushStatus===p.default.UserStatuses.OFFLINE?d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.allActivityOffline",defaultMessage:"For all activity when offline"}):d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.allActivityOnline",defaultMessage:"For all activity when online, away or offline"}):a.state.pushActivity===m.NotificationLevels.NONE?d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.never",defaultMessage:"Never"}):a.props.sendPushNotifications?a.state.pushStatus===p.default.UserStatuses.AWAY?d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.onlyMentionsAway",defaultMessage:"For mentions and direct messages when away or offline"}):a.state.pushStatus===p.default.UserStatuses.OFFLINE?d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.onlyMentionsOffline",defaultMessage:"For mentions and direct messages when offline"}):d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.onlyMentionsOnline",defaultMessage:"For mentions and direct messages when online, away or offline"}):d.default.createElement(u.FormattedMessage,{id:"user.settings.push_notification.disabled",defaultMessage:"Push notifications are not enabled"}),d.default.createElement(v.default,{title:g.localizeMessage("user.settings.notifications.push","Mobile push notifications"),describe:r,focused:a.props.prevActiveSection===_.push,section:"push",updateSection:a.handleUpdateSection})},a.state=y(),a}return(0,r.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){f.default.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){f.default.removeChangeListener(this.onListenerChange)}},{key:"handleNotifyCommentsRadio",value:function(e){this.setState({notifyCommentsLevel:e}),this.refs.wrapper.focus()}},{key:"handlePushRadio",value:function(e){this.setState({pushActivity:e}),this.refs.wrapper.focus()}},{key:"handlePushStatusRadio",value:function(e){this.setState({pushStatus:e}),this.refs.wrapper.focus()}},{key:"render",value:function(){var e=this,t=this.state.serverError,a=this.props.user,s=void 0;if("keys"===this.props.activeSection){var i=[];if(a.first_name){i.push(d.default.createElement("div",{key:"userNotificationFirstNameOption"},d.default.createElement("div",{className:"checkbox"},d.default.createElement("label",null,d.default.createElement("input",{id:"notificationTriggerFirst",type:"checkbox",checked:this.state.firstNameKey,onChange:function(t){e.updateFirstNameKey(t.target.checked)}}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.sensitiveName",defaultMessage:'Your case sensitive first name "{first_name}"',values:{first_name:a.first_name}})))))}i.push(d.default.createElement("div",{key:"userNotificationUsernameOption"},d.default.createElement("div",{className:"checkbox"},d.default.createElement("label",null,d.default.createElement("input",{id:"notificationTriggerUsername",type:"checkbox",checked:this.state.usernameKey,onChange:function(t){e.updateUsernameKey(t.target.checked)}}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.sensitiveUsername",defaultMessage:'Your non-case sensitive username "{username}"',values:{username:a.username}})))));i.push(d.default.createElement("div",{key:"userNotificationChannelOption"},d.default.createElement("div",{className:"checkbox"},d.default.createElement("label",null,d.default.createElement("input",{id:"notificationTriggerShouts",type:"checkbox",checked:this.state.channelKey,onChange:function(t){e.updateChannelKey(t.target.checked)}}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.channelWide",defaultMessage:'Channel-wide mentions "@channel", "@all", "@here"'}))))),i.push(d.default.createElement("div",{key:"userNotificationCustomOption"},d.default.createElement("div",{className:"checkbox"},d.default.createElement("label",null,d.default.createElement("input",{id:"notificationTriggerCustom",ref:"customcheck",type:"checkbox",checked:this.state.customKeysChecked,onChange:this.updateCustomMentionKeys}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.sensitiveWords",defaultMessage:"Other non-case sensitive words, separated by commas:"}))),d.default.createElement("input",{id:"notificationTriggerCustomText",autoFocus:this.state.customKeysChecked,ref:"custommentions",className:"form-control mentions-input",type:"text",defaultValue:this.state.customKeys,onChange:this.onCustomChange,onFocus:g.moveCursorToEnd})));var n=d.default.createElement("span",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.mentionsInfo",defaultMessage:"Mentions trigger when someone sends a message that includes your username (@{username}) or any of the options selected above.",values:{username:a.username}}));s=d.default.createElement(h.default,{title:g.localizeMessage("user.settings.notifications.wordsTrigger","Words that trigger mentions"),inputs:i,submit:this.handleSubmit,saving:this.state.isSaving,server_error:t,updateSection:this.handleUpdateSection,extraInfo:n})}else{var l=["@"+a.username];this.state.firstNameKey&&l.push(a.first_name),this.state.usernameKey&&l.push(a.username),this.state.channelKey&&(l.push("@channel"),l.push("@all"),l.push("@here")),this.state.customKeys.length>0&&(l=l.concat(this.state.customKeys.split(",")));for(var r="",o=0;o<l.length;o++)""!==l[o]&&(r+='"'+l[o]+'", ');r=r.length>0?r.substring(0,r.length-2):d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.noWords",defaultMessage:"No words configured"}),s=d.default.createElement(v.default,{title:g.localizeMessage("user.settings.notifications.wordsTrigger","Words that trigger mentions"),describe:r,focused:this.props.prevActiveSection===_.keys,section:"keys",updateSection:this.handleUpdateSection})}var c=void 0;if("comments"===this.props.activeSection){var f=[!1,!1,!1];"never"===this.state.notifyCommentsLevel?f[2]=!0:"root"===this.state.notifyCommentsLevel?f[1]=!0:f[0]=!0;var m=[];m.push(d.default.createElement("div",{key:"userNotificationLevelOption"},d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"notificationCommentsAny",type:"radio",name:"commentsNotificationLevel",checked:f[0],onChange:this.handleNotifyCommentsRadio.bind(this,"any")}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.commentsAny",defaultMessage:"Mention any comments in a thread you participated in (This will include both mentions to your root post and any comments after you commented on a post)"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"notificationCommentsRoot",type:"radio",name:"commentsNotificationLevel",checked:f[1],onChange:this.handleNotifyCommentsRadio.bind(this,"root")}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.commentsRoot",defaultMessage:"Mention any comments on your post"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"notificationCommentsNever",type:"radio",name:"commentsNotificationLevel",checked:f[2],onChange:this.handleNotifyCommentsRadio.bind(this,"never")}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.commentsNever",defaultMessage:"No mentions for comments"})))));var p=d.default.createElement("span",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.commentsInfo",defaultMessage:"In addition to notifications for when you're mentioned, select if you would like to receive notifications on reply threads."}));c=d.default.createElement(h.default,{title:g.localizeMessage("user.settings.notifications.comments","Reply notifications"),extraInfo:p,inputs:m,submit:this.handleSubmit,saving:this.state.isSaving,server_error:t,updateSection:this.handleUpdateSection})}else{var M="";M="never"===this.state.notifyCommentsLevel?d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.commentsNever",defaultMessage:"Do not trigger notifications on messages in reply threads unless I'm mentioned"}):"root"===this.state.notifyCommentsLevel?d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.commentsRoot",defaultMessage:"Trigger notifications on messages in threads that I start"}):d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.commentsAny",defaultMessage:"Trigger notifications on messages in reply threads that I start or participate in"}),c=d.default.createElement(v.default,{title:g.localizeMessage("user.settings.notifications.comments","Reply notifications"),describe:M,focused:this.props.prevActiveSection===_.comments,section:"comments",updateSection:this.handleUpdateSection})}var y=void 0;if(this.props.enableAutoResponder)if("auto-responder"===this.props.activeSection)y=d.default.createElement("div",null,d.default.createElement(S.default,{autoResponderActive:this.state.autoResponderActive,autoResponderMessage:this.state.autoResponderMessage,updateSection:this.updateSection,setParentState:this.setStateValue,submit:this.handleSubmit,error:this.state.serverError,saving:this.state.isSaving}),d.default.createElement("div",{className:"divider-dark"}));else{var k=this.state.autoResponderActive?d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.autoResponderEnabled",defaultMessage:"Enabled"}):d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.autoResponderDisabled",defaultMessage:"Disabled"});y=d.default.createElement("div",null,d.default.createElement(v.default,{title:d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.autoResponder",defaultMessage:"Automatic Direct Message Replies"}),width:"medium",describe:k,section:"auto-responder",updateSection:this.updateSection}),d.default.createElement("div",{className:"divider-dark"}))}var N=this.createPushNotificationSection(),C="true"===this.state.enableEmail;return d.default.createElement("div",null,d.default.createElement("div",{className:"modal-header"},d.default.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal",onClick:this.props.closeModal},d.default.createElement("span",{"aria-hidden":"true"},"×")),d.default.createElement("h4",{className:"modal-title",ref:"title"},d.default.createElement("div",{className:"modal-back"},d.default.createElement("i",{className:"fa fa-angle-left",title:g.localizeMessage("generic_icons.collapse","Collapse Icon"),onClick:this.props.collapseModal})),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.title",defaultMessage:"Notification Settings"}))),d.default.createElement("div",{ref:"wrapper",className:"user-settings"},d.default.createElement("h3",{className:"tab-header"},d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.header",defaultMessage:"Notifications"})),d.default.createElement("div",{className:"divider-dark first"}),d.default.createElement(E.default,{activity:this.state.desktopActivity,sound:this.state.desktopSound,updateSection:this.updateSection,setParentState:this.setStateValue,submit:this.handleSubmit,saving:this.state.isSaving,cancel:this.handleCancel,error:this.state.serverError,active:"desktop"===this.props.activeSection,focused:this.props.prevActiveSection===_.desktop}),d.default.createElement("div",{className:"divider-light"}),d.default.createElement(b.default,{activeSection:this.props.activeSection,updateSection:this.props.updateSection,enableEmail:C,emailInterval:g.getEmailInterval(this.props.enableEmailBatching,C),onSubmit:this.handleSubmit,onCancel:this.handleCancel,saving:this.state.isSaving,serverError:this.state.serverError,focused:this.props.prevActiveSection===_.email,sendEmailNotifications:this.props.sendEmailNotifications,enableEmailBatching:this.props.enableEmailBatching,siteName:this.props.siteName}),d.default.createElement("div",{className:"divider-light"}),N,d.default.createElement("div",{className:"divider-light"}),s,d.default.createElement("div",{className:"divider-light"}),c,d.default.createElement("div",{className:"divider-light"}),y,d.default.createElement("div",{className:"divider-dark"})))}}]),t}(d.default.Component);t.default=k,k.propTypes={user:o.default.object,updateSection:o.default.func,activeSection:o.default.string,prevActiveSection:o.default.string,closeModal:o.default.func.isRequired,collapseModal:o.default.func.isRequired,sendEmailNotifications:o.default.bool,enableEmailBatching:o.default.bool,siteName:o.default.string,sendPushNotifications:o.default.bool,enableAutoResponder:o.default.bool},k.defaultProps={user:null,activeSection:"",prevActiveSection:"",activeTab:""}},2135:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=h(a(282)),i=h(a(279)),n=h(a(283)),l=h(a(280)),r=h(a(281)),o=h(a(1)),d=h(a(3)),u=a(762),c=a(25),f=h(c),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763)),p=h(a(812)),g=h(a(825));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){var e,a,n,r;(0,i.default)(this,t);for(var o=arguments.length,h=Array(o),v=0;v<o;v++)h[v]=arguments[v];return a=n=(0,l.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(h))),n.handleMinUpdateSection=function(e){n.props.updateSection(e),n.props.cancel()},n.handleMaxUpdateSection=function(e){n.props.updateSection(e)},n.handleOnChange=function(e){var t=e.currentTarget.getAttribute("data-key"),a=e.currentTarget.getAttribute("data-value");n.props.setParentState(t,a)},n.buildMaximizedSetting=function(){var e=[],t=[!1,!1,!1];n.props.activity===c.NotificationLevels.MENTION?t[1]=!0:n.props.activity===c.NotificationLevels.NONE?t[2]=!0:t[0]=!0;var a=void 0;if(n.props.activity!==c.NotificationLevels.NONE){var s=[!1,!1];"false"===n.props.sound?s[1]=!0:s[0]=!0,a=m.hasSoundOptions()?d.default.createElement("div",null,d.default.createElement("hr",null),d.default.createElement("label",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.desktop.sound",defaultMessage:"Notification sound"})),d.default.createElement("br",null),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"soundOn",type:"radio",name:"notificationSounds",checked:s[0],"data-key":"desktopSound","data-value":"true",onChange:n.handleOnChange}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.on",defaultMessage:"On"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"soundOff",type:"radio",name:"notificationSounds",checked:s[1],"data-key":"desktopSound","data-value":"false",onChange:n.handleOnChange}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.off",defaultMessage:"Off"})),d.default.createElement("br",null)),d.default.createElement("br",null),d.default.createElement("span",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.sounds_info",defaultMessage:"Notification sounds are available on IE11, Safari, Chrome and Mattermost Desktop Apps."}))):d.default.createElement("div",null,d.default.createElement("hr",null),d.default.createElement("label",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.desktop.sound",defaultMessage:"Notification sound"})),d.default.createElement("br",null),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.soundConfig",defaultMessage:"Please configure notification sounds in your browser settings"}))}return e.push(d.default.createElement("div",{key:"userNotificationLevelOption"},d.default.createElement("label",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.desktop",defaultMessage:"Send desktop notifications"})),d.default.createElement("br",null),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"desktopNotificationAllActivity",type:"radio",name:"desktopNotificationLevel",checked:t[0],"data-key":"desktopActivity","data-value":c.NotificationLevels.ALL,onChange:n.handleOnChange}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.allActivity",defaultMessage:"For all activity"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"desktopNotificationMentions",type:"radio",name:"desktopNotificationLevel",checked:t[1],"data-key":"desktopActivity","data-value":c.NotificationLevels.MENTION,onChange:n.handleOnChange}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.onlyMentions",defaultMessage:"Only for mentions and direct messages"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"desktopNotificationNever",type:"radio",name:"desktopNotificationLevel",checked:t[2],"data-key":"desktopActivity","data-value":c.NotificationLevels.NONE,onChange:n.handleOnChange}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.never",defaultMessage:"Never"}))),d.default.createElement("br",null),d.default.createElement("span",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.info",defaultMessage:"Desktop notifications are available on Edge, Firefox, Safari, Chrome and Mattermost Desktop Apps."})),a)),d.default.createElement(p.default,{title:m.localizeMessage("user.settings.notifications.desktop.title","Desktop notifications"),inputs:e,submit:n.props.submit,saving:n.props.saving,server_error:n.props.error,updateSection:n.handleMaxUpdateSection})},n.buildMinimizedSetting=function(){var e="";return e=n.props.activity===c.NotificationLevels.MENTION?m.hasSoundOptions()&&"false"!==n.props.sound?d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.desktop.mentionsSoundTimed",defaultMessage:"For mentions and direct messages, with sound, shown for {seconds} seconds",values:{seconds:f.default.DEFAULT_NOTIFICATION_DURATION/1e3}}):m.hasSoundOptions()&&"false"===n.props.sound?d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.desktop.mentionsNoSoundTimed",defaultMessage:"For mentions and direct messages, without sound, shown for {seconds} seconds",values:{seconds:f.default.DEFAULT_NOTIFICATION_DURATION/1e3}}):d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.desktop.mentionsSoundHiddenTimed",defaultMessage:"For mentions and direct messages, shown for {seconds} seconds",values:{seconds:f.default.DEFAULT_NOTIFICATION_DURATION/1e3}}):n.props.activity===c.NotificationLevels.NONE?d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.off",defaultMessage:"Off"}):m.hasSoundOptions()&&"false"!==n.props.sound?d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.desktop.allSoundTimed",defaultMessage:"For all activity, with sound, shown for {seconds} seconds",values:{seconds:f.default.DEFAULT_NOTIFICATION_DURATION/1e3}}):m.hasSoundOptions()&&"false"===n.props.sound?d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.desktop.allNoSoundTimed",defaultMessage:"For all activity, without sound, shown for {seconds} seconds",values:{seconds:f.default.DEFAULT_NOTIFICATION_DURATION/1e3}}):d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.desktop.allSoundHiddenTimed",defaultMessage:"For all activity, shown for {seconds} seconds",values:{seconds:f.default.DEFAULT_NOTIFICATION_DURATION/1e3}}),d.default.createElement(g.default,{title:m.localizeMessage("user.settings.notifications.desktop.title","Desktop notifications"),describe:e,focused:n.props.focused,section:"desktop",updateSection:n.handleMinUpdateSection})},r=a,(0,l.default)(n,r)}return(0,r.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){return this.props.active?this.buildMaximizedSetting():this.buildMinimizedSetting()}}]),t}(d.default.Component);t.default=v,v.propTypes={activity:o.default.string.isRequired,sound:o.default.string.isRequired,updateSection:o.default.func,setParentState:o.default.func,submit:o.default.func,cancel:o.default.func,error:o.default.string,active:o.default.bool,saving:o.default.bool,focused:o.default.bool}},2136:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=h(a(282)),i=h(a(279)),n=h(a(283)),l=h(a(280)),r=h(a(281)),o=h(a(1)),d=h(a(3)),u=a(762),c=a(777),f=a(25),m=a(763),p=h(a(812)),g=h(a(825));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleChange=function(e){var t=e.currentTarget.getAttribute("data-enable-email"),s=parseInt(e.currentTarget.getAttribute("data-email-interval"),10);a.setState({enableEmail:t,emailInterval:s})},a.handleSubmit=function(){var e=a.state,t=e.enableEmail,s=e.emailInterval;a.props.enableEmail!==t||a.props.emailInterval!==s?((0,c.savePreference)(f.Preferences.CATEGORY_NOTIFICATIONS,f.Preferences.EMAIL_INTERVAL,s.toString()),a.props.onSubmit(t)):a.props.updateSection("")},a.handleUpdateSection=function(e){e?a.props.updateSection(e):(a.props.updateSection(""),a.setState({enableEmail:a.props.enableEmail,emailInterval:a.props.emailInterval}),a.props.onCancel())},a.state={enableEmail:e.enableEmail,emailInterval:e.emailInterval},a}return(0,r.default)(t,e),(0,n.default)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.saving||e.enableEmail===this.props.enableEmail&&e.emailInterval===this.props.emailInterval||this.setState({enableEmail:e.enableEmail,emailInterval:e.emailInterval})}},{key:"render",value:function(){if(!this.props.sendEmailNotifications&&"email"===this.props.activeSection){var e=[];return e.push(d.default.createElement("div",{key:"oauthEmailInfo",className:"padding-top"},d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.disabled_long",defaultMessage:"Email notifications have not been enabled by your System Administrator."}))),d.default.createElement(p.default,{title:(0,m.localizeMessage)("user.settings.notifications.emailNotifications","Email notifications"),inputs:e,server_error:this.state.serverError,section:"email",updateSection:this.handleUpdateSection})}if("email"!==this.props.activeSection){var t=void 0;if(this.props.sendEmailNotifications)if(this.props.enableEmail)switch(this.state.emailInterval){case f.Preferences.INTERVAL_IMMEDIATE:t=d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.immediately",defaultMessage:"Immediately"});break;case f.Preferences.INTERVAL_HOUR:t=d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.everyHour",defaultMessage:"Every hour"});break;default:t=d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.everyXMinutes",defaultMessage:"Every {count, plural, one {minute} other {{count, number} minutes}}",values:{count:this.state.emailInterval/60}})}else t=d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.never",defaultMessage:"Never"});else t=d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.disabled",defaultMessage:"Email notifications are not enabled"});return d.default.createElement(g.default,{title:(0,m.localizeMessage)("user.settings.notifications.emailNotifications","Email notifications"),describe:t,focused:this.props.focused,section:"email",updateSection:this.handleUpdateSection})}var a=null,s=null;return this.props.enableEmailBatching&&(a=d.default.createElement("div",null,d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"emailNotificationMinutes",type:"radio",name:"emailNotifications",checked:this.state.emailInterval===f.Preferences.INTERVAL_FIFTEEN_MINUTES,"data-enable-email":"true","data-email-interval":f.Preferences.INTERVAL_FIFTEEN_MINUTES,onChange:this.handleChange}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.everyXMinutes",defaultMessage:"Every {count} minutes",values:{count:f.Preferences.INTERVAL_FIFTEEN_MINUTES/60}}))),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"emailNotificationHour",type:"radio",name:"emailNotifications",checked:this.state.emailInterval===f.Preferences.INTERVAL_HOUR,"data-enable-email":"true","data-email-interval":f.Preferences.INTERVAL_HOUR,onChange:this.handleChange}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.everyHour",defaultMessage:"Every hour"})))),s=d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.emailBatchingInfo",defaultMessage:"Notifications received over the time period selected are combined and sent in a single email."})),d.default.createElement(p.default,{title:(0,m.localizeMessage)("user.settings.notifications.emailNotifications","Email notifications"),inputs:[d.default.createElement("div",{key:"userNotificationEmailOptions"},d.default.createElement("label",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.send",defaultMessage:"Send email notifications"})),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"emailNotificationImmediately",type:"radio",name:"emailNotifications",checked:this.state.emailInterval===f.Preferences.INTERVAL_IMMEDIATE,"data-enable-email":"true","data-email-interval":f.Preferences.INTERVAL_IMMEDIATE,onChange:this.handleChange}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.immediately",defaultMessage:"Immediately"}))),a,d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"emailNotificationNever",type:"radio",name:"emailNotifications",checked:this.state.emailInterval===f.Preferences.INTERVAL_NEVER,"data-enable-email":"false","data-email-interval":f.Preferences.INTERVAL_NEVER,onChange:this.handleChange}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.email.never",defaultMessage:"Never"}))),d.default.createElement("br",null),d.default.createElement("div",null,d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.emailInfo",defaultMessage:"Email notifications are sent for mentions and direct messages when you are offline or away from {siteName} for more than 5 minutes.",values:{siteName:this.props.siteName}})," ",s))],submit:this.handleSubmit,saving:this.props.saving,server_error:this.props.serverError,updateSection:this.handleUpdateSection})}}]),t}(d.default.Component);v.propTypes={activeSection:o.default.string.isRequired,updateSection:o.default.func.isRequired,enableEmail:o.default.bool.isRequired,emailInterval:o.default.number.isRequired,onSubmit:o.default.func.isRequired,onCancel:o.default.func.isRequired,serverError:o.default.string,saving:o.default.bool,focused:o.default.bool,sendEmailNotifications:o.default.bool,enableEmailBatching:o.default.bool,siteName:o.default.string},t.default=v},2137:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=p(a(282)),i=p(a(279)),n=p(a(283)),l=p(a(280)),r=p(a(281)),o=p(a(1)),d=p(a(3)),u=a(762),c=p(a(1284)),f=p(a(812)),m=a(763);function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){var e,a,n,r;(0,i.default)(this,t);for(var o=arguments.length,d=Array(o),u=0;u<o;u++)d[u]=arguments[u];return a=n=(0,l.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(d))),n.handleAutoResponderChecked=function(e){n.props.setParentState("autoResponderActive",e.target.checked)},n.onMessageChanged=function(e){n.props.setParentState("autoResponderMessage",e.target.value)},r=a,(0,l.default)(n,r)}return(0,r.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.autoResponderActive,a=e.autoResponderMessage,s=void 0;this.props.error&&(s=d.default.createElement("label",{className:"has-error"},this.props.error));var i=[],n=d.default.createElement("div",{id:"autoResponderCheckbox",key:"autoResponderCheckbox",className:"checkbox"},d.default.createElement("label",null,d.default.createElement("input",{id:"autoResponderActive",type:"checkbox",checked:t,onChange:this.handleAutoResponderChecked}),d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.autoResponderEnabled",defaultMessage:"Enabled"}))),l=d.default.createElement("div",{id:"autoResponderMessage",key:"autoResponderMessage"},d.default.createElement("div",{className:"padding-top"},d.default.createElement(c.default,{style:{resize:"none"},id:"autoResponderMessageInput",className:"form-control",rows:"5",placeholder:(0,m.localizeMessage)("user.settings.notifications.autoResponderPlaceholder","Message"),value:a,maxLength:200,onChange:this.onMessageChanged}),s));return i.push(n),t&&i.push(l),i.push(d.default.createElement("div",{key:"autoResponderHint"},d.default.createElement("br",null),d.default.createElement(u.FormattedHTMLMessage,{id:"user.settings.notifications.autoResponderHint",defaultMessage:"Set a custom message that will be automatically sent in response to Direct Messages. Mentions in Public and Private Channels will not trigger the automated reply. Enabling Automatic Replies sets your status to Out of Office and disables email and push notifications."}))),d.default.createElement(f.default,{title:d.default.createElement(u.FormattedMessage,{id:"user.settings.notifications.autoResponder",defaultMessage:"Automatic Direct Message Replies"}),width:"medium",shiftEnter:!0,submit:this.props.submit,saving:this.props.saving,inputs:i,updateSection:this.props.updateSection})}}]),t}(d.default.PureComponent);g.propTypes={autoResponderActive:o.default.bool.isRequired,autoResponderMessage:o.default.string.isRequired,updateSection:o.default.func.isRequired,setParentState:o.default.func.isRequired,submit:o.default.func.isRequired,saving:o.default.bool.isRequired,error:o.default.string},t.default=g},2138:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(284),i=a(2),n=a(778),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(187)),r=a(96),o=a(763),d=function(e){return e&&e.__esModule?e:{default:e}}(a(2139));t.default=(0,s.connect)(function(e,t){var a=(0,r.getLicense)(e),s=(0,r.getConfig)(e),i="true"===s.EnableUserAccessTokens,n=l.hasUserAccessTokenRole(t.user.roles)||l.isSystemAdmin(t.user.roles),d=a&&"true"===a.IsLicensed,u=a&&"true"===a.MFA,c="true"===s.EnableOAuthServiceProvider,f="true"===s.EnableMultifactorAuthentication,m="true"===s.EnforceMultifactorAuthentication,p="true"===s.EnableSignUpWithEmail,g="true"===s.EnableSignUpWithGitLab,h="true"===s.EnableSignUpWithGoogle,v="true"===s.EnableLdap,E="true"===s.EnableSaml,b="true"===s.EnableSignUpWithOffice365,S="true"===s.ExperimentalEnableAuthenticationTransfer;return{canUseAccessTokens:i&&n,isLicensed:d,mfaLicensed:u,enableOAuthServiceProvider:c,enableMultifactorAuthentication:f,enforceMultifactorAuthentication:m,enableSignUpWithEmail:p,enableSignUpWithGitLab:g,enableSignUpWithGoogle:h,enableLdap:v,enableSaml:E,enableSignUpWithOffice365:b,experimentalEnableAuthenticationTransfer:S,passwordConfig:(0,o.getPasswordConfig)(s)}},function(e){return{actions:(0,i.bindActionCreators)({getMe:n.getMe},e)}})(d.default)},2139:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=N(a(185)),i=N(a(282)),n=N(a(279)),l=N(a(283)),r=N(a(280)),o=N(a(281)),d=N(a(1)),u=N(a(3)),c=a(762),f=a(285),m=a(288),p=a(777),g=N(a(807)),h=N(a(25)),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763)),E=N(a(1071)),b=N(a(2140)),S=N(a(2142)),M=N(a(812)),y=N(a(825)),_=N(a(1086)),k=N(a(2145));function N(e){return e&&e.__esModule?e:{default:e}}var C="mfa",A="password",T="signin",w="apps",F="tokens",I=function(e){function t(e){(0,n.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.submitPassword=function(){var e=a.props.user,t=a.state.currentPassword,i=a.state.newPassword,n=a.state.confirmPassword;if(""!==t){var l=v.isValidPassword(i,a.props.passwordConfig),r=l.valid,o=l.error;if(r||!o)if(i===n)a.setState({savingPassword:!0}),(0,p.updatePassword)(e.id,t,i,function(){a.props.updateSection(""),a.props.actions.getMe(),a.setState(a.getDefaultState())},function(e){var t=a.getDefaultState();e.message?t.serverError=e.message:t.serverError=e,t.passwordError="",a.setState(t)});else{var d=(0,s.default)(a.getDefaultState(),{passwordError:v.localizeMessage("user.settings.security.passwordMatchError","The new passwords you entered do not match."),serverError:""});a.setState(d)}else a.setState({passwordError:o,serverError:""})}else a.setState({passwordError:v.localizeMessage("user.settings.security.currentPasswordError","Please enter your current password."),serverError:""})},a.setupMfa=function(e){e.preventDefault(),m.browserHistory.push("/mfa/setup")},a.removeMfa=function(){(0,p.deactivateMfa)(function(){a.props.mfaLicensed&&a.props.enableMultifactorAuthentication&&a.props.enforceMultifactorAuthentication?m.browserHistory.push("/mfa/setup"):(a.props.updateSection(""),a.setState(a.getDefaultState()))},function(e){var t=a.getDefaultState();e.message?t.serverError=e.message:t.serverError=e,a.setState(t)})},a.updateCurrentPassword=function(e){a.setState({currentPassword:e.target.value})},a.updateNewPassword=function(e){a.setState({newPassword:e.target.value})},a.updateConfirmPassword=function(e){a.setState({confirmPassword:e.target.value})},a.deauthorizeApp=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-app");(0,p.deauthorizeOAuthApp)(t,function(){var e=a.state.authorizedApps.filter(function(e){return e.id!==t});a.setState({authorizedApps:e,serverError:null})},function(e){a.setState({serverError:e.message})})},a.handleUpdateSection=function(e){if(e)a.props.updateSection(e);else{switch(a.props.activeSection){case C:case T:case F:case w:a.setState({serverError:null});break;case A:a.setState({currentPassword:"",newPassword:"",confirmPassword:"",serverError:null,passwordError:null})}a.props.updateSection("")}},a.createMfaSection=function(){if(a.props.activeSection===C){var e=void 0,t=void 0;if(a.props.user.mfa_active){var s=void 0,i=void 0;a.props.enforceMultifactorAuthentication?(s=u.default.createElement(c.FormattedMessage,{id:"user.settings.mfa.requiredHelp",defaultMessage:"Multi-factor authentication is required on this server. Resetting is only recommended when you need to switch code generation to a new mobile device. You will be required to set it up again immediately."}),i=u.default.createElement(c.FormattedMessage,{id:"user.settings.mfa.reset",defaultMessage:"Reset MFA on your account"})):(s=u.default.createElement(c.FormattedMessage,{id:"user.settings.mfa.removeHelp",defaultMessage:"Removing multi-factor authentication means you will no longer require a phone-based passcode to sign-in to your account."}),i=u.default.createElement(c.FormattedMessage,{id:"user.settings.mfa.remove",defaultMessage:"Remove MFA from your account"})),e=u.default.createElement("div",{key:"mfaQrCode"},u.default.createElement("a",{className:"btn btn-primary",href:"#",onClick:a.removeMfa},i),u.default.createElement("br",null)),t=u.default.createElement("span",null,s)}else e=u.default.createElement("div",{key:"mfaQrCode"},u.default.createElement("a",{className:"btn btn-primary",href:"#",onClick:a.setupMfa},u.default.createElement(c.FormattedMessage,{id:"user.settings.mfa.add",defaultMessage:"Add MFA to your account"})),u.default.createElement("br",null)),t=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.mfa.addHelp",defaultMessage:"Adding multi-factor authentication will make your account more secure by requiring a code from your mobile phone each time you sign in."}));var n=[];return n.push(u.default.createElement("div",{key:"mfaSetting",className:"padding-top"},e)),u.default.createElement(M.default,{title:v.localizeMessage("user.settings.mfa.title","Multi-factor Authentication"),inputs:n,extraInfo:t,serverError:a.state.serverError,updateSection:a.handleUpdateSection,width:"medium"})}var l=void 0;return l=a.props.user.mfa_active?v.localizeMessage("user.settings.security.active","Active"):v.localizeMessage("user.settings.security.inactive","Inactive"),u.default.createElement(y.default,{title:v.localizeMessage("user.settings.mfa.title","Multi-factor Authentication"),describe:l,section:C,updateSection:a.handleUpdateSection})},a.createPasswordSection=function(){if(a.props.activeSection===A){var e=[],t=void 0;return""===a.props.user.auth_service?(t=a.submitPassword,e.push(u.default.createElement("div",{key:"currentPasswordUpdateForm",className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.currentPassword",defaultMessage:"Current Password"})),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{id:"currentPassword",autoFocus:!0,className:"form-control",type:"password",onChange:a.updateCurrentPassword,value:a.state.currentPassword})))),e.push(u.default.createElement("div",{key:"newPasswordUpdateForm",className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.newPassword",defaultMessage:"New Password"})),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{id:"newPassword",className:"form-control",type:"password",onChange:a.updateNewPassword,value:a.state.newPassword})))),e.push(u.default.createElement("div",{key:"retypeNewPasswordUpdateForm",className:"form-group"},u.default.createElement("label",{className:"col-sm-5 control-label"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.retypePassword",defaultMessage:"Retype New Password"})),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("input",{id:"confirmPassword",className:"form-control",type:"password",onChange:a.updateConfirmPassword,value:a.state.confirmPassword}))))):a.props.user.auth_service===h.default.GITLAB_SERVICE?e.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"form-group"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.passwordGitlabCantUpdate",defaultMessage:"Login occurs through GitLab. Password cannot be updated."})))):a.props.user.auth_service===h.default.LDAP_SERVICE?e.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"form-group"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.passwordLdapCantUpdate",defaultMessage:"Login occurs through AD/LDAP. Password cannot be updated."})))):a.props.user.auth_service===h.default.SAML_SERVICE?e.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"form-group"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.passwordSamlCantUpdate",defaultMessage:"This field is handled through your login provider. If you want to change it, you need to do so through your login provider."})))):a.props.user.auth_service===h.default.GOOGLE_SERVICE?e.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"form-group"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.passwordGoogleCantUpdate",defaultMessage:"Login occurs through Google Apps. Password cannot be updated."})))):a.props.user.auth_service===h.default.OFFICE365_SERVICE&&e.push(u.default.createElement("div",{key:"oauthEmailInfo",className:"form-group"},u.default.createElement("div",{className:"setting-list__hint col-sm-12"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.passwordOffice365CantUpdate",defaultMessage:"Login occurs through Office 365. Password cannot be updated."})))),u.default.createElement(M.default,{title:u.default.createElement(c.FormattedMessage,{id:"user.settings.security.password",defaultMessage:"Password"}),inputs:e,submit:t,saving:a.state.savingPassword,serverError:a.state.serverError,clientError:a.state.passwordError,updateSection:a.handleUpdateSection})}var s=void 0;if(""===a.props.user.auth_service){var i=new Date(a.props.user.last_password_update),n=!g.default.getBool(h.default.Preferences.CATEGORY_DISPLAY_SETTINGS,h.default.Preferences.USE_MILITARY_TIME,!1);s=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.lastUpdated",defaultMessage:"Last updated {date} at {time}",values:{date:u.default.createElement(c.FormattedDate,{value:i,day:"2-digit",month:"short",year:"numeric"}),time:u.default.createElement(c.FormattedTime,{value:i,hour12:n,hour:"2-digit",minute:"2-digit"})}})}else a.props.user.auth_service===h.default.GITLAB_SERVICE?s=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.loginGitlab",defaultMessage:"Login done through GitLab"}):a.props.user.auth_service===h.default.LDAP_SERVICE?s=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.loginLdap",defaultMessage:"Login done through AD/LDAP"}):a.props.user.auth_service===h.default.SAML_SERVICE?s=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.loginSaml",defaultMessage:"Login done through SAML"}):a.props.user.auth_service===h.default.GOOGLE_SERVICE?s=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.loginGoogle",defaultMessage:"Login done through Google Apps"}):a.props.user.auth_service===h.default.OFFICE365_SERVICE&&(s=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.loginOffice365",defaultMessage:"Login done through Office 365"}));return u.default.createElement(y.default,{title:u.default.createElement(c.FormattedMessage,{id:"user.settings.security.password",defaultMessage:"Password"}),describe:s,section:A,updateSection:a.handleUpdateSection})},a.createSignInSection=function(){var e=a.props.user;if(a.props.activeSection===T){var t=void 0,s=void 0,i=void 0,n=void 0,l=void 0,r=void 0;if(""===e.auth_service)a.props.enableSignUpWithGitLab&&(s=u.default.createElement("div",{className:"padding-bottom x2"},u.default.createElement(f.Link,{className:"btn btn-primary",to:"/claim/email_to_oauth?email="+encodeURIComponent(e.email)+"&old_type="+e.auth_service+"&new_type="+h.default.GITLAB_SERVICE},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.switchGitlab",defaultMessage:"Switch to using GitLab SSO"})),u.default.createElement("br",null))),a.props.enableSignUpWithGoogle&&(i=u.default.createElement("div",{className:"padding-bottom x2"},u.default.createElement(f.Link,{className:"btn btn-primary",to:"/claim/email_to_oauth?email="+encodeURIComponent(e.email)+"&old_type="+e.auth_service+"&new_type="+h.default.GOOGLE_SERVICE},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.switchGoogle",defaultMessage:"Switch to using Google SSO"})),u.default.createElement("br",null))),a.props.enableSignUpWithOffice365&&(n=u.default.createElement("div",{className:"padding-bottom x2"},u.default.createElement(f.Link,{className:"btn btn-primary",to:"/claim/email_to_oauth?email="+encodeURIComponent(e.email)+"&old_type="+e.auth_service+"&new_type="+h.default.OFFICE365_SERVICE},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.switchOffice365",defaultMessage:"Switch to using Office 365 SSO"})),u.default.createElement("br",null))),a.props.enableLdap&&(l=u.default.createElement("div",{className:"padding-bottom x2"},u.default.createElement(f.Link,{className:"btn btn-primary",to:"/claim/email_to_ldap?email="+encodeURIComponent(e.email)},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.switchLdap",defaultMessage:"Switch to using AD/LDAP"})),u.default.createElement("br",null))),a.props.enableSaml&&(r=u.default.createElement("div",{className:"padding-bottom x2"},u.default.createElement(f.Link,{className:"btn btn-primary",to:"/claim/email_to_oauth?email="+encodeURIComponent(e.email)+"&old_type="+e.auth_service+"&new_type="+h.default.SAML_SERVICE},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.switchSaml",defaultMessage:"Switch to using SAML SSO"})),u.default.createElement("br",null)));else if(a.props.enableSignUpWithEmail){var o=void 0;o=e.auth_service===h.default.LDAP_SERVICE?"/claim/ldap_to_email?email="+encodeURIComponent(e.email):"/claim/oauth_to_email?email="+encodeURIComponent(e.email)+"&old_type="+e.auth_service,t=u.default.createElement("div",{className:"padding-bottom x2"},u.default.createElement(f.Link,{className:"btn btn-primary",to:o},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.switchEmail",defaultMessage:"Switch to using email and password"})),u.default.createElement("br",null))}var d=[];d.push(u.default.createElement("div",{key:"userSignInOption"},t,s,i,n,l,r));var m=u.default.createElement("span",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.security.oneSignin",defaultMessage:"You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful."}));return u.default.createElement(M.default,{title:v.localizeMessage("user.settings.security.method","Sign-in Method"),extraInfo:m,inputs:d,serverError:a.state.serverError,updateSection:a.handleUpdateSection})}var p=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.emailPwd",defaultMessage:"Email and Password"});return a.props.user.auth_service===h.default.GITLAB_SERVICE?p=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.gitlab",defaultMessage:"GitLab"}):a.props.user.auth_service===h.default.GOOGLE_SERVICE?p=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.google",defaultMessage:"Google"}):a.props.user.auth_service===h.default.OFFICE365_SERVICE?p=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.office365",defaultMessage:"Office 365"}):a.props.user.auth_service===h.default.LDAP_SERVICE?p=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.ldap",defaultMessage:"AD/LDAP"}):a.props.user.auth_service===h.default.SAML_SERVICE&&(p=u.default.createElement(c.FormattedMessage,{id:"user.settings.security.saml",defaultMessage:"SAML"})),u.default.createElement(y.default,{title:v.localizeMessage("user.settings.security.method","Sign-in Method"),describe:p,section:T,updateSection:a.handleUpdateSection})},a.createOAuthAppsSection=function(){if(a.props.activeSection===w){var e=void 0;e=a.state.authorizedApps&&a.state.authorizedApps.length>0?a.state.authorizedApps.map(function(e){var t=u.default.createElement("a",{href:e.homepage,target:"_blank",rel:"noopener noreferrer"},e.homepage);return u.default.createElement("div",{key:e.id,className:"padding-bottom x2 authorized-app"},u.default.createElement("div",{className:"col-sm-10"},u.default.createElement("div",{className:"authorized-app__name"},e.name,u.default.createElement("span",{className:"authorized-app__url"}," -"," ",t)),u.default.createElement("div",{className:"authorized-app__description"},e.description),u.default.createElement("div",{className:"authorized-app__deauthorize"},u.default.createElement("a",{href:"#","data-app":e.id,onClick:a.deauthorizeApp},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.deauthorize",defaultMessage:"Deauthorize"})))),u.default.createElement("div",{className:"col-sm-2 pull-right"},u.default.createElement("img",{alt:e.name,src:e.icon_url||E.default})),u.default.createElement("br",null))}):u.default.createElement("div",{className:"padding-bottom x2 authorized-app"},u.default.createElement("div",{className:"setting-list__hint"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.noApps",defaultMessage:"No OAuth 2.0 Applications are authorized."})));var t=[],s=void 0,i=void 0;Array.isArray(e)&&(s="authorized-apps__wrapper",i=u.default.createElement("div",{className:"authorized-apps__help"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.oauthAppsHelp",defaultMessage:"Applications act on your behalf to access your data based on the permissions you grant them."}))),t.push(u.default.createElement("div",{className:s,key:"authorizedApps"},e));var n=u.default.createElement("div",null,u.default.createElement(c.FormattedMessage,{id:"user.settings.security.oauthApps",defaultMessage:"OAuth 2.0 Applications"}),i);return u.default.createElement(M.default,{title:n,inputs:t,serverError:a.state.serverError,updateSection:a.handleUpdateSection,width:"full",cancelButtonText:u.default.createElement(c.FormattedMessage,{id:"user.settings.security.close",defaultMessage:"Close"})})}return u.default.createElement(y.default,{title:v.localizeMessage("user.settings.security.oauthApps","OAuth 2.0 Applications"),describe:u.default.createElement(c.FormattedMessage,{id:"user.settings.security.oauthAppsDescription",defaultMessage:"Click 'Edit' to manage your OAuth 2.0 Applications"}),section:w,updateSection:a.handleUpdateSection})},a.state=a.getDefaultState(),a}return(0,o.default)(t,e),(0,l.default)(t,[{key:"getDefaultState",value:function(){return{currentPassword:"",newPassword:"",confirmPassword:"",passwordError:"",serverError:"",tokenError:"",authService:this.props.user.auth_service,savingPassword:!1}}},{key:"componentDidMount",value:function(){var e=this;this.props.enableOAuthServiceProvider&&(0,p.getAuthorizedApps)(function(t){e.setState({authorizedApps:t,serverError:null})},function(t){e.setState({serverError:t.message})})}},{key:"render",value:function(){var e=this.props.user,t=this.createPasswordSection(),a=0;a=this.props.enableSignUpWithGitLab?a+1:a,a=this.props.enableSignUpWithGoogle?a+1:a,a=this.props.enableSignUpWithOffice365?a+1:a,a=this.props.enableLdap?a+1:a,a=this.props.enableSaml?a+1:a;var s=void 0;(this.props.enableSignUpWithEmail||""===e.auth_service)&&a>0&&this.props.experimentalEnableAuthenticationTransfer&&(s=this.createSignInSection());var i=void 0;this.props.enableMultifactorAuthentication&&this.props.isLicensed&&(""===e.auth_service||e.auth_service===h.default.LDAP_SERVICE)&&(i=this.createMfaSection());var n=void 0;this.props.enableOAuthServiceProvider&&(n=this.createOAuthAppsSection());var l=void 0;return this.props.canUseAccessTokens&&(l=u.default.createElement(k.default,{user:this.props.user,active:this.props.activeSection===F,updateSection:this.handleUpdateSection,setRequireConfirm:this.props.setRequireConfirm})),u.default.createElement("div",null,u.default.createElement("div",{className:"modal-header"},u.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":v.localizeMessage("user.settings.security.close","Close"),onClick:this.props.closeModal},u.default.createElement("span",{"aria-hidden":"true"},"×")),u.default.createElement("h4",{className:"modal-title",ref:"title"},u.default.createElement("div",{className:"modal-back"},u.default.createElement("i",{className:"fa fa-angle-left",title:v.localizeMessage("generic_icons.collapse","Collapse Icon"),onClick:this.props.collapseModal})),u.default.createElement(c.FormattedMessage,{id:"user.settings.security.title",defaultMessage:"Security Settings"}))),u.default.createElement("div",{className:"user-settings"},u.default.createElement("h3",{className:"tab-header"},u.default.createElement(c.FormattedMessage,{id:"user.settings.security.title",defaultMessage:"Security Settings"})),u.default.createElement("div",{className:"divider-dark first"}),t,u.default.createElement("div",{className:"divider-light"}),i,u.default.createElement("div",{className:"divider-light"}),n,u.default.createElement("div",{className:"divider-light"}),l,u.default.createElement("div",{className:"divider-light"}),s,u.default.createElement("div",{className:"divider-dark"}),u.default.createElement("br",null),u.default.createElement(_.default,{className:"security-links color--link",dialogType:b.default},u.default.createElement("i",{className:"fa fa-clock-o",title:v.localizeMessage("user.settings.security.viewHistory.icon","Access History Icon")}),u.default.createElement(c.FormattedMessage,{id:"user.settings.security.viewHistory",defaultMessage:"View Access History"})),u.default.createElement(_.default,{className:"security-links color--link margin-top",dialogType:S.default},u.default.createElement("i",{className:"fa fa-clock-o",title:v.localizeMessage("user.settings.security.logoutActiveSessions.icon","Active Sessions Icon")}),u.default.createElement(c.FormattedMessage,{id:"user.settings.security.logoutActiveSessions",defaultMessage:"View and Logout of Active Sessions"}))))}}]),t}(u.default.Component);I.propTypes={user:d.default.object,activeSection:d.default.string,updateSection:d.default.func,closeModal:d.default.func.isRequired,collapseModal:d.default.func.isRequired,setRequireConfirm:d.default.func.isRequired,canUseAccessTokens:d.default.bool,isLicensed:d.default.bool,mfaLicensed:d.default.bool,enableOAuthServiceProvider:d.default.bool,enableMultifactorAuthentication:d.default.bool,enforceMultifactorAuthentication:d.default.bool,enableSignUpWithEmail:d.default.bool,enableSignUpWithGitLab:d.default.bool,enableSignUpWithGoogle:d.default.bool,enableLdap:d.default.bool,enableSaml:d.default.bool,enableSignUpWithOffice365:d.default.bool,experimentalEnableAuthenticationTransfer:d.default.bool,passwordConfig:d.default.object,actions:d.default.shape({getMe:d.default.func.isRequired}).isRequired},t.default=I,I.defaultProps={user:{},activeSection:""}},2140:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(a(42)),i=a(284),n=a(2),l=a(778),r=o(a(2141));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.connect)(function(e,t){return(0,s.default)({},t)},function(e){return{actions:(0,n.bindActionCreators)({getUserAudits:l.getUserAudits},e)}})(r.default)},2141:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=v(a(282)),i=v(a(279)),n=v(a(283)),l=v(a(280)),r=v(a(281)),o=v(a(768)),d=v(a(1)),u=v(a(3)),c=a(767),f=a(762),m=v(a(769)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763)),g=v(a(1175)),h=v(a(781));function v(e){return e&&e.__esModule?e:{default:e}}var E=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));a.onAuditChange=a.onAuditChange.bind(a),a.onShow=a.onShow.bind(a),a.onHide=a.onHide.bind(a);var n=a.getStateFromStoresForAudits();return n.moreInfo=[],n.show=!0,a.state=n,a}return(0,r.default)(t,e),(0,n.default)(t,[{key:"getStateFromStoresForAudits",value:function(){return{audits:m.default.getAudits()}}},{key:"onShow",value:function(){this.props.actions.getUserAudits(m.default.getCurrentId(),0,200),p.isMobile()||(0,o.default)(".modal-body").perfectScrollbar()}},{key:"onHide",value:function(){this.setState({show:!1})}},{key:"componentDidMount",value:function(){m.default.addAuditsChangeListener(this.onAuditChange),this.onShow()}},{key:"componentWillUnmount",value:function(){m.default.removeAuditsChangeListener(this.onAuditChange)}},{key:"onAuditChange",value:function(){var e=this.getStateFromStoresForAudits();p.areObjectsEqual(e.audits,this.state.audits)||this.setState(e)}},{key:"render",value:function(){var e=void 0;return e=0===this.state.audits.length?u.default.createElement(h.default,null):u.default.createElement(g.default,{audits:this.state.audits,showIp:!0,showSession:!0}),u.default.createElement(c.Modal,{dialogClassName:"modal--scroll",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,bsSize:"large"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,null,u.default.createElement(f.FormattedMessage,{id:"access_history.title",defaultMessage:"Access History"}))),u.default.createElement(c.Modal.Body,{ref:"modalBody"},e))}}]),t}(u.default.Component);E.propTypes={onHide:d.default.func.isRequired,actions:d.default.shape({getUserAudits:d.default.func.isRequired}).isRequired},t.default=E},2142:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(284),i=a(2),n=a(778),l=a(1176),r=function(e){return e&&e.__esModule?e:{default:e}}(a(2144));t.default=(0,s.connect)(function(e){return{locale:(0,l.getCurrentLocale)(e)}},function(e){return{actions:(0,i.bindActionCreators)({getSessions:n.getSessions,revokeSession:n.revokeSession},e)}})(r.default)},2144:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=E(a(282)),i=E(a(279)),n=E(a(283)),l=E(a(280)),r=E(a(281)),o=E(a(768)),d=E(a(1)),u=E(a(3)),c=a(767),f=a(762),m=a(22),p=E(a(769)),g=a(1073),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(763)),v=E(a(781));function E(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));a.isMobileSession=function(e){return e.device_id&&(e.device_id.includes("apple")||e.device_id.includes("android"))},a.mobileSessionInfo=function(e){var t=void 0,a=void 0,s=void 0,i=void 0;return e.device_id.includes("apple")?(s="fa fa-apple",i=h.localizeMessage("device_icons.apple","Apple Icon"),t="activity_log_modal.iphoneNativeClassicApp",a="iPhone Native Classic App",e.device_id.includes(m.General.PUSH_NOTIFY_APPLE_REACT_NATIVE)&&(t="activity_log_modal.iphoneNativeApp",a="iPhone Native App")):e.device_id.includes("android")&&(s="fa fa-android",i=h.localizeMessage("device_icons.android","Android Icon"),t="activity_log_modal.androidNativeClassicApp",a="Android Native Classic App",e.device_id.includes(m.General.PUSH_NOTIFY_ANDROID_REACT_NATIVE)&&(t="activity_log_modal.androidNativeApp",a="Android Native App")),{devicePicture:s,deviceTitle:i,devicePlatform:u.default.createElement(f.FormattedMessage,{id:t,defaultMessage:a})}},a.submitRevoke=a.submitRevoke.bind(a),a.onListenerChange=a.onListenerChange.bind(a),a.handleMoreInfo=a.handleMoreInfo.bind(a),a.onHide=a.onHide.bind(a),a.onShow=a.onShow.bind(a);var n=a.getStateFromStores();return n.moreInfo=[],n.show=!0,a.state=n,a}return(0,r.default)(t,e),(0,n.default)(t,[{key:"getStateFromStores",value:function(){return{sessions:p.default.getSessions(),clientError:null}}},{key:"submitRevoke",value:function(e,t){var a=this;t.preventDefault();var s=(0,o.default)(t.target).closest(".modal-content");s.addClass("animation--highlight"),setTimeout(function(){s.removeClass("animation--highlight")},1500),this.props.actions.revokeSession(p.default.getCurrentId(),e).then(function(){a.props.actions.getSessions(p.default.getCurrentId())})}},{key:"onShow",value:function(){this.props.actions.getSessions(p.default.getCurrentId()),h.isMobile()||(0,o.default)(".modal-body").perfectScrollbar()}},{key:"onHide",value:function(){this.setState({show:!1})}},{key:"componentDidMount",value:function(){p.default.addSessionsChangeListener(this.onListenerChange),this.onShow()}},{key:"componentWillUnmount",value:function(){p.default.removeSessionsChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=this.getStateFromStores();h.areObjectsEqual(e.sessions,this.state.sessions)||this.setState(e)}},{key:"handleMoreInfo",value:function(e){var t=this.state.moreInfo;t[e]=!0,this.setState({moreInfo:t})}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.sessions.length;t++){var a=this.state.sessions[t],s=new Date(a.last_activity_at),i=new Date(a.create_at),n=a.props.platform,l="",r="";if("UserAccessToken"!==a.props.type){if("Windows"===a.props.platform)l="fa fa-windows",r=h.localizeMessage("device_icons.windows","Windows Icon");else if(this.isMobileSession(a)){var o=this.mobileSessionInfo(a);l=o.devicePicture,n=o.devicePlatform}else"Macintosh"===a.props.platform||"iPhone"===a.props.platform?(l="fa fa-apple",r=h.localizeMessage("device_icons.apple","Apple Icon")):"Linux"===a.props.platform?a.props.os.indexOf("Android")>=0?(n=u.default.createElement(f.FormattedMessage,{id:"activity_log_modal.android",defaultMessage:"Android"}),l="fa fa-android",r=h.localizeMessage("device_icons.android","Android Icon")):(l="fa fa-linux",r=h.localizeMessage("device_icons.linux","Linux Icon")):-1!==a.props.os.indexOf("Linux")&&(l="fa fa-linux",r=h.localizeMessage("device_icons.linux","Linux Icon"));-1!==a.props.browser.indexOf("Desktop App")&&(n=u.default.createElement(f.FormattedMessage,{id:"activity_log_modal.desktop",defaultMessage:"Native Desktop App"}));var d=void 0;d=this.state.moreInfo[t]?u.default.createElement("div",null,u.default.createElement("div",null,u.default.createElement(f.FormattedMessage,{id:"activity_log.firstTime",defaultMessage:"First time active: {date}, {time}",values:{date:u.default.createElement(f.FormattedDate,{value:i,day:"2-digit",month:(0,g.getMonthLong)(this.props.locale),year:"numeric"}),time:u.default.createElement(f.FormattedTime,{value:i,hour:"2-digit",minute:"2-digit"})}})),u.default.createElement("div",null,u.default.createElement(f.FormattedMessage,{id:"activity_log.os",defaultMessage:"OS: {os}",values:{os:a.props.os}})),u.default.createElement("div",null,u.default.createElement(f.FormattedMessage,{id:"activity_log.browser",defaultMessage:"Browser: {browser}",values:{browser:a.props.browser}})),u.default.createElement("div",null,u.default.createElement(f.FormattedMessage,{id:"activity_log.sessionId",defaultMessage:"Session ID: {id}",values:{id:a.id}}))):u.default.createElement("a",{className:"theme",href:"#",onClick:this.handleMoreInfo.bind(this,t)},u.default.createElement(f.FormattedMessage,{id:"activity_log.moreInfo",defaultMessage:"More info"})),e[t]=u.default.createElement("div",{key:"activityLogEntryKey"+t,className:"activity-log__table"},u.default.createElement("div",{className:"activity-log__report"},u.default.createElement("div",{className:"report__platform"},u.default.createElement("i",{className:l,title:r}),n),u.default.createElement("div",{className:"report__info"},u.default.createElement("div",null,u.default.createElement(f.FormattedMessage,{id:"activity_log.lastActivity",defaultMessage:"Last activity: {date}, {time}",values:{date:u.default.createElement(f.FormattedDate,{value:s,day:"2-digit",month:(0,g.getMonthLong)(this.props.locale),year:"numeric"}),time:u.default.createElement(f.FormattedTime,{value:s,hour:"2-digit",minute:"2-digit"})}})),d)),u.default.createElement("div",{className:"activity-log__action"},u.default.createElement("button",{onClick:this.submitRevoke.bind(this,a.id),className:"btn btn-primary"},u.default.createElement(f.FormattedMessage,{id:"activity_log.logout",defaultMessage:"Logout"}))))}}var m=void 0;return m=this.state.sessions.loading?u.default.createElement(v.default,null):u.default.createElement("form",{role:"form"},e),u.default.createElement(c.Modal,{dialogClassName:"modal--scroll",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,bsSize:"large"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,null,u.default.createElement(f.FormattedMessage,{id:"activity_log.activeSessions",defaultMessage:"Active Sessions"}))),u.default.createElement(c.Modal.Body,{ref:"modalBody"},u.default.createElement("p",{className:"session-help-text"},u.default.createElement(f.FormattedMessage,{id:"activity_log.sessionsDescription",defaultMessage:"Sessions are created when you log in to a new browser on a device. Sessions let you use Mattermost without having to log in again for a time period specified by the System Admin. If you want to log out sooner, use the 'Logout' button below to end a session."})),m))}}]),t}(u.default.Component);b.propTypes={locale:d.default.string.isRequired,onHide:d.default.func.isRequired,actions:d.default.shape({getSessions:d.default.func.isRequired,revokeSession:d.default.func.isRequired}).isRequired},t.default=b},2145:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(284),i=a(2),n=a(778),l=function(e){return e&&e.__esModule?e:{default:e}}(a(2146));t.default=(0,s.connect)(function(e){return{userAccessTokens:e.entities.users.myUserAccessTokens}},function(e){return{actions:(0,i.bindActionCreators)({getUserAccessTokensForUser:n.getUserAccessTokensForUser,createUserAccessToken:n.createUserAccessToken,revokeUserAccessToken:n.revokeUserAccessToken,enableUserAccessToken:n.enableUserAccessToken,disableUserAccessToken:n.disableUserAccessToken,clearUserAccessTokens:n.clearUserAccessTokens},e)}})(l.default)},2146:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=k(a(784)),i=k(a(126)),n=k(a(127)),l=k(a(282)),r=k(a(279)),o=k(a(283)),d=k(a(280)),u=k(a(281)),c=k(a(1)),f=k(a(3)),m=a(762),p=_(a(187)),g=a(791),h=k(a(25)),v=a(290),E=_(a(763)),b=k(a(803)),S=k(a(812)),M=k(a(825)),y=k(a(849));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function k(e){return e&&e.__esModule?e:{default:e}}var N="creating",C="created",A="not_creating",T=function(e){function t(e){var a=this;(0,r.default)(this,t);var s=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return s.startCreatingToken=function(){s.setState({tokenCreationState:N})},s.stopCreatingToken=function(){s.setState({tokenCreationState:A,saving:!1})},s.handleCreateToken=(0,n.default)(i.default.mark(function e(){var t,n,l,r,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.handleCancelConfirm(),""!==(t=s.refs.newtokendescription?s.refs.newtokendescription.value:"")){e.next=5;break}return s.setState({tokenError:E.localizeMessage("user.settings.tokens.nameRequired","Please enter a description.")}),e.abrupt("return");case 5:return s.setState({tokenError:"",saving:!0}),s.props.setRequireConfirm(!0,s.confirmCopyToken),n=s.props.user?s.props.user.id:"",e.next=10,s.props.actions.createUserAccessToken(n,t);case 10:l=e.sent,r=l.data,o=l.error,r&&s.state.tokenCreationState===N?s.setState({tokenCreationState:C,newToken:r,saving:!1}):o&&s.setState({serverError:o.message,saving:!1});case 14:case"end":return e.stop()}},e,a)})),s.confirmCopyToken=function(e){s.setState({showConfirmModal:!0,confirmTitle:f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.confirmCopyTitle",defaultMessage:"Have you copied your token?"}),confirmMessage:function(e){return f.default.createElement("div",null,f.default.createElement(m.FormattedHTMLMessage,{id:"user.settings.tokens.confirmCopyMessage",defaultMessage:"Make sure you have copied and saved the access token below. You won't be able to see it again!"}),f.default.createElement("br",null),f.default.createElement("br",null),e.tokenCreationState===N?f.default.createElement("div",null,f.default.createElement("strong",{className:"word-break--all"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.token",defaultMessage:"Access Token: "})),f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.tokenLoading",defaultMessage:"Loading..."})):f.default.createElement("strong",{className:"word-break--all"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.token",defaultMessage:"Access Token: "}),e.newToken.token))},confirmButton:f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.confirmCopyButton",defaultMessage:"Yes, I have copied the token"}),confirmComplete:function(){s.handleCancelConfirm(),e()},confirmHideCancel:!0})},s.handleCancelConfirm=function(){s.setState({showConfirmModal:!1,confirmTitle:null,confirmMessage:null,confirmButton:null,confirmComplete:null,confirmHideCancel:!1})},s.confirmCreateToken=function(){p.isSystemAdmin(s.props.user.roles)?s.setState({showConfirmModal:!0,confirmTitle:f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.confirmCreateTitle",defaultMessage:"Create System Admin Personal Access Token"}),confirmMessage:function(){return f.default.createElement("div",{className:"alert alert-danger"},f.default.createElement(m.FormattedHTMLMessage,{id:"user.settings.tokens.confirmCreateMessage",defaultMessage:"You are generating a personal access token with System Admin permissions. Are you sure want to create this token?"}))},confirmButton:f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.confirmCreateButton",defaultMessage:"Yes, Create"}),confirmComplete:function(){s.handleCreateToken(),(0,g.trackEvent)("settings","system_admin_create_user_access_token")}}):s.handleCreateToken()},s.saveTokenKeyPress=function(e){E.isKeyPressed(e,h.default.KeyCodes.ENTER)&&s.confirmCreateToken()},s.confirmRevokeToken=function(e){var t=s.props.userAccessTokens[e];s.setState({showConfirmModal:!0,confirmTitle:f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.confirmDeleteTitle",defaultMessage:"Delete Token?"}),confirmMessage:function(){return f.default.createElement("div",{className:"alert alert-danger"},f.default.createElement(m.FormattedHTMLMessage,{id:"user.settings.tokens.confirmDeleteMessage",defaultMessage:"Any integrations using this token will no longer be able to access the Mattermost API. You cannot undo this action. <br /><br />Are you sure want to delete the {description} token?",values:{description:t.description}}))},confirmButton:f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.confirmDeleteButton",defaultMessage:"Yes, Delete"}),confirmComplete:function(){s.revokeToken(e),(0,g.trackEvent)("settings","revoke_user_access_token")}})},s.revokeToken=function(){var e=(0,n.default)(i.default.mark(function e(t){var n,l;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.actions.revokeUserAccessToken(t);case 2:n=e.sent,(l=n.error)&&s.setState({serverError:l.message}),s.handleCancelConfirm();case 6:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),s.activateToken=function(){var e=(0,n.default)(i.default.mark(function e(t){var n,l;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.actions.enableUserAccessToken(t);case 2:n=e.sent,(l=n.error)?s.setState({serverError:l.message}):(0,g.trackEvent)("settings","activate_user_access_token");case 5:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),s.deactivateToken=function(){var e=(0,n.default)(i.default.mark(function e(t){var n,l;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.actions.disableUserAccessToken(t);case 2:n=e.sent,(l=n.error)?s.setState({serverError:l.message}):(0,g.trackEvent)("settings","deactivate_user_access_token");case 5:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),s.state={showConfirmModal:!1,newToken:null,tokenCreationState:A,tokenError:"",serverError:null,saving:!1},s}return(0,u.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.props.actions.clearUserAccessTokens();var e=this.props.user?this.props.user.id:"";this.props.actions.getUserAccessTokensForUser(e,0,200)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!e.active&&this.props.active&&this.setState({showConfirmModal:!1,newToken:null,tokenCreationState:A,tokenError:"",serverError:null,saving:!1})}},{key:"render",value:function(){var e=this,t="";if(!this.props.active){var a=E.localizeMessage("user.settings.tokens.clickToEdit","Click 'Edit' to manage your personal access tokens");return f.default.createElement(M.default,{title:E.localizeMessage("user.settings.tokens.title","Personal Access Tokens"),describe:a,section:"tokens",updateSection:this.props.updateSection})}var i=[];(0,s.default)(this.props.userAccessTokens).forEach(function(t){if(!e.state.newToken||e.state.newToken.id!==t.id){var a=void 0,s=void 0;t.is_active?a=f.default.createElement("a",{name:t.id+"_deactivate",href:"#",onClick:function(a){a.preventDefault(),e.deactivateToken(t.id)}},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.deactivate",defaultMessage:"Deactivate"})):(s=f.default.createElement("span",{className:"has-error setting-box__inline-error"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.deactivatedWarning",defaultMessage:"(Inactive)"})),a=f.default.createElement("a",{name:t.id+"_activate",href:"#",onClick:function(a){a.preventDefault(),e.activateToken(t.id)}},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.activate",defaultMessage:"Activate"}))),i.push(f.default.createElement("div",{key:t.id,className:"setting-box__item"},f.default.createElement("div",{className:"whitespace--nowrap overflow--ellipsis"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.tokenDesc",defaultMessage:"Token Description: "}),t.description,s),f.default.createElement("div",{className:"setting-box__token-id whitespace--nowrap overflow--ellipsis"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.tokenId",defaultMessage:"Token ID: "}),t.id),f.default.createElement("div",null,a," - ",f.default.createElement("a",{name:t.id+"_delete",href:"#",onClick:function(a){a.preventDefault(),e.confirmRevokeToken(t.id)}},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.delete",defaultMessage:"Delete"}))),f.default.createElement("hr",{className:"margin-bottom margin-top x2"})))}});var n=void 0;0===i.length&&(n=f.default.createElement(m.FormattedMessage,{key:"notokens",id:"user.settings.tokens.userAccessTokensNone",defaultMessage:"No personal access tokens."}));var l=void 0;l=(0,v.isMobile)()?f.default.createElement("span",null,f.default.createElement(m.FormattedHTMLMessage,{id:"user.settings.tokens.description_mobile",defaultMessage:'<a href="https://about.mattermost.com/default-user-access-tokens" target="_blank">Personal access tokens</a> function similarly to session tokens and can be used by integrations to <a href="https://about.mattermost.com/default-api-authentication" target="_blank">authenticate against the REST API</a>. Create new tokens on your desktop.'})):f.default.createElement("span",null,f.default.createElement(m.FormattedHTMLMessage,{id:"user.settings.tokens.description",defaultMessage:'<a href="https://about.mattermost.com/default-user-access-tokens" target="_blank">Personal access tokens</a> function similarly to session tokens and can be used by integrations to <a href="https://about.mattermost.com/default-api-authentication" target="_blank">authenticate against the REST API</a>.'}));var r=void 0;this.state.tokenCreationState===N?r=f.default.createElement("div",{className:"padding-left x2"},f.default.createElement("div",{className:"row"},f.default.createElement("label",{className:"col-sm-auto control-label padding-right x2"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.name",defaultMessage:"Token Description: "})),f.default.createElement("div",{className:"col-sm-5"},f.default.createElement("input",{autoFocus:!0,ref:"newtokendescription",className:"form-control",type:"text",maxLength:64,onKeyPress:this.saveTokenKeyPress}))),f.default.createElement("div",null,f.default.createElement("div",{className:"padding-top x2"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.nameHelp",defaultMessage:"Enter a description for your token to remember what it does."})),f.default.createElement("div",null,f.default.createElement("label",{id:"clientError",className:"has-error margin-top margin-bottom"},this.state.tokenError)),f.default.createElement(y.default,{btnClass:"btn-primary",savingMessage:f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.save",defaultMessage:"Save"}),saving:this.state.saving,onClick:this.confirmCreateToken}),f.default.createElement("button",{className:"btn btn-default",onClick:this.stopCreatingToken},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.cancel",defaultMessage:"Cancel"})))):this.state.tokenCreationState===C?(0===i.length&&(t=" hidden"),r=f.default.createElement("div",{className:"alert alert-warning"},f.default.createElement("i",{className:"fa fa-warning margin-right",title:E.localizeMessage("generic_icons.warning","Warning Icon")}),f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.copy",defaultMessage:"Please copy the access token below. You won't be able to see it again!"}),f.default.createElement("br",null),f.default.createElement("br",null),f.default.createElement("div",{className:"whitespace--nowrap overflow--ellipsis"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.name",defaultMessage:"Token Description: "}),this.state.newToken.description),f.default.createElement("div",{className:"whitespace--nowrap overflow--ellipsis"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.id",defaultMessage:"Token ID: "}),this.state.newToken.id),f.default.createElement("strong",{className:"word-break--all"},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.token",defaultMessage:"Access Token: "}),this.state.newToken.token))):r=f.default.createElement("a",{className:"btn btn-primary",href:"#",onClick:this.startCreatingToken},f.default.createElement(m.FormattedMessage,{id:"user.settings.tokens.create",defaultMessage:"Create New Token"}));var o=[];return o.push(f.default.createElement("div",{key:"tokensSetting",className:"padding-top"},f.default.createElement("div",{key:"tokenList"},f.default.createElement("div",{className:"alert alert-transparent"+t},i,n),r))),f.default.createElement("div",null,f.default.createElement(S.default,{title:E.localizeMessage("user.settings.tokens.title","Personal Access Tokens"),inputs:o,extraInfo:l,infoPosition:"top",serverError:this.state.serverError,updateSection:this.props.updateSection,width:"full",saving:this.state.saving,cancelButtonText:f.default.createElement(m.FormattedMessage,{id:"user.settings.security.close",defaultMessage:"Close"})}),f.default.createElement(b.default,{title:this.state.confirmTitle,message:this.state.confirmMessage?this.state.confirmMessage(this.state):null,confirmButtonText:this.state.confirmButton,show:this.state.showConfirmModal,onConfirm:this.state.confirmComplete||function(){},onCancel:this.handleCancelConfirm,hideCancel:this.state.confirmHideCancel}))}}]),t}(f.default.Component);T.propTypes={user:c.default.object,active:c.default.bool,updateSection:c.default.func,userAccessTokens:c.default.object,setRequireConfirm:c.default.func.isRequired,actions:c.default.shape({getUserAccessTokensForUser:c.default.func.isRequired,createUserAccessToken:c.default.func.isRequired,revokeUserAccessToken:c.default.func.isRequired,enableUserAccessToken:c.default.func.isRequired,disableUserAccessToken:c.default.func.isRequired,clearUserAccessTokens:c.default.func.isRequired}).isRequired},T.defaultProps={user:{},active:!1},t.default=T},2147:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(2),i=a(284),n=a(845),l=a(22),r=a(96),o=a(774),d=a(771),u=a(25),c=function(e){return e&&e.__esModule?e:{default:e}}(a(2148));t.default=(0,i.connect)(function(e){var t=(0,r.getConfig)(e);return{closeUnusedDirectMessages:(0,o.get)(e,l.Preferences.CATEGORY_SIDEBAR_SETTINGS,"close_unused_direct_messages","after_seven_days"),displayUnreadSection:(0,o.get)(e,l.Preferences.CATEGORY_SIDEBAR_SETTINGS,"show_unread_section",(t.ExperimentalGroupUnreadChannels===u.GroupUnreadChannels.DEFAULT_ON).toString()),showUnusedOption:"true"===t.CloseUnusedDirectMessages,showUnreadOption:t.ExperimentalGroupUnreadChannels!==u.GroupUnreadChannels.DISABLED,user:(0,d.getCurrentUser)(e)}},function(e){return{actions:(0,s.bindActionCreators)({savePreferences:n.savePreferences},e)}})(c.default)},2148:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=g(a(282)),i=g(a(279)),n=g(a(283)),l=g(a(280)),r=g(a(281)),o=g(a(1)),d=g(a(3)),u=a(762),c=g(a(25)),f=a(763),m=g(a(812)),p=g(a(825));function g(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.getStateFromStores=function(){var e=a.props;return{settings:{close_unused_direct_messages:e.closeUnusedDirectMessages,show_unread_section:e.displayUnreadSection},isSaving:!1}},a.updateSetting=function(e,t){var s=a.state.settings;s[e]=t,a.setState(s)},a.handleSubmit=function(e){var t=a.props,s=t.actions,i=t.user,n=[];n.push({user_id:i.id,category:c.default.Preferences.CATEGORY_SIDEBAR_SETTINGS,name:e,value:a.state.settings[e]}),a.setState({isSaving:!0}),s.savePreferences(i.id,n).then(function(){a.updateSection("")})},a.updateSection=function(e){e||a.setState(a.getStateFromStores()),a.setState({isSaving:!1}),a.props.updateSection(e)},a.renderAutoCloseDMLabel=function(e){return"after_seven_days"===e?d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.after_seven_days",defaultMessage:"After 7 days with no new messages"}):d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.never",defaultMessage:"Never"})},a.renderAutoCloseDMSection=function(){return"autoCloseDM"===a.props.activeSection?d.default.createElement(m.default,{title:d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.autoCloseDMTitle",defaultMessage:"Automatically Close Direct Messages"}),inputs:[d.default.createElement("div",{key:"autoCloseDMSetting"},d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"autoCloseDMAfterSevenDays",type:"radio",name:"autoCloseDM",checked:"after_seven_days"===a.state.settings.close_unused_direct_messages,onChange:a.updateSetting.bind(a,"close_unused_direct_messages","after_seven_days")}),d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.after_seven_days",defaultMessage:"After 7 days with no new messages"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"autoCloseDMNever",type:"radio",name:"autoCloseDM",checked:"never"===a.state.settings.close_unused_direct_messages,onChange:a.updateSetting.bind(a,"close_unused_direct_messages","never")}),d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.never",defaultMessage:"Never"})),d.default.createElement("br",null)),d.default.createElement("div",null,d.default.createElement("br",null),d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.autoCloseDMDesc",defaultMessage:"Direct Message conversations can be reopened with the “+” button in the sidebar or using the Channel Switcher (CTRL+K)."})))],setting:"close_unused_direct_messages",submit:a.handleSubmit,saving:a.state.isSaving,server_error:a.state.serverError,updateSection:a.updateSection}):d.default.createElement(p.default,{title:d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.autoCloseDMTitle",defaultMessage:"Automatically Close Direct Messages"}),describe:a.renderAutoCloseDMLabel(a.state.settings.close_unused_direct_messages),section:"autoCloseDM",updateSection:a.updateSection})},a.renderUnreadLabel=function(e){return"true"===e?d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.showUnreadSection",defaultMessage:"At the top of the channel sidebar"}):d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.never",defaultMessage:"Never"})},a.renderUnreadSection=function(){return"unreadChannels"===a.props.activeSection?d.default.createElement(m.default,{title:d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.unreadSectionTitle",defaultMessage:"Group unread channels"}),inputs:[d.default.createElement("div",{key:"unreadSectionSetting"},d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"unreadSectionEnabled",type:"radio",name:"unreadChannels",checked:"true"===a.state.settings.show_unread_section,onChange:a.updateSetting.bind(a,"show_unread_section","true")}),d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.showUnreadSection",defaultMessage:"At the top of the channel sidebar"})),d.default.createElement("br",null)),d.default.createElement("div",{className:"radio"},d.default.createElement("label",null,d.default.createElement("input",{id:"unreadSectionNever",type:"radio",name:"unreadChannels",checked:"false"===a.state.settings.show_unread_section,onChange:a.updateSetting.bind(a,"show_unread_section","false")}),d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.never",defaultMessage:"Never"})),d.default.createElement("br",null)),d.default.createElement("div",null,d.default.createElement("br",null),d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.unreadSectionDesc",defaultMessage:"Unread channels will be sorted at the top of the channel sidebar until read."})))],setting:"show_unread_section",submit:a.handleSubmit,saving:a.state.isSaving,server_error:a.state.serverError,updateSection:a.updateSection}):d.default.createElement(p.default,{title:d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.unreadSectionTitle",defaultMessage:"Group unread channels"}),describe:a.renderUnreadLabel(a.state.settings.show_unread_section),section:"unreadChannels",updateSection:a.updateSection})},a.state=a.getStateFromStores(),a}return(0,r.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.showUnusedOption,a=e.showUnreadOption,s=t?this.renderAutoCloseDMSection():null,i=a?this.renderUnreadSection():null;return d.default.createElement("div",null,d.default.createElement("div",{className:"modal-header"},d.default.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},d.default.createElement("span",{"aria-hidden":"true"},"×")),d.default.createElement("h4",{className:"modal-title",ref:"title"},d.default.createElement("div",{className:"modal-back"},d.default.createElement("i",{className:"fa fa-angle-left",title:(0,f.localizeMessage)("generic_icons.collapse","Collapse Icon"),onClick:this.props.collapseModal})),d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.title",defaultMessage:"Sidebar Settings"}))),d.default.createElement("div",{className:"user-settings"},d.default.createElement("h3",{className:"tab-header"},d.default.createElement(u.FormattedMessage,{id:"user.settings.sidebar.title",defaultMessage:"Sidebar Settings"})),d.default.createElement("div",{className:"divider-dark first"}),i,a&&d.default.createElement("div",{className:"divider-light"}),s,d.default.createElement("div",{className:"divider-dark"})))}}]),t}(d.default.Component);h.propTypes={actions:o.default.shape({savePreferences:o.default.func.isRequired}).isRequired,user:o.default.object,closeUnusedDirectMessages:o.default.string.isRequired,displayUnreadSection:o.default.string.isRequired,showUnusedOption:o.default.bool.isRequired,showUnreadOption:o.default.bool.isRequired,updateSection:o.default.func,activeSection:o.default.string,closeModal:o.default.func.isRequired,collapseModal:o.default.func.isRequired},t.default=h}}]);
//# sourceMappingURL=29.c220e1225aab87d96967.js.map